/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={68:t=>{t.exports=function(){"use strict";function t(e,n,i,s){this.message=e,this.expected=n,this.found=i,this.location=s,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),t.buildMessage=function(t,e){var n={literal:function(t){return'"'+s(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function s(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}return"Expected "+function(t){var e,i,s,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(s=t[e],n[s.type](s));if(o.sort(),o.length>0){for(e=1,i=1;e<o.length;e++)o[e-1]!==o[e]&&(o[i]=o[e],i++);o.length=i}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,n){n=void 0!==n?n:{};var i,s={},o={Start:qi},r=qi,a=function(t){return t},c={type:"any"},u=/^[\n\r\u2028\u2029]/,h=Wi(["\n","\r","\u2028","\u2029"],!1,!1),l=zi("whitespace"),d="\t",f=$i("\t",!1),p="\v",g=$i("\v",!1),m="\f",_=$i("\f",!1),v=" ",b=$i(" ",!1),E=" ",y=$i(" ",!1),C="\ufeff",w=$i("\ufeff",!1),x=zi("end of line"),A="\n",k=$i("\n",!1),B="\r\n",T=$i("\r\n",!1),F="\r",S=$i("\r",!1),D="\u2028",O=$i("\u2028",!1),I="\u2029",M=$i("\u2029",!1),P="@{",L=$i("@{",!1),j="}",R=$i("}",!1),N=function(t){return{type:"Composite",id:t.join(""),loc:Ni()}},$=function(t){return t},W=zi("identifier"),z=function(t,e){return{type:"Identifier",name:t+e.join(""),loc:Ni()}},H="$",X=$i("$",!1),Y="_",q=$i("_",!1),V="‌",U=$i("‌",!1),G="‍",J=$i("‍",!1),Z=function(){return{type:"NullLiteral",value:null}},K=function(){return{type:"BooleanLiteral",value:!0}},Q=function(){return{type:"BooleanLiteral",value:!1}},tt=zi("number"),et=function(t){return t},nt=".",it=$i(".",!1),st=function(){return{type:"NumberLiteral",value:parseFloat(Ri())}},ot="0",rt=$i("0",!1),at=/^[0-9]/,ct=Wi([["0","9"]],!1,!1),ut=/^[1-9]/,ht=Wi([["1","9"]],!1,!1),lt="e",dt=$i("e",!0),ft=/^[+\-]/,pt=Wi(["+","-"],!1,!1),gt=/^[0-9a-f]/i,mt=Wi([["0","9"],["a","f"]],!1,!0),_t=zi("string"),vt='"',bt=$i('"',!1),Et=function(t){return{type:"StringLiteral",value:t.join("")}},yt="\\",Ct=$i("\\",!1),wt=function(){return Ri()},xt=function(t){return t},At=function(){return""},kt=function(){return"\0"},Bt="'",Tt=$i("'",!1),Ft="b",St=$i("b",!1),Dt=function(){return"\b"},Ot="f",It=$i("f",!1),Mt=function(){return"\f"},Pt="n",Lt=$i("n",!1),jt=function(){return"\n"},Rt="r",Nt=$i("r",!1),$t=function(){return"\r"},Wt="t",zt=$i("t",!1),Ht=function(){return"\t"},Xt="v",Yt=$i("v",!1),qt=function(){return"\v"},Vt="x",Ut=$i("x",!1),Gt="u",Jt=$i("u",!1),Zt=function(t){return String.fromCharCode(parseInt(t,16))},Kt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Qt=Wi([["a","z"],"µ",["ß","ö"],["ø","ÿ"],"ā","ă","ą","ć","ĉ","ċ","č","ď","đ","ē","ĕ","ė","ę","ě","ĝ","ğ","ġ","ģ","ĥ","ħ","ĩ","ī","ĭ","į","ı","ĳ","ĵ",["ķ","ĸ"],"ĺ","ļ","ľ","ŀ","ł","ń","ņ",["ň","ŉ"],"ŋ","ō","ŏ","ő","œ","ŕ","ŗ","ř","ś","ŝ","ş","š","ţ","ť","ŧ","ũ","ū","ŭ","ů","ű","ų","ŵ","ŷ","ź","ż",["ž","ƀ"],"ƃ","ƅ","ƈ",["ƌ","ƍ"],"ƒ","ƕ",["ƙ","ƛ"],"ƞ","ơ","ƣ","ƥ","ƨ",["ƪ","ƫ"],"ƭ","ư","ƴ","ƶ",["ƹ","ƺ"],["ƽ","ƿ"],"ǆ","ǉ","ǌ","ǎ","ǐ","ǒ","ǔ","ǖ","ǘ","ǚ",["ǜ","ǝ"],"ǟ","ǡ","ǣ","ǥ","ǧ","ǩ","ǫ","ǭ",["ǯ","ǰ"],"ǳ","ǵ","ǹ","ǻ","ǽ","ǿ","ȁ","ȃ","ȅ","ȇ","ȉ","ȋ","ȍ","ȏ","ȑ","ȓ","ȕ","ȗ","ș","ț","ȝ","ȟ","ȡ","ȣ","ȥ","ȧ","ȩ","ȫ","ȭ","ȯ","ȱ",["ȳ","ȹ"],"ȼ",["ȿ","ɀ"],"ɂ","ɇ","ɉ","ɋ","ɍ",["ɏ","ʓ"],["ʕ","ʯ"],"ͱ","ͳ","ͷ",["ͻ","ͽ"],"ΐ",["ά","ώ"],["ϐ","ϑ"],["ϕ","ϗ"],"ϙ","ϛ","ϝ","ϟ","ϡ","ϣ","ϥ","ϧ","ϩ","ϫ","ϭ",["ϯ","ϳ"],"ϵ","ϸ",["ϻ","ϼ"],["а","џ"],"ѡ","ѣ","ѥ","ѧ","ѩ","ѫ","ѭ","ѯ","ѱ","ѳ","ѵ","ѷ","ѹ","ѻ","ѽ","ѿ","ҁ","ҋ","ҍ","ҏ","ґ","ғ","ҕ","җ","ҙ","қ","ҝ","ҟ","ҡ","ң","ҥ","ҧ","ҩ","ҫ","ҭ","ү","ұ","ҳ","ҵ","ҷ","ҹ","һ","ҽ","ҿ","ӂ","ӄ","ӆ","ӈ","ӊ","ӌ",["ӎ","ӏ"],"ӑ","ӓ","ӕ","ӗ","ә","ӛ","ӝ","ӟ","ӡ","ӣ","ӥ","ӧ","ө","ӫ","ӭ","ӯ","ӱ","ӳ","ӵ","ӷ","ӹ","ӻ","ӽ","ӿ","ԁ","ԃ","ԅ","ԇ","ԉ","ԋ","ԍ","ԏ","ԑ","ԓ","ԕ","ԗ","ԙ","ԛ","ԝ","ԟ","ԡ","ԣ","ԥ","ԧ","ԩ","ԫ","ԭ","ԯ",["ՠ","ֈ"],["ა","ჺ"],["ჽ","ჿ"],["ᏸ","ᏽ"],["ᲀ","ᲈ"],["ᴀ","ᴫ"],["ᵫ","ᵷ"],["ᵹ","ᶚ"],"ḁ","ḃ","ḅ","ḇ","ḉ","ḋ","ḍ","ḏ","ḑ","ḓ","ḕ","ḗ","ḙ","ḛ","ḝ","ḟ","ḡ","ḣ","ḥ","ḧ","ḩ","ḫ","ḭ","ḯ","ḱ","ḳ","ḵ","ḷ","ḹ","ḻ","ḽ","ḿ","ṁ","ṃ","ṅ","ṇ","ṉ","ṋ","ṍ","ṏ","ṑ","ṓ","ṕ","ṗ","ṙ","ṛ","ṝ","ṟ","ṡ","ṣ","ṥ","ṧ","ṩ","ṫ","ṭ","ṯ","ṱ","ṳ","ṵ","ṷ","ṹ","ṻ","ṽ","ṿ","ẁ","ẃ","ẅ","ẇ","ẉ","ẋ","ẍ","ẏ","ẑ","ẓ",["ẕ","ẝ"],"ẟ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ỉ","ị","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ụ","ủ","ứ","ừ","ử","ữ","ự","ỳ","ỵ","ỷ","ỹ","ỻ","ỽ",["ỿ","ἇ"],["ἐ","ἕ"],["ἠ","ἧ"],["ἰ","ἷ"],["ὀ","ὅ"],["ὐ","ὗ"],["ὠ","ὧ"],["ὰ","ώ"],["ᾀ","ᾇ"],["ᾐ","ᾗ"],["ᾠ","ᾧ"],["ᾰ","ᾴ"],["ᾶ","ᾷ"],"ι",["ῂ","ῄ"],["ῆ","ῇ"],["ῐ","ΐ"],["ῖ","ῗ"],["ῠ","ῧ"],["ῲ","ῴ"],["ῶ","ῷ"],"ℊ",["ℎ","ℏ"],"ℓ","ℯ","ℴ","ℹ",["ℼ","ℽ"],["ⅆ","ⅉ"],"ⅎ","ↄ",["ⰰ","ⱞ"],"ⱡ",["ⱥ","ⱦ"],"ⱨ","ⱪ","ⱬ","ⱱ",["ⱳ","ⱴ"],["ⱶ","ⱻ"],"ⲁ","ⲃ","ⲅ","ⲇ","ⲉ","ⲋ","ⲍ","ⲏ","ⲑ","ⲓ","ⲕ","ⲗ","ⲙ","ⲛ","ⲝ","ⲟ","ⲡ","ⲣ","ⲥ","ⲧ","ⲩ","ⲫ","ⲭ","ⲯ","ⲱ","ⲳ","ⲵ","ⲷ","ⲹ","ⲻ","ⲽ","ⲿ","ⳁ","ⳃ","ⳅ","ⳇ","ⳉ","ⳋ","ⳍ","ⳏ","ⳑ","ⳓ","ⳕ","ⳗ","ⳙ","ⳛ","ⳝ","ⳟ","ⳡ",["ⳣ","ⳤ"],"ⳬ","ⳮ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ","ꙁ","ꙃ","ꙅ","ꙇ","ꙉ","ꙋ","ꙍ","ꙏ","ꙑ","ꙓ","ꙕ","ꙗ","ꙙ","ꙛ","ꙝ","ꙟ","ꙡ","ꙣ","ꙥ","ꙧ","ꙩ","ꙫ","ꙭ","ꚁ","ꚃ","ꚅ","ꚇ","ꚉ","ꚋ","ꚍ","ꚏ","ꚑ","ꚓ","ꚕ","ꚗ","ꚙ","ꚛ","ꜣ","ꜥ","ꜧ","ꜩ","ꜫ","ꜭ",["ꜯ","ꜱ"],"ꜳ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ꜿ","ꝁ","ꝃ","ꝅ","ꝇ","ꝉ","ꝋ","ꝍ","ꝏ","ꝑ","ꝓ","ꝕ","ꝗ","ꝙ","ꝛ","ꝝ","ꝟ","ꝡ","ꝣ","ꝥ","ꝧ","ꝩ","ꝫ","ꝭ","ꝯ",["ꝱ","ꝸ"],"ꝺ","ꝼ","ꝿ","ꞁ","ꞃ","ꞅ","ꞇ","ꞌ","ꞎ","ꞑ",["ꞓ","ꞕ"],"ꞗ","ꞙ","ꞛ","ꞝ","ꞟ","ꞡ","ꞣ","ꞥ","ꞧ","ꞩ","ꞯ","ꞵ","ꞷ","ꞹ","ꟺ",["ꬰ","ꭚ"],["ꭠ","ꭥ"],["ꭰ","ꮿ"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],["ａ","ｚ"]],!1,!1),te=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,ee=Wi([["ʰ","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ","ʹ","ͺ","ՙ","ـ",["ۥ","ۦ"],["ߴ","ߵ"],"ߺ","ࠚ","ࠤ","ࠨ","ॱ","ๆ","ໆ","ჼ","ៗ","ᡃ","ᪧ",["ᱸ","ᱽ"],["ᴬ","ᵪ"],"ᵸ",["ᶛ","ᶿ"],"ⁱ","ⁿ",["ₐ","ₜ"],["ⱼ","ⱽ"],"ⵯ","ⸯ","々",["〱","〵"],"〻",["ゝ","ゞ"],["ー","ヾ"],"ꀕ",["ꓸ","ꓽ"],"ꘌ","ꙿ",["ꚜ","ꚝ"],["ꜗ","ꜟ"],"ꝰ","ꞈ",["ꟸ","ꟹ"],"ꧏ","ꧦ","ꩰ","ꫝ",["ꫳ","ꫴ"],["ꭜ","ꭟ"],"ｰ",["ﾞ","ﾟ"]],!1,!1),ne=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05EF-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,ie=Wi(["ª","º","ƻ",["ǀ","ǃ"],"ʔ",["א","ת"],["ׯ","ײ"],["ؠ","ؿ"],["ف","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ࠀ","ࠕ"],["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॲ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๅ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["ᄀ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛱ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៜ",["ᠠ","ᡂ"],["ᡄ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱷ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ℵ","ℸ"],["ⴰ","ⵧ"],["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"〆","〼",["ぁ","ゖ"],"ゟ",["ァ","ヺ"],"ヿ",["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꀔ"],["ꀖ","ꒌ"],["ꓐ","ꓷ"],["ꔀ","ꘋ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],"ꙮ",["ꚠ","ꛥ"],"ꞏ","ꟷ",["ꟻ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],["ꧠ","ꧤ"],["ꧧ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩯ"],["ꩱ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫜ"],["ꫠ","ꫪ"],"ꫲ",["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["ｦ","ｯ"],["ｱ","ﾝ"],["ﾠ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),se=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,oe=Wi(["ǅ","ǈ","ǋ","ǲ",["ᾈ","ᾏ"],["ᾘ","ᾟ"],["ᾨ","ᾯ"],"ᾼ","ῌ","ῼ"],!1,!1),re=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]/,ae=Wi([["A","Z"],["À","Ö"],["Ø","Þ"],"Ā","Ă","Ą","Ć","Ĉ","Ċ","Č","Ď","Đ","Ē","Ĕ","Ė","Ę","Ě","Ĝ","Ğ","Ġ","Ģ","Ĥ","Ħ","Ĩ","Ī","Ĭ","Į","İ","Ĳ","Ĵ","Ķ","Ĺ","Ļ","Ľ","Ŀ","Ł","Ń","Ņ","Ň","Ŋ","Ō","Ŏ","Ő","Œ","Ŕ","Ŗ","Ř","Ś","Ŝ","Ş","Š","Ţ","Ť","Ŧ","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ŵ","Ŷ",["Ÿ","Ź"],"Ż","Ž",["Ɓ","Ƃ"],"Ƅ",["Ɔ","Ƈ"],["Ɖ","Ƌ"],["Ǝ","Ƒ"],["Ɠ","Ɣ"],["Ɩ","Ƙ"],["Ɯ","Ɲ"],["Ɵ","Ơ"],"Ƣ","Ƥ",["Ʀ","Ƨ"],"Ʃ","Ƭ",["Ʈ","Ư"],["Ʊ","Ƴ"],"Ƶ",["Ʒ","Ƹ"],"Ƽ","Ǆ","Ǉ","Ǌ","Ǎ","Ǐ","Ǒ","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ǟ","Ǡ","Ǣ","Ǥ","Ǧ","Ǩ","Ǫ","Ǭ","Ǯ","Ǳ","Ǵ",["Ƕ","Ǹ"],"Ǻ","Ǽ","Ǿ","Ȁ","Ȃ","Ȅ","Ȇ","Ȉ","Ȋ","Ȍ","Ȏ","Ȑ","Ȓ","Ȕ","Ȗ","Ș","Ț","Ȝ","Ȟ","Ƞ","Ȣ","Ȥ","Ȧ","Ȩ","Ȫ","Ȭ","Ȯ","Ȱ","Ȳ",["Ⱥ","Ȼ"],["Ƚ","Ⱦ"],"Ɂ",["Ƀ","Ɇ"],"Ɉ","Ɋ","Ɍ","Ɏ","Ͱ","Ͳ","Ͷ","Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ώ"],["Α","Ρ"],["Σ","Ϋ"],"Ϗ",["ϒ","ϔ"],"Ϙ","Ϛ","Ϝ","Ϟ","Ϡ","Ϣ","Ϥ","Ϧ","Ϩ","Ϫ","Ϭ","Ϯ","ϴ","Ϸ",["Ϲ","Ϻ"],["Ͻ","Я"],"Ѡ","Ѣ","Ѥ","Ѧ","Ѩ","Ѫ","Ѭ","Ѯ","Ѱ","Ѳ","Ѵ","Ѷ","Ѹ","Ѻ","Ѽ","Ѿ","Ҁ","Ҋ","Ҍ","Ҏ","Ґ","Ғ","Ҕ","Җ","Ҙ","Қ","Ҝ","Ҟ","Ҡ","Ң","Ҥ","Ҧ","Ҩ","Ҫ","Ҭ","Ү","Ұ","Ҳ","Ҵ","Ҷ","Ҹ","Һ","Ҽ","Ҿ",["Ӏ","Ӂ"],"Ӄ","Ӆ","Ӈ","Ӊ","Ӌ","Ӎ","Ӑ","Ӓ","Ӕ","Ӗ","Ә","Ӛ","Ӝ","Ӟ","Ӡ","Ӣ","Ӥ","Ӧ","Ө","Ӫ","Ӭ","Ӯ","Ӱ","Ӳ","Ӵ","Ӷ","Ӹ","Ӻ","Ӽ","Ӿ","Ԁ","Ԃ","Ԅ","Ԇ","Ԉ","Ԋ","Ԍ","Ԏ","Ԑ","Ԓ","Ԕ","Ԗ","Ԙ","Ԛ","Ԝ","Ԟ","Ԡ","Ԣ","Ԥ","Ԧ","Ԩ","Ԫ","Ԭ","Ԯ",["Ա","Ֆ"],["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["Ꭰ","Ᏽ"],["Ა","Ჺ"],["Ჽ","Ჿ"],"Ḁ","Ḃ","Ḅ","Ḇ","Ḉ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ḟ","Ḡ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ḭ","Ḯ","Ḱ","Ḳ","Ḵ","Ḷ","Ḹ","Ḻ","Ḽ","Ḿ","Ṁ","Ṃ","Ṅ","Ṇ","Ṉ","Ṋ","Ṍ","Ṏ","Ṑ","Ṓ","Ṕ","Ṗ","Ṙ","Ṛ","Ṝ","Ṟ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ṫ","Ṭ","Ṯ","Ṱ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ṽ","Ṿ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ẋ","Ẍ","Ẏ","Ẑ","Ẓ","Ẕ","ẞ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ỉ","Ị","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ỳ","Ỵ","Ỷ","Ỹ","Ỻ","Ỽ","Ỿ",["Ἀ","Ἇ"],["Ἐ","Ἕ"],["Ἠ","Ἧ"],["Ἰ","Ἷ"],["Ὀ","Ὅ"],"Ὑ","Ὓ","Ὕ","Ὗ",["Ὠ","Ὧ"],["Ᾰ","Ά"],["Ὲ","Ή"],["Ῐ","Ί"],["Ῠ","Ῥ"],["Ὸ","Ώ"],"ℂ","ℇ",["ℋ","ℍ"],["ℐ","ℒ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℰ","ℳ"],["ℾ","ℿ"],"ⅅ","Ↄ",["Ⰰ","Ⱞ"],"Ⱡ",["Ɫ","Ɽ"],"Ⱨ","Ⱪ","Ⱬ",["Ɑ","Ɒ"],"Ⱳ","Ⱶ",["Ȿ","Ⲁ"],"Ⲃ","Ⲅ","Ⲇ","Ⲉ","Ⲋ","Ⲍ","Ⲏ","Ⲑ","Ⲓ","Ⲕ","Ⲗ","Ⲙ","Ⲛ","Ⲝ","Ⲟ","Ⲡ","Ⲣ","Ⲥ","Ⲧ","Ⲩ","Ⲫ","Ⲭ","Ⲯ","Ⲱ","Ⲳ","Ⲵ","Ⲷ","Ⲹ","Ⲻ","Ⲽ","Ⲿ","Ⳁ","Ⳃ","Ⳅ","Ⳇ","Ⳉ","Ⳋ","Ⳍ","Ⳏ","Ⳑ","Ⳓ","Ⳕ","Ⳗ","Ⳙ","Ⳛ","Ⳝ","Ⳟ","Ⳡ","Ⳣ","Ⳬ","Ⳮ","Ⳳ","Ꙁ","Ꙃ","Ꙅ","Ꙇ","Ꙉ","Ꙋ","Ꙍ","Ꙏ","Ꙑ","Ꙓ","Ꙕ","Ꙗ","Ꙙ","Ꙛ","Ꙝ","Ꙟ","Ꙡ","Ꙣ","Ꙥ","Ꙧ","Ꙩ","Ꙫ","Ꙭ","Ꚁ","Ꚃ","Ꚅ","Ꚇ","Ꚉ","Ꚋ","Ꚍ","Ꚏ","Ꚑ","Ꚓ","Ꚕ","Ꚗ","Ꚙ","Ꚛ","Ꜣ","Ꜥ","Ꜧ","Ꜩ","Ꜫ","Ꜭ","Ꜯ","Ꜳ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ꜿ","Ꝁ","Ꝃ","Ꝅ","Ꝇ","Ꝉ","Ꝋ","Ꝍ","Ꝏ","Ꝑ","Ꝓ","Ꝕ","Ꝗ","Ꝙ","Ꝛ","Ꝝ","Ꝟ","Ꝡ","Ꝣ","Ꝥ","Ꝧ","Ꝩ","Ꝫ","Ꝭ","Ꝯ","Ꝺ","Ꝼ",["Ᵹ","Ꝿ"],"Ꞁ","Ꞃ","Ꞅ","Ꞇ","Ꞌ","Ɥ","Ꞑ","Ꞓ","Ꞗ","Ꞙ","Ꞛ","Ꞝ","Ꞟ","Ꞡ","Ꞣ","Ꞥ","Ꞧ","Ꞩ",["Ɦ","Ɪ"],["Ʞ","Ꞵ"],"Ꞷ","Ꞹ",["Ａ","Ｚ"]],!1,!1),ce=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u1CF7\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,ue=Wi(["ः","ऻ",["ा","ी"],["ॉ","ौ"],["ॎ","ॏ"],["ং","ঃ"],["া","ী"],["ে","ৈ"],["ো","ৌ"],"ৗ","ਃ",["ਾ","ੀ"],"ઃ",["ા","ી"],"ૉ",["ો","ૌ"],["ଂ","ଃ"],"ା","ୀ",["େ","ୈ"],["ୋ","ୌ"],"ୗ",["ா","ி"],["ு","ூ"],["ெ","ை"],["ொ","ௌ"],"ௗ",["ఁ","ః"],["ు","ౄ"],["ಂ","ಃ"],"ಾ",["ೀ","ೄ"],["ೇ","ೈ"],["ೊ","ೋ"],["ೕ","ೖ"],["ം","ഃ"],["ാ","ീ"],["െ","ൈ"],["ൊ","ൌ"],"ൗ",["ං","ඃ"],["ා","ෑ"],["ෘ","ෟ"],["ෲ","ෳ"],["༾","༿"],"ཿ",["ါ","ာ"],"ေ","း",["ျ","ြ"],["ၖ","ၗ"],["ၢ","ၤ"],["ၧ","ၭ"],["ႃ","ႄ"],["ႇ","ႌ"],"ႏ",["ႚ","ႜ"],"ា",["ើ","ៅ"],["ះ","ៈ"],["ᤣ","ᤦ"],["ᤩ","ᤫ"],["ᤰ","ᤱ"],["ᤳ","ᤸ"],["ᨙ","ᨚ"],"ᩕ","ᩗ","ᩡ",["ᩣ","ᩤ"],["ᩭ","ᩲ"],"ᬄ","ᬵ","ᬻ",["ᬽ","ᭁ"],["ᭃ","᭄"],"ᮂ","ᮡ",["ᮦ","ᮧ"],"᮪","ᯧ",["ᯪ","ᯬ"],"ᯮ",["᯲","᯳"],["ᰤ","ᰫ"],["ᰴ","ᰵ"],"᳡",["ᳲ","ᳳ"],"᳷",["〮","〯"],["ꠣ","ꠤ"],"ꠧ",["ꢀ","ꢁ"],["ꢴ","ꣃ"],["ꥒ","꥓"],"ꦃ",["ꦴ","ꦵ"],["ꦺ","ꦻ"],["ꦽ","꧀"],["ꨯ","ꨰ"],["ꨳ","ꨴ"],"ꩍ","ꩻ","ꩽ","ꫫ",["ꫮ","ꫯ"],"ꫵ",["ꯣ","ꯤ"],["ꯦ","ꯧ"],["ꯩ","ꯪ"],"꯬"],!1,!1),he=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u09FE\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D00-\u0D01\u0D3B-\u0D3C\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885-\u1886\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,le=Wi([["̀","ͯ"],["҃","҇"],["֑","ֽ"],"ֿ",["ׁ","ׂ"],["ׄ","ׅ"],"ׇ",["ؐ","ؚ"],["ً","ٟ"],"ٰ",["ۖ","ۜ"],["۟","ۤ"],["ۧ","ۨ"],["۪","ۭ"],"ܑ",["ܰ","݊"],["ަ","ް"],["߫","߳"],"߽",["ࠖ","࠙"],["ࠛ","ࠣ"],["ࠥ","ࠧ"],["ࠩ","࠭"],["࡙","࡛"],["࣓","࣡"],["ࣣ","ं"],"ऺ","़",["ु","ै"],"्",["॑","ॗ"],["ॢ","ॣ"],"ঁ","়",["ু","ৄ"],"্",["ৢ","ৣ"],"৾",["ਁ","ਂ"],"਼",["ੁ","ੂ"],["ੇ","ੈ"],["ੋ","੍"],"ੑ",["ੰ","ੱ"],"ੵ",["ઁ","ં"],"઼",["ુ","ૅ"],["ે","ૈ"],"્",["ૢ","ૣ"],["ૺ","૿"],"ଁ","଼","ି",["ୁ","ୄ"],"୍","ୖ",["ୢ","ୣ"],"ஂ","ீ","்","ఀ","ఄ",["ా","ీ"],["ె","ై"],["ొ","్"],["ౕ","ౖ"],["ౢ","ౣ"],"ಁ","಼","ಿ","ೆ",["ೌ","್"],["ೢ","ೣ"],["ഀ","ഁ"],["഻","഼"],["ു","ൄ"],"്",["ൢ","ൣ"],"්",["ි","ු"],"ූ","ั",["ิ","ฺ"],["็","๎"],"ັ",["ິ","ູ"],["ົ","ຼ"],["່","ໍ"],["༘","༙"],"༵","༷","༹",["ཱ","ཾ"],["ྀ","྄"],["྆","྇"],["ྍ","ྗ"],["ྙ","ྼ"],"࿆",["ိ","ူ"],["ဲ","့"],["္","်"],["ွ","ှ"],["ၘ","ၙ"],["ၞ","ၠ"],["ၱ","ၴ"],"ႂ",["ႅ","ႆ"],"ႍ","ႝ",["፝","፟"],["ᜒ","᜔"],["ᜲ","᜴"],["ᝒ","ᝓ"],["ᝲ","ᝳ"],["឴","឵"],["ិ","ួ"],"ំ",["៉","៓"],"៝",["᠋","᠍"],["ᢅ","ᢆ"],"ᢩ",["ᤠ","ᤢ"],["ᤧ","ᤨ"],"ᤲ",["᤹","᤻"],["ᨗ","ᨘ"],"ᨛ","ᩖ",["ᩘ","ᩞ"],"᩠","ᩢ",["ᩥ","ᩬ"],["ᩳ","᩼"],"᩿",["᪰","᪽"],["ᬀ","ᬃ"],"᬴",["ᬶ","ᬺ"],"ᬼ","ᭂ",["᭫","᭳"],["ᮀ","ᮁ"],["ᮢ","ᮥ"],["ᮨ","ᮩ"],["᮫","ᮭ"],"᯦",["ᯨ","ᯩ"],"ᯭ",["ᯯ","ᯱ"],["ᰬ","ᰳ"],["ᰶ","᰷"],["᳐","᳒"],["᳔","᳠"],["᳢","᳨"],"᳭","᳴",["᳸","᳹"],["᷀","᷹"],["᷻","᷿"],["⃐","⃜"],"⃡",["⃥","⃰"],["⳯","⳱"],"⵿",["ⷠ","ⷿ"],["〪","〭"],["゙","゚"],"꙯",["ꙴ","꙽"],["ꚞ","ꚟ"],["꛰","꛱"],"ꠂ","꠆","ꠋ",["ꠥ","ꠦ"],["꣄","ꣅ"],["꣠","꣱"],"ꣿ",["ꤦ","꤭"],["ꥇ","ꥑ"],["ꦀ","ꦂ"],"꦳",["ꦶ","ꦹ"],"ꦼ","ꧥ",["ꨩ","ꨮ"],["ꨱ","ꨲ"],["ꨵ","ꨶ"],"ꩃ","ꩌ","ꩼ","ꪰ",["ꪲ","ꪴ"],["ꪷ","ꪸ"],["ꪾ","꪿"],"꫁",["ꫬ","ꫭ"],"꫶","ꯥ","ꯨ","꯭","ﬞ",["︀","️"],["︠","︯"]],!1,!1),de=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,fe=Wi([["0","9"],["٠","٩"],["۰","۹"],["߀","߉"],["०","९"],["০","৯"],["੦","੯"],["૦","૯"],["୦","୯"],["௦","௯"],["౦","౯"],["೦","೯"],["൦","൯"],["෦","෯"],["๐","๙"],["໐","໙"],["༠","༩"],["၀","၉"],["႐","႙"],["០","៩"],["᠐","᠙"],["᥆","᥏"],["᧐","᧙"],["᪀","᪉"],["᪐","᪙"],["᭐","᭙"],["᮰","᮹"],["᱀","᱉"],["᱐","᱙"],["꘠","꘩"],["꣐","꣙"],["꤀","꤉"],["꧐","꧙"],["꧰","꧹"],["꩐","꩙"],["꯰","꯹"],["０","９"]],!1,!1),pe=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,ge=Wi([["ᛮ","ᛰ"],["Ⅰ","ↂ"],["ↅ","ↈ"],"〇",["〡","〩"],["〸","〺"],["ꛦ","ꛯ"]],!1,!1),me=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,_e=Wi(["_",["‿","⁀"],"⁔",["︳","︴"],["﹍","﹏"],"＿"],!1,!1),ve=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,be=Wi([" "," "," ",[" "," "]," "," ","　"],!1,!1),Ee="break",ye=$i("break",!1),Ce="case",we=$i("case",!1),xe="catch",Ae=$i("catch",!1),ke="class",Be=$i("class",!1),Te="const",Fe=$i("const",!1),Se="continue",De=$i("continue",!1),Oe="debugger",Ie=$i("debugger",!1),Me="default",Pe=$i("default",!1),Le="delete",je=$i("delete",!1),Re="do",Ne=$i("do",!1),$e="else",We=$i("else",!1),ze="enum",He=$i("enum",!1),Xe="export",Ye=$i("export",!1),qe="extends",Ve=$i("extends",!1),Ue="false",Ge=$i("false",!1),Je="finally",Ze=$i("finally",!1),Ke="for",Qe=$i("for",!1),tn="function",en=$i("function",!1),nn=($i("get",!1),"if"),sn=$i("if",!1),on="import",rn=$i("import",!1),an="instanceof",cn=$i("instanceof",!1),un="in",hn=$i("in",!1),ln="new",dn=$i("new",!1),fn="null",pn=$i("null",!1),gn="return",mn=$i("return",!1),_n=($i("set",!1),"super"),vn=$i("super",!1),bn="switch",En=$i("switch",!1),yn="this",Cn=$i("this",!1),wn="throw",xn=$i("throw",!1),An="true",kn=$i("true",!1),Bn="try",Tn=$i("try",!1),Fn="typeof",Sn=$i("typeof",!1),Dn="var",On=$i("var",!1),In="void",Mn=$i("void",!1),Pn="while",Ln=$i("while",!1),jn="with",Rn=$i("with",!1),Nn="(",$n=$i("(",!1),Wn=")",zn=$i(")",!1),Hn=function(t){return t},Xn=function(t,e){return{property:e,computed:!1}},Yn=function(t,e){return e.reduce((function(t,e){return{type:"MemberExpression",object:t,property:e.property,computed:e.computed}}),t)},qn=function(t,e){return{type:"UnaryExpression",operator:t,argument:e,prefix:!0}},Vn="+",Un=$i("+",!1),Gn="=",Jn=$i("=",!1),Zn="-",Kn=$i("-",!1),Qn="!",ti=$i("!",!1),ei=function(t,e){return function(t,e){return e.reduce((function(t,e){return{type:"BinaryExpression",operator:e[1],left:t,right:e[3],loc:Ni()}}),t)}(t,e)},ni="*",ii=$i("*",!1),si="/",oi=$i("/",!1),ri="%",ai=$i("%",!1),ci=/^[+=]/,ui=Wi(["+","="],!1,!1),hi=/^[\-=]/,li=Wi(["-","="],!1,!1),di="<=",fi=$i("<=",!1),pi=">=",gi=$i(">=",!1),mi="<",_i=$i("<",!1),vi=">",bi=$i(">",!1),Ei="==",yi=$i("==",!1),Ci="!=",wi=$i("!=",!1),xi=function(t,e){return function(t,e){return e.reduce((function(t,e){return{type:"LogicalExpression",operator:e[1],left:t,right:e[3],loc:Ni()}}),t)}(t,e)},Ai="&&",ki=$i("&&",!1),Bi="||",Ti=$i("||",!1),Fi=function(t,e){return function(t,e){const n={type:"SegmentExpression",segments:[t]};return e.forEach((function(t){n.segments.push(t[3])})),n}(t,e)},Si=";",Di=$i(";",!1),Oi=0,Ii=0,Mi=[{line:1,column:1}],Pi=0,Li=[],ji=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');r=o[n.startRule]}function Ri(){return e.substring(Ii,Oi)}function Ni(){return Xi(Ii,Oi)}function $i(t,e){return{type:"literal",text:t,ignoreCase:e}}function Wi(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function zi(t){return{type:"other",description:t}}function Hi(t){var n,i=Mi[t];if(i)return i;for(n=t-1;!Mi[n];)n--;for(i={line:(i=Mi[n]).line,column:i.column};n<t;)10===e.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return Mi[t]=i,i}function Xi(t,e){var n=Hi(t),i=Hi(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function Yi(t){Oi<Pi||(Oi>Pi&&(Pi=Oi,Li=[]),Li.push(t))}function qi(){var t,e;return t=Oi,cs()!==s?(e=function(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=ys())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=ws())!==s&&(a=cs())!==s&&(c=ys())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=ws())!==s&&(a=cs())!==s&&(c=ys())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=Fi(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}(),e!==s&&cs()!==s?(Ii=t,t=a(e)):(Oi=t,t=s)):(Oi=t,t=s),t}function Vi(){var t;return e.length>Oi?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(c)),t}function Ui(){var t;return u.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(h)),t}function Gi(){var t;return ji++,9===e.charCodeAt(Oi)?(t=d,Oi++):(t=s,0===ji&&Yi(f)),t===s&&(11===e.charCodeAt(Oi)?(t=p,Oi++):(t=s,0===ji&&Yi(g)),t===s&&(12===e.charCodeAt(Oi)?(t=m,Oi++):(t=s,0===ji&&Yi(_)),t===s&&(32===e.charCodeAt(Oi)?(t=v,Oi++):(t=s,0===ji&&Yi(b)),t===s&&(160===e.charCodeAt(Oi)?(t=E,Oi++):(t=s,0===ji&&Yi(y)),t===s&&(65279===e.charCodeAt(Oi)?(t=C,Oi++):(t=s,0===ji&&Yi(w)),t===s&&(t=function(){var t;return ve.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(be)),t}())))))),ji--,t===s&&0===ji&&Yi(l),t}function Ji(){var t;return ji++,10===e.charCodeAt(Oi)?(t=A,Oi++):(t=s,0===ji&&Yi(k)),t===s&&(e.substr(Oi,2)===B?(t=B,Oi+=2):(t=s,0===ji&&Yi(T)),t===s&&(13===e.charCodeAt(Oi)?(t=F,Oi++):(t=s,0===ji&&Yi(S)),t===s&&(8232===e.charCodeAt(Oi)?(t=D,Oi++):(t=s,0===ji&&Yi(O)),t===s&&(8233===e.charCodeAt(Oi)?(t=I,Oi++):(t=s,0===ji&&Yi(M)))))),ji--,t===s&&0===ji&&Yi(x),t}function Zi(){var t,e,n,i;if(ji++,t=Oi,(e=Ki())!==s){for(n=[],i=Qi();i!==s;)n.push(i),i=Qi();n!==s?(Ii=t,t=e=z(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return ji--,t===s&&(e=s,0===ji&&Yi(W)),t}function Ki(){var t;return(t=function(){var t;return(t=function(){var t;return re.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ae)),t}())===s&&(t=function(){var t;return Kt.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(Qt)),t}())===s&&(t=function(){var t;return se.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(oe)),t}())===s&&(t=function(){var t;return te.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ee)),t}())===s&&(t=function(){var t;return ne.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ie)),t}())===s&&(t=function(){var t;return pe.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ge)),t}()),t}())===s&&(36===e.charCodeAt(Oi)?(t=H,Oi++):(t=s,0===ji&&Yi(X)),t===s&&(95===e.charCodeAt(Oi)?(t=Y,Oi++):(t=s,0===ji&&Yi(q)))),t}function Qi(){var t;return(t=Ki())===s&&(t=function(){var t;return(t=function(){var t;return he.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(le)),t}())===s&&(t=function(){var t;return ce.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ue)),t}()),t}())===s&&(t=function(){var t;return de.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(fe)),t}())===s&&(t=function(){var t;return me.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(_e)),t}())===s&&(8204===e.charCodeAt(Oi)?(t=V,Oi++):(t=s,0===ji&&Yi(U)),t===s&&(8205===e.charCodeAt(Oi)?(t=G,Oi++):(t=s,0===ji&&Yi(J)))),t}function ts(){var t,n;return t=Oi,n=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===fn?(n=fn,Oi+=4):(n=s,0===ji&&Yi(pn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),n!==s&&(Ii=t,n=Z()),n}function es(){var t,n;return t=Oi,n=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===An?(n=An,Oi+=4):(n=s,0===ji&&Yi(kn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),n!==s&&(Ii=t,n=K()),(t=n)===s&&(t=Oi,n=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===Ue?(n=Ue,Oi+=5):(n=s,0===ji&&Yi(Ge)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),n!==s&&(Ii=t,n=Q()),t=n),t}function ns(){var t,n,i,o;if(48===e.charCodeAt(Oi)?(t=ot,Oi++):(t=s,0===ji&&Yi(rt)),t===s)if(t=Oi,n=function(){var t;return ut.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ht)),t}(),n!==s){for(i=[],o=is();o!==s;)i.push(o),o=is();i!==s?t=n=[n,i]:(Oi=t,t=s)}else Oi=t,t=s;return t}function is(){var t;return at.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(ct)),t}function ss(){var t,n,i;return t=Oi,n=function(){var t;return e.substr(Oi,1).toLowerCase()===lt?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(dt)),t}(),n!==s?(i=function(){var t,n,i,o;if(t=Oi,ft.test(e.charAt(Oi))?(n=e.charAt(Oi),Oi++):(n=s,0===ji&&Yi(pt)),n===s&&(n=null),n!==s){if(i=[],(o=is())!==s)for(;o!==s;)i.push(o),o=is();else i=s;i!==s?t=n=[n,i]:(Oi=t,t=s)}else Oi=t,t=s;return t}(),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}function os(){var t;return gt.test(e.charAt(Oi))?(t=e.charAt(Oi),Oi++):(t=s,0===ji&&Yi(mt)),t}function rs(){var t,n,i;return t=Oi,n=Oi,ji++,34===e.charCodeAt(Oi)?(i=vt,Oi++):(i=s,0===ji&&Yi(bt)),i===s&&(92===e.charCodeAt(Oi)?(i=yt,Oi++):(i=s,0===ji&&Yi(Ct)),i===s&&(i=Ui())),ji--,i===s?n=void 0:(Oi=n,n=s),n!==s&&(i=Vi())!==s?(Ii=t,t=n=wt()):(Oi=t,t=s),t===s&&(t=Oi,92===e.charCodeAt(Oi)?(n=yt,Oi++):(n=s,0===ji&&Yi(Ct)),n!==s?(i=function(){var t,n,i,o;return t=function(){var t;return(t=as())===s&&(t=function(){var t,n,i;return t=Oi,n=Oi,ji++,i=function(){var t;return(t=as())===s&&(t=is())===s&&(120===e.charCodeAt(Oi)?(t=Vt,Oi++):(t=s,0===ji&&Yi(Ut)),t===s&&(117===e.charCodeAt(Oi)?(t=Gt,Oi++):(t=s,0===ji&&Yi(Jt)))),t}(),i===s&&(i=Ui()),ji--,i===s?n=void 0:(Oi=n,n=s),n!==s&&(i=Vi())!==s?(Ii=t,t=n=wt()):(Oi=t,t=s),t}()),t}(),t===s&&(t=Oi,48===e.charCodeAt(Oi)?(n=ot,Oi++):(n=s,0===ji&&Yi(rt)),n!==s?(i=Oi,ji++,o=is(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?(Ii=t,t=n=kt()):(Oi=t,t=s)):(Oi=t,t=s),t===s&&(t=function(){var t,n,i,o,r,a;return t=Oi,120===e.charCodeAt(Oi)?(n=Vt,Oi++):(n=s,0===ji&&Yi(Ut)),n!==s?(i=Oi,o=Oi,(r=os())!==s&&(a=os())!==s?o=r=[r,a]:(Oi=o,o=s),(i=o!==s?e.substring(i,Oi):o)!==s?(Ii=t,t=n=Zt(i)):(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o,r,a,c,u;return t=Oi,117===e.charCodeAt(Oi)?(n=Gt,Oi++):(n=s,0===ji&&Yi(Jt)),n!==s?(i=Oi,o=Oi,(r=os())!==s&&(a=os())!==s&&(c=os())!==s&&(u=os())!==s?o=r=[r,a,c,u]:(Oi=o,o=s),(i=o!==s?e.substring(i,Oi):o)!==s?(Ii=t,t=n=Zt(i)):(Oi=t,t=s)):(Oi=t,t=s),t}()))),t}(),i!==s?(Ii=t,t=n=xt(i)):(Oi=t,t=s)):(Oi=t,t=s),t===s&&(t=function(){var t,n;return t=Oi,92===e.charCodeAt(Oi)?(n=yt,Oi++):(n=s,0===ji&&Yi(Ct)),n!==s&&Ji()!==s?(Ii=t,t=n=At()):(Oi=t,t=s),t}())),t}function as(){var t,n;return 39===e.charCodeAt(Oi)?(t=Bt,Oi++):(t=s,0===ji&&Yi(Tt)),t===s&&(34===e.charCodeAt(Oi)?(t=vt,Oi++):(t=s,0===ji&&Yi(bt)),t===s&&(92===e.charCodeAt(Oi)?(t=yt,Oi++):(t=s,0===ji&&Yi(Ct)),t===s&&(t=Oi,98===e.charCodeAt(Oi)?(n=Ft,Oi++):(n=s,0===ji&&Yi(St)),n!==s&&(Ii=t,n=Dt()),(t=n)===s&&(t=Oi,102===e.charCodeAt(Oi)?(n=Ot,Oi++):(n=s,0===ji&&Yi(It)),n!==s&&(Ii=t,n=Mt()),(t=n)===s&&(t=Oi,110===e.charCodeAt(Oi)?(n=Pt,Oi++):(n=s,0===ji&&Yi(Lt)),n!==s&&(Ii=t,n=jt()),(t=n)===s&&(t=Oi,114===e.charCodeAt(Oi)?(n=Rt,Oi++):(n=s,0===ji&&Yi(Nt)),n!==s&&(Ii=t,n=$t()),(t=n)===s&&(t=Oi,116===e.charCodeAt(Oi)?(n=Wt,Oi++):(n=s,0===ji&&Yi(zt)),n!==s&&(Ii=t,n=Ht()),(t=n)===s&&(t=Oi,118===e.charCodeAt(Oi)?(n=Xt,Oi++):(n=s,0===ji&&Yi(Yt)),n!==s&&(Ii=t,n=qt()),t=n)))))))),t}function cs(){var t,e;for(t=[],(e=Gi())===s&&(e=Ji());e!==s;)t.push(e),(e=Gi())===s&&(e=Ji());return t}function us(){var t,n,i,o,r,a;if(t=Oi,n=function(){var t,n,i,o;return(t=function(){var t,n,i;return t=Oi,n=Oi,ji++,i=function(){var t;return t=function(){var t;return t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===Ee?(n=Ee,Oi+=5):(n=s,0===ji&&Yi(ye)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===Ce?(n=Ce,Oi+=4):(n=s,0===ji&&Yi(we)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===xe?(n=xe,Oi+=5):(n=s,0===ji&&Yi(Ae)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,8)===Se?(n=Se,Oi+=8):(n=s,0===ji&&Yi(De)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,8)===Oe?(n=Oe,Oi+=8):(n=s,0===ji&&Yi(Ie)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,7)===Me?(n=Me,Oi+=7):(n=s,0===ji&&Yi(Pe)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===Le?(n=Le,Oi+=6):(n=s,0===ji&&Yi(je)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,2)===Re?(n=Re,Oi+=2):(n=s,0===ji&&Yi(Ne)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===$e?(n=$e,Oi+=4):(n=s,0===ji&&Yi(We)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,7)===Je?(n=Je,Oi+=7):(n=s,0===ji&&Yi(Ze)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,3)===Ke?(n=Ke,Oi+=3):(n=s,0===ji&&Yi(Qe)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,8)===tn?(n=tn,Oi+=8):(n=s,0===ji&&Yi(en)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,2)===nn?(n=nn,Oi+=2):(n=s,0===ji&&Yi(sn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,10)===an?(n=an,Oi+=10):(n=s,0===ji&&Yi(cn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,2)===un?(n=un,Oi+=2):(n=s,0===ji&&Yi(hn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,3)===ln?(n=ln,Oi+=3):(n=s,0===ji&&Yi(dn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===gn?(n=gn,Oi+=6):(n=s,0===ji&&Yi(mn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===bn?(n=bn,Oi+=6):(n=s,0===ji&&Yi(En)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===yn?(n=yn,Oi+=4):(n=s,0===ji&&Yi(Cn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===wn?(n=wn,Oi+=5):(n=s,0===ji&&Yi(xn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,3)===Bn?(n=Bn,Oi+=3):(n=s,0===ji&&Yi(Tn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===Fn?(n=Fn,Oi+=6):(n=s,0===ji&&Yi(Sn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,3)===Dn?(n=Dn,Oi+=3):(n=s,0===ji&&Yi(On)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===In?(n=In,Oi+=4):(n=s,0===ji&&Yi(Mn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===Pn?(n=Pn,Oi+=5):(n=s,0===ji&&Yi(Ln)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===jn?(n=jn,Oi+=4):(n=s,0===ji&&Yi(Rn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}()))))))))))))))))))))))))),t}(),t===s&&(t=function(){var t;return t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===ke?(n=ke,Oi+=5):(n=s,0===ji&&Yi(Be)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===Te?(n=Te,Oi+=5):(n=s,0===ji&&Yi(Fe)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,4)===ze?(n=ze,Oi+=4):(n=s,0===ji&&Yi(He)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===Xe?(n=Xe,Oi+=6):(n=s,0===ji&&Yi(Ye)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,7)===qe?(n=qe,Oi+=7):(n=s,0===ji&&Yi(Ve)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,6)===on?(n=on,Oi+=6):(n=s,0===ji&&Yi(rn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}(),t===s&&(t=function(){var t,n,i,o;return t=Oi,e.substr(Oi,5)===_n?(n=_n,Oi+=5):(n=s,0===ji&&Yi(vn)),n!==s?(i=Oi,ji++,o=Qi(),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?t=n=[n,i]:(Oi=t,t=s)):(Oi=t,t=s),t}())))))),t}(),t===s&&(t=ts())===s&&(t=es())),t}(),ji--,i===s?n=void 0:(Oi=n,n=s),n!==s&&(i=Zi())!==s?(Ii=t,t=n=$(i)):(Oi=t,t=s),t}())===s&&(t=function(){var t;return(t=ts())===s&&(t=es())===s&&(t=function(){var t,n,i,o;return ji++,t=Oi,n=function(){var t,n,i,o,r;if(t=Oi,(n=ns())!==s)if(46===e.charCodeAt(Oi)?(i=nt,Oi++):(i=s,0===ji&&Yi(it)),i!==s){for(o=[],r=is();r!==s;)o.push(r),r=is();o!==s?((r=ss())===s&&(r=null),r!==s?(Ii=t,t=n=st()):(Oi=t,t=s)):(Oi=t,t=s)}else Oi=t,t=s;else Oi=t,t=s;if(t===s){if(t=Oi,46===e.charCodeAt(Oi)?(n=nt,Oi++):(n=s,0===ji&&Yi(it)),n!==s){if(i=[],(o=is())!==s)for(;o!==s;)i.push(o),o=is();else i=s;i!==s?((o=ss())===s&&(o=null),o!==s?(Ii=t,t=n=st()):(Oi=t,t=s)):(Oi=t,t=s)}else Oi=t,t=s;t===s&&(t=Oi,(n=ns())!==s?((i=ss())===s&&(i=null),i!==s?(Ii=t,t=n=st()):(Oi=t,t=s)):(Oi=t,t=s))}return t}(),n!==s?(i=Oi,ji++,(o=Ki())===s&&(o=is()),ji--,o===s?i=void 0:(Oi=i,i=s),i!==s?(Ii=t,t=n=et(n)):(Oi=t,t=s)):(Oi=t,t=s),ji--,t===s&&(n=s,0===ji&&Yi(tt)),t}())===s&&(t=function(){var t,n,i,o;if(ji++,t=Oi,34===e.charCodeAt(Oi)?(n=vt,Oi++):(n=s,0===ji&&Yi(bt)),n!==s){for(i=[],o=rs();o!==s;)i.push(o),o=rs();i!==s?(34===e.charCodeAt(Oi)?(o=vt,Oi++):(o=s,0===ji&&Yi(bt)),o!==s?(Ii=t,t=n=Et(i)):(Oi=t,t=s)):(Oi=t,t=s)}else Oi=t,t=s;return ji--,t===s&&(n=s,0===ji&&Yi(_t)),t}()),t}())===s&&(t=function(){var t,n;return t=Oi,n=function(){var t,n,i,o;if(t=Oi,e.substr(Oi,2)===P?(n=P,Oi+=2):(n=s,0===ji&&Yi(L)),n!==s){if(i=[],(o=is())!==s)for(;o!==s;)i.push(o),o=is();else i=s;i!==s?(125===e.charCodeAt(Oi)?(o=j,Oi++):(o=s,0===ji&&Yi(R)),o!==s?(Ii=t,t=n=N(i)):(Oi=t,t=s)):(Oi=t,t=s)}else Oi=t,t=s;return t}(),n!==s&&(Ii=t,n=$(n)),n}())===s&&(t=Oi,40===e.charCodeAt(Oi)?(n=Nn,Oi++):(n=s,0===ji&&Yi($n)),n!==s&&cs()!==s&&(i=ys())!==s&&cs()!==s?(41===e.charCodeAt(Oi)?(o=Wn,Oi++):(o=s,0===ji&&Yi(zn)),o!==s?(Ii=t,t=n=Hn(i)):(Oi=t,t=s)):(Oi=t,t=s)),t}(),n!==s){for(i=[],o=Oi,cs()!==s?(46===e.charCodeAt(Oi)?(r=nt,Oi++):(r=s,0===ji&&Yi(it)),r!==s&&cs()!==s&&(a=Zi())!==s?(Ii=o,o=Xn(n,a)):(Oi=o,o=s)):(Oi=o,o=s);o!==s;)i.push(o),o=Oi,cs()!==s?(46===e.charCodeAt(Oi)?(r=nt,Oi++):(r=s,0===ji&&Yi(it)),r!==s&&cs()!==s&&(a=Zi())!==s?(Ii=o,o=Xn(n,a)):(Oi=o,o=s)):(Oi=o,o=s);i!==s?(Ii=t,t=n=Yn(n,i)):(Oi=t,t=s)}else Oi=t,t=s;return t}function hs(){var t,n,i;return(t=us())===s&&(t=Oi,n=function(){var t,n,i,o,r;return t=Oi,n=Oi,43===e.charCodeAt(Oi)?(i=Vn,Oi++):(i=s,0===ji&&Yi(Un)),i!==s?(o=Oi,ji++,61===e.charCodeAt(Oi)?(r=Gn,Oi++):(r=s,0===ji&&Yi(Jn)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(t=Oi,n=Oi,45===e.charCodeAt(Oi)?(i=Zn,Oi++):(i=s,0===ji&&Yi(Kn)),i!==s?(o=Oi,ji++,61===e.charCodeAt(Oi)?(r=Gn,Oi++):(r=s,0===ji&&Yi(Jn)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(33===e.charCodeAt(Oi)?(t=Qn,Oi++):(t=s,0===ji&&Yi(ti)))),t}(),n!==s&&cs()!==s&&(i=hs())!==s?(Ii=t,t=n=qn(n,i)):(Oi=t,t=s)),t}function ls(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=hs())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=ds())!==s&&(a=cs())!==s&&(c=hs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=ds())!==s&&(a=cs())!==s&&(c=hs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=ei(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function ds(){var t,n,i,o,r;return t=Oi,n=Oi,42===e.charCodeAt(Oi)?(i=ni,Oi++):(i=s,0===ji&&Yi(ii)),i!==s?(o=Oi,ji++,61===e.charCodeAt(Oi)?(r=Gn,Oi++):(r=s,0===ji&&Yi(Jn)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(t=Oi,n=Oi,47===e.charCodeAt(Oi)?(i=si,Oi++):(i=s,0===ji&&Yi(oi)),i!==s?(o=Oi,ji++,61===e.charCodeAt(Oi)?(r=Gn,Oi++):(r=s,0===ji&&Yi(Jn)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(t=Oi,n=Oi,37===e.charCodeAt(Oi)?(i=ri,Oi++):(i=s,0===ji&&Yi(ai)),i!==s?(o=Oi,ji++,61===e.charCodeAt(Oi)?(r=Gn,Oi++):(r=s,0===ji&&Yi(Jn)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),t=n!==s?e.substring(t,Oi):n)),t}function fs(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=ls())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=ps())!==s&&(a=cs())!==s&&(c=ls())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=ps())!==s&&(a=cs())!==s&&(c=ls())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=ei(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function ps(){var t,n,i,o,r;return t=Oi,n=Oi,43===e.charCodeAt(Oi)?(i=Vn,Oi++):(i=s,0===ji&&Yi(Un)),i!==s?(o=Oi,ji++,ci.test(e.charAt(Oi))?(r=e.charAt(Oi),Oi++):(r=s,0===ji&&Yi(ui)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(t=Oi,n=Oi,45===e.charCodeAt(Oi)?(i=Zn,Oi++):(i=s,0===ji&&Yi(Kn)),i!==s?(o=Oi,ji++,hi.test(e.charAt(Oi))?(r=e.charAt(Oi),Oi++):(r=s,0===ji&&Yi(li)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),t=n!==s?e.substring(t,Oi):n),t}function gs(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=fs())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=ms())!==s&&(a=cs())!==s&&(c=fs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=ms())!==s&&(a=cs())!==s&&(c=fs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=ei(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function ms(){var t,n,i,o,r;return e.substr(Oi,2)===di?(t=di,Oi+=2):(t=s,0===ji&&Yi(fi)),t===s&&(e.substr(Oi,2)===pi?(t=pi,Oi+=2):(t=s,0===ji&&Yi(gi)),t===s&&(t=Oi,n=Oi,60===e.charCodeAt(Oi)?(i=mi,Oi++):(i=s,0===ji&&Yi(_i)),i!==s?(o=Oi,ji++,60===e.charCodeAt(Oi)?(r=mi,Oi++):(r=s,0===ji&&Yi(_i)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),(t=n!==s?e.substring(t,Oi):n)===s&&(t=Oi,n=Oi,62===e.charCodeAt(Oi)?(i=vi,Oi++):(i=s,0===ji&&Yi(bi)),i!==s?(o=Oi,ji++,62===e.charCodeAt(Oi)?(r=vi,Oi++):(r=s,0===ji&&Yi(bi)),ji--,r===s?o=void 0:(Oi=o,o=s),o!==s?n=i=[i,o]:(Oi=n,n=s)):(Oi=n,n=s),t=n!==s?e.substring(t,Oi):n))),t}function _s(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=gs())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=vs())!==s&&(a=cs())!==s&&(c=gs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=vs())!==s&&(a=cs())!==s&&(c=gs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=ei(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function vs(){var t;return e.substr(Oi,2)===Ei?(t=Ei,Oi+=2):(t=s,0===ji&&Yi(yi)),t===s&&(e.substr(Oi,2)===Ci?(t=Ci,Oi+=2):(t=s,0===ji&&Yi(wi))),t}function bs(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=_s())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=Es())!==s&&(a=cs())!==s&&(c=_s())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=Es())!==s&&(a=cs())!==s&&(c=_s())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=xi(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function Es(){var t;return e.substr(Oi,2)===Ai?(t=Ai,Oi+=2):(t=s,0===ji&&Yi(ki)),t}function ys(){var t,e,n,i,o,r,a,c;if(t=Oi,(e=bs())!==s){for(n=[],i=Oi,(o=cs())!==s&&(r=Cs())!==s&&(a=cs())!==s&&(c=bs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);i!==s;)n.push(i),i=Oi,(o=cs())!==s&&(r=Cs())!==s&&(a=cs())!==s&&(c=bs())!==s?i=o=[o,r,a,c]:(Oi=i,i=s);n!==s?(Ii=t,t=e=xi(e,n)):(Oi=t,t=s)}else Oi=t,t=s;return t}function Cs(){var t;return e.substr(Oi,2)===Bi?(t=Bi,Oi+=2):(t=s,0===ji&&Yi(Ti)),t}function ws(){var t;return 59===e.charCodeAt(Oi)?(t=Si,Oi++):(t=s,0===ji&&Yi(Di)),t}if((i=r())!==s&&Oi===e.length)return i;throw i!==s&&Oi<e.length&&Yi({type:"end"}),function(e,n,i){return new t(t.buildMessage(e,n),e,n,i)}(Li,Pi<e.length?e.charAt(Pi):null,Pi<e.length?Xi(Pi,Pi+1):Xi(Pi,Pi))}}}()},251:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([t.id,"\n.wrapper{\n    width: 600px;\n    height: 600px;\n    border: 1px solid #ccc;\n}\n",""]);const a=r},902:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([t.id,".nasl-callfunction {\n    display: inline-block;\n    align-items: center;\n    border: 2px solid #E4E4E6;\n    border-radius: 4px;\n    padding: 8px 12px;\n}\n.nasl-callfunction h1 { \n    font-size: 16px;\n    margin: 0;\n}\n.nasl-callfunction-name {\n    display: inline-block;\n   margin-left: .5em;\n}\n\n.nasl-func-args-wrapper{\n    display: flex;\n    flex-direction: column;\n    min-width: fit-content;\n}\n\n.nasl-func-args {\n    display: flex;\n    align-items: center;\n}\n\n.nasl-assignment {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    gap: 10px;\n    border: 2px solid #E4E4E6;\n    border-radius: 4px;\n    padding: 8px 12px;\n}\n.nasl-ifstatement,\n.nasl-while{\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n    border: 2px solid #E4E4E6;\n    border-radius: 4px;\n    padding: 8px 12px;\n}\n.nasl-if-test{\n    display: flex;\n    flex-direction: row;\n    gap: 10px;\n}\n.nasl-block{\n    margin-left: 20px;\n}\n\n\n",""]);const a=r},724:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(81),s=n.n(i),o=n(645),r=n.n(o),a=n(667),c=n.n(a),u=new URL(n(505),n.b),h=new URL(n(24),n.b),l=r()(s()),d=c()(u),f=c()(h);l.push([t.id,"@font-face {\n    font-family: 'Monaco';\n    font-style: normal;\n    font-weight: normal;\n    src: local('Monaco'), url("+d+") format('woff');\n}\n\n/* .jeditor-container {\n    position: relative;\n    display: block;\n    border: 2px solid yellowgreen;\n} */\n/* .jeditor-content {\n    display: block;\n    min-height: 500px;\n    cursor: text;\n} */\n.jeditor-hidden-input-wrapper {\n    overflow: hidden;\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    top: 0px;\n    left: 0px;\n    display: block;\n    user-select: none;\n    opacity: 0;\n    z-index: -1;\n}\n.jeditor-hidden-input {\n    appearance: none;\n    overflow: hidden;\n    width: 200px;\n    height: 2em;\n    top: 0px;\n    left: 0px;\n    display: block;\n    position: absolute;\n}\n.jeditor-caret{\n    font-family: 'Monaco';\n    position: absolute;\n    color: green;\n    overflow: hidden;\n    width: 2px;\n    background-color: green;\n    pointer-events: none;\n    display: block;\n    top: 0px;\n    left: 0px;\n    z-index: 10;\n    /* animation: blink 1s infinite; */\n}\n\n.jeditor-range {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -1;\n}\n.jeditor-selection {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 1px;\n    height: 1px;\n    transform-origin: top left;\n    background: #B4D5FE;\n}\n@keyframes blink {\n    0% {opacity: 0}\n    49%{opacity: 0}\n    50% {opacity: 1}\n}\n\n\n\n.jeditor-content .identifier {\n    color:blue ;\n}\n.jeditor-content  .operator {\n    color: blueviolet;\n}\n.jeditor-content-wrapper {\n    display: block;\n    width: fit-content;\n    height: fit-content;\n    position: relative;\n}\n.jeditor-error-decorator{\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: -1; \n}\n\n.jeditor-error-decorator > .je-er-dec {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: -1; \n    height: 1.25em;\n    background: url("+f+") repeat-x bottom left;\n}\n\nje-container {\n    display: block;\n    width: 100%;\n    height: 100%;\n    overflow: scroll;\n    box-sizing: border-box;\n}\n\nje-content {\n    display: flex;\n    min-width: fit-content;\n    font-family: 'Monaco';\n    font-weight: normal;\n    font-size: 14px;\n    cursor: text;\n}\nje-content pre {\n    display: inline-block;\n    margin: 0;\n    font-family: 'Monaco';\n    font-weight: normal;\n    font-size: 14px;\n    cursor: text;\n}\nje-content * {\n    user-select: none;\n}\nje-edit-area {\n    display: flex;\n    flex-direction: column;\n    min-width: fit-content;\n}\nje-edit-line {\n    display: block;\n    white-space: nowrap;\n}\nje-edit-area je-edit-area {\n    display: inline-block;\n}\nje-edit-area je-edit-area.active {\n    outline: 2px solid rgba(0,0,0,0.5);\n    outline-offset: -2px;\n}\nje-edit-area je-edit-area:hover {\n    outline: 2px solid rgba(0,0,0,0.2);\n    outline-offset: -2px;\n}\nje-text-element {\n    /* white-space: pre-wrap; */\n    display: inline-block;\n    vertical-align: middle;\n    user-select: none;\n    min-width: 0.5em;\n    min-height: 1.25em;\n    margin: 0;\n    font-family: 'Monaco';\n    font-weight: normal;\n    font-size: 14px;\n    cursor: text;\n    white-space: nowrap;\n}\n\nje-composite {\n    display: inline-block;\n    vertical-align: middle;\n}\nje-composite.ensuredelete{\n    background-color: rgba(255, 0, 0, 0.37);\n}\nje-edit-line {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\nje-edit-line + je-edit-line {\n    margin-top: .25em;\n}\n\nje-autocompletion {\n    position: absolute;\n    display: none;\n    left: 0;\n    top: 0;\n    border: 1px solid #32a1ce;\n}\nje-autocompletion[active] {\n    display: block;\n}\nje-autocompletion ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    width: 300px;\n}\n\nje-autocompletion ul li{\n    display: block;\n    font-size: 14px;\n    text-align: left;\n    color: #000;\n}\nje-autocompletion ul li[active]{\n    background-color: #eee;\n}\n\n",""]);const p=l},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(r[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);i&&r[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},r=[],a=0;a<t.length;a++){var c=t[a],u=i.base?c[0]+i.base:c[0],h=o[u]||0,l="".concat(u," ").concat(h);o[u]=h+1;var d=n(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=s(f,i);i.byIndex=a,e.splice(a,0,{identifier:l,updater:p,references:1})}r.push(l)}return r}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var o=i(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var a=n(o[r]);e[a].references--}for(var c=i(t,s),u=0;u<o.length;u++){var h=n(o[u]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},938:t=>{"use strict";function e(){return n(null,[].slice.call(arguments,0))}function n(t,e){for(var n,s,o,r,a,c=e.length,u=e[0],h={},l=t&&t.equal||i,d=1;d<c;d++)for(n=e[d],o=(s=Object.keys(n)).length,a=0;a<o;a++)l(n[r=s[a]],u[r])||(h[r]=n[r]);return h}function i(t,e){return t===e}e.custom=function(t){return n(t,[].slice.call(arguments,1))},t.exports=e},505:(t,e,n)=>{"use strict";t.exports=n.p+"85644e187e88dc4513b7.woff"},24:(t,e,n)=>{"use strict";t.exports=n.p+"da46f1adab40bc6ac811.svg"}},n={};function i(t){var s=n[t];if(void 0!==s)return s.exports;var o=n[t]={id:t,exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{BaseLink:()=>Ac,BezierLink:()=>jc,Capsule:()=>mc,CapsuleGroup:()=>Gu,CapsuleVertical:()=>_c,CapsuleVerticalGroup:()=>Qu,Diamond:()=>bc,DiamondGroup:()=>Zu,DiamondVerticalGroup:()=>Ku,ERLayout:()=>Uc,Group:()=>Uu,GroupFactory:()=>fc,Icon:()=>Sc,Instance:()=>Ua,JFLOW_MODE:()=>Fa,JFlowEvent:()=>hc,LinearLayout:()=>Nc,Link:()=>Oc,Lowcodelayout:()=>Yc,Node:()=>Ga,Point:()=>pc,PointGroup:()=>th,PolyLink:()=>Pc,Rectangle:()=>gc,Rhombus:()=>vc,RhombusGroup:()=>Ju,ScrollGroup:()=>wc,ShadowDom:()=>Dc,Text:()=>Fc,TextElement:()=>Au,TextGroup:()=>Vu,commonEventAdapter:()=>xc,default:()=>nh});const n=Symbol("JEDITOR_SYMBOL"),s={EDIT_AREA:"je-edit-area",LINE:"je-edit-line",TEXT_ELEMENT:"je-text-element",COMPOSITE:"je-composite"},o="je-content",r="je-container",a="je-selection",c="je-error-decorator",u="identifier",h="number",l="operator",d="text",f="jeditorinput",p="jeditrocontrol",g="input",m="compositionstart",_="compositionupdate",v="compositionend",b="arrowLeft",E="arrowRight",y="arrowUp",C="arrowDown",w="return",x="delete",A="undo",k="redo",B="tab",T="copy",F="paste",S=function(t={}){let e,n;const i=t.tag,s=document.createElement(i);if("style"===i)return s.type="text/css",s.styleSheet?s.styleSheet.cssText=t.cssText:s.appendChild(document.createTextNode(t.cssText)),s;if(t.attributes)for(e in t.attributes)n=t.attributes[e],s.setAttribute(e,n);if(t.style)for(e in t.style)n=t.style[e],s.style[e]=n;if(t.data)for(e in t.data)n=t.data[e],s.dataset[e]=n;return t.className&&t.className.forEach((t=>{console.log(t),s.classList.add(t)})),void 0!==t.textContent&&(s.textContent=t.textContent),t.childNodes&&[].concat(t.childNodes).forEach((t=>{s.appendChild(t)})),s};function D(t,e){if(t.constructor.TYPE===e)return t;const i=t.documentElement.closest(e);return i?.[n]}function O(t,e){if(t.constructor.TYPE===e)return t;const i=t.documentElement.querySelectorAll(e);return Array.prototype.map.call(i,(t=>({instane:t?.[n],documentElement:t})))}function I(t){const e=t.documentElement.nextSibling;return e?.[n]}function M(t,e){const i=o.toUpperCase();let s=t.documentElement.parentNode;for(;s.tagName!==i;){if(s?.[n]&&e(s?.[n]))return;s=s.parentNode}}function P(t){let e=[];return M(t,(t=>{e.unshift(t)})),e}function L({targetElements:t,start:e,factor:n,condition:i,filter:s}){let o,r=e;return s&&(t=t.filter(s)),t.forEach((t=>{const e=n(t);r&&!i(e,r)||(o=t,r=e)})),o}function j(t){return(t.bottom-t.top)/2+t.top}function R(t,e){let n=[t];for(;0!==n.length;){const t=n.pop();if(e(t))return;n=n.concat(t.getChildren())}}const N=/[^\x00-\xff]/;function $(t,e,n,i,s){const o=t.substring(e,n);let r=0;for(var a=0;a<o.length;a++){const t=o.charAt(a);r+=N.test(t)?s:i}return r}function W(t,e,n,i){let s,o=0,r=0;for(;o<e&&r<t.length;){const e=t.charAt(r);s=N.test(e)?i:n,o+=s,r++}return o-e>s/2&&r--,r}function z(t,e,i,r,a){const c=o.toUpperCase(),u=s.COMPOSITE.toUpperCase(),h=s.TEXT_ELEMENT.toUpperCase(),l=s.LINE.toUpperCase();let d;for(;t&&t.tagName!==c;){if(t.tagName===u){d=s.COMPOSITE;break}if(t.tagName===h){d=s.TEXT_ELEMENT;break}if(t.tagName===l){d=s.LINE;break}t=t.parentNode}if(t&&t.tagName===c){const e=t.children[0];let o,r;for(const t of e.children){const e=t.getBoundingClientRect();if(e.y<i&&e.bottom>i){o=t;break}}return o?(R(o[n],(t=>{if(t.constructor.TYPE===s.TEXT_ELEMENT)return r=t,!0})),{textElement:r,offset:r.getLength()}):null}if(d===s.TEXT_ELEMENT){const i=t.getBoundingClientRect().x,s=t[n];return{textElement:s,offset:W(s.source,e-i,r.monospace,r.monospacedouble)}}if(d===s.LINE){const e=t[n],i=e.getChild(e.getLength()-1);return{textElement:i,offset:i.getLength()}}if(d===s.COMPOSITE){const i=t[n],s=t.getBoundingClientRect();if(e-s.x<s.width/2){const t=function(t){const e=t.documentElement.previousSibling;return e?.[n]}(i);return{textElement:t,offset:t.getLength()}}return{textElement:I(i),offset:0}}return null}function H(t){let e=[],n=t;return M(t,(t=>{const i=t.findIndex(n);e.unshift(i),n=t})),e}function X(t,e){let n=e,i=t.slice();for(;i.length;)n=n.getChild(i.shift());return n}class Y{static create(t){const e=S({tag:"span",className:["jeditor-caret"],textContent:"B"}),n=new Y;return n._editor=t,n.attach(e),n}status={_ensureDeleteComposite:null,textElement:null,offset:0};documentElement=null;_editor=null;_animate=null;attach(t){this.documentElement=t;const e={timer:null,run(){e.timer=Date.now(),function n(){requestAnimationFrame((()=>{const i=Date.now();e.timer&&(i-e.timer>500&&(e.timer=i,t.style.opacity="1"===t.style.opacity?"0":"1"),requestAnimationFrame(n))}))}()},stop(){e.timer=null},refresh(){e.timer=Date.now(),t.style.opacity=1}};this._animate=e,this._animate.run()}forward(t){this.status.offset+=t,this.update()}setOffset(t){this.status.offset=t,this.update()}setEnsureDeleteComposite(t){this.status._ensureDeleteComposite=t,t.ensureDelete()}focus(t,e=0){this._resolveFocus(t),Object.assign(this.status,{textElement:t,offset:e,_ensureDeleteComposite:null}),this.update(),this._editor.shadowInput.startEdit()}_resolveFocus(t){const e=this.status.textElement;if(e&&e!==t){const n=D(t,s.EDIT_AREA),i=D(e,s.EDIT_AREA);i&&i!==n&&i.blur(),n.focus();const o=D(t,s.COMPOSITE),r=D(e,s.COMPOSITE);r&&r!==o&&r.blur(),o&&o.focus()}this.status._ensureDeleteComposite&&this.status._ensureDeleteComposite.preventDelete()}update(){const{textElement:t,offset:e}=this.status,n=t.documentElement,{monospace:i,monospacedouble:s}=this._editor.getEditorContext(),o=window.getComputedStyle(n).fontSize,r=$(t.source,0,e,i,s),{x:a,y:c}=n.getBoundingClientRect(),u=this._editor.getContentBoundingClientRect(),h=this._editor.getContainerInnerBoundingClientRect();let l=a-u.x+r,d=c-u.y;const f=h.x-u.x;l-f>h.width&&this._editor.scrollContent(l-h.width+2,0),l-f<0&&this._editor.scrollContent(l,0),this.documentElement.style.transform=`translate(${l}px, ${d}px)`,this.documentElement.style.fontSize=o,this._animate.refresh()}saveStatus(){return{path:H(this.status.textElement),offset:this.status.offset}}restoreFromStatus(t){const e=X(t.path,this._editor.editareaRoot);this.focus(e,t.offset)}}const q=Y;class V extends EventTarget{static create(){const t=S({tag:"input",className:["jeditor-hidden-input"],attributes:{tabindex:-1,spellcheck:!1,autocorrect:"off"}}),e=S({tag:"div",className:["jeditor-hidden-input-wrapper"],attributes:{"aria-hidden":!0},childNodes:[t]}),n=new V;return n.attach(e,t),n}documentElement=null;inputElem=null;controlCallback(t,e){switch(t){case g:case m:case _:case v:this.dispatchEvent(new CustomEvent(f,{detail:{kind:t,data:e}}));break;case b:case E:case y:case C:case B:case w:case x:case A:case k:case T:case F:this.dispatchEvent(new CustomEvent(p,{detail:{kind:t}}))}}startEdit(){this.inputElem.focus({preventScroll:!0})}attach(t,e){this.documentElement=t,this.inputElem=e;const n=e;let i=!1,s={ctrlOn:!1,shiftOn:!1};const o=this.controlCallback.bind(this);n.addEventListener("beforeinput",(t=>{console.log(t.inputType),t.preventDefault(),t.data&&(i||o(g,t.data))})),n.addEventListener("input",(t=>{console.log(t.inputType)})),n.addEventListener("compositionstart",(t=>{o(m),i=!0})),n.addEventListener("compositionupdate",(t=>{o(_,t.data)})),n.addEventListener("compositionend",(t=>{o(v,t.data),n.value="",i=!1})),n.addEventListener("keyup",(t=>{switch(t.key){case"Shift":o("Shift",!1),s.shiftOn=!1;break;case"Meta":case"Control":s.ctrlOn=!1}})),n.addEventListener("keydown",(t=>{switch(t.code){case"Enter":o(w);break;case"Backspace":o(x);break;case"ArrowLeft":o(b);break;case"ArrowRight":o(E);break;case"ArrowDown":o(C);break;case"ArrowUp":o(y);break;case"Tab":t.preventDefault(),o(B)}switch(t.key){case"Shift":o("Shift",!0),s.shiftOn=!0;break;case"Meta":case"Control":s.ctrlOn=!0;break;case"a":s.ctrlOn&&o("CtrlA");break;case"x":s.ctrlOn&&o("CtrlX");break;case"y":s.ctrlOn&&(t.preventDefault(),o(k));break;case"z":s.ctrlOn&&s.shiftOn?o(k):s.ctrlOn&&o(A)}})),n.addEventListener("copy",(t=>{t.preventDefault(),o(T)})),n.addEventListener("paste",(t=>{t.preventDefault(),o(F)}))}setPosition(t,e){this.documentElement.style.transform=`translate(${t}px, ${e}px)`}}const U=V,G=class{documentElement=null;_editor=null;attach(t){this.documentElement=t,t[n]=this}insert(){}getChildren(){return[]}};function J(t,e,n,i,s){let o;void 0!==n&&(o=e[n]?.documentElement),o||(n=e.length),e.splice(n,0,i);let r=i.documentElement;s&&(r=s(i,r,n)),o?t.insertBefore(r,o):t.append(r)}function Z(t,e){return t.findIndex((t=>t===e))}function K(t,e){return t[e]}function Q(t){return t[t.length-1]}function tt(t,e,n,i,...s){const o=t[n+i],r=t.splice(n,i,...s);return r.forEach((t=>{t.documentElement.remove()})),o?s.forEach((t=>{e.insertBefore(t.documentElement,o.documentElement)})):s.forEach((t=>{e.append(t.documentElement)})),r}function et(t,e,n,i){for(void 0===i&&(i=t.length);n>=0&&n<=i&&t[n];)e(t[n]),n++}function nt(t){return document.createElement(t)}function it(t,e){Object.keys(t).forEach((n=>{if("loc"!==n){const i=t[n];e(i,t,n)&&it(i,e)}}))}class st{index=void 0;parser=void 0;freeCodes=[];_parent=void 0;constructor(t,e){this.index=t,this.parser=e}appendFreeCode(t,e){this.freeCodes.push({meta:t,code:e}),e._parent=this}parse(t,e){return this.parser((n=>{const i=n(this.freeCodes)?.code;return i?i.parse(t,e):null}))}}class ot{source="";compositesCounter=0;sourceMap=[];composites=[];structures=[];_parent=void 0;appendCode(t,e){const n=this.source.length;this.source+=t,this.sourceMap.push({start:n,end:n+t.length,path:e,type:"TEXT"})}appendComposite(t,e){const n=` @{${this.compositesCounter}} `,i=this.source.length;this.source+=n,this.compositesCounter++,this.sourceMap.push({start:i,end:i+n.length,path:e,type:"STRUCTURE"}),this.composites.push(t)}resolveStrucuture(){this.composites.forEach(((t,e)=>{const n=t.prepareParse(e);n._parent=this,this.structures.push(n)}))}parse(t,e){try{console.log("parse: ",this.source);let n=t(this.source);const i=n=>{if("Composite"!==n.type)return it(n,((n,i,s)=>{if("Composite"===n.type){const o=this.structures[n.id];if(o){const n=o.parse(t,e);i&&s&&(i[s]=n)}}else if("object"==typeof n)return!0})),n;{const i=this.structures[n.id];if(i)return i.parse(t,e)}};return n="SegmentExpression"===n.type?n.segments.map((t=>i(t))):i(n),n}catch(t){if("resolved"===t)return;const{start:n,end:i}=t.location,s=[n.offset,i.offset],o=this.sourceMap.filter((t=>t.start<=s[0]&&t.end>=s[1]));throw console.log(o,t),o.forEach((t=>{const n=t.type;"TEXT"===n&&e.errorDecorator.addDecorator({type:t.type,offset:[s[0]-t.start,s[1]-t.start],path:t.path}),"STRUCTURE"===n&&e.errorDecorator.addDecorator({type:t.type,path:t.path})})),e.errorDecorator.resolve(),"resolved"}}}class rt extends G{static create(t,e){const n=nt(s.COMPOSITE),i=new rt;return i._editor=t,i.sourceType=e,i.attach(n),i}static TYPE=s.COMPOSITE;sourceType=void 0;_areaMetaWeakMap=new WeakMap;_editareas=[];_editAreaWrapper=null;_component=null;_parser=null;getEditArea(t){return this._editareas[t]}setComponent(t){this._componentFactory=t,this._component=t();const e=this._component.initialize();this.documentElement.append(e)}setParser(t){this._parser=t}push(t,e){const n=this._editareas.length;this._editareas.splice(n,0,t),this._component.insertEditArea(t,n,e),this._areaMetaWeakMap.set(t,e)}insert(t,e,n){this._editareas.splice(e,0,t),this._component.insertEditArea(t,e,n)}getChildren(){return this._editareas}findIndex(t){return Z(this._editareas,t)}getChild(t){return K(this._editareas,t)}getLastChild(){return Q(this._editareas)}getFirstChild(){return this._editareas[0]}getLength(){return this._editareas.length}blur(){this.documentElement.classList.remove("active")}focus(){this.documentElement.classList.add("active")}ensureDelete(){this.documentElement.classList.add("ensuredelete")}preventDelete(){this.documentElement.classList.remove("ensuredelete")}serialize(){return()=>{const t=rt.create(this._editor,this.sourceType);t.setComponent(this._componentFactory),t.setParser(this._parser);const e=this._areaMetaWeakMap;return this._editareas.forEach((n=>{const i=n.serialize()(),s=e.get(n);t.push(i,s)})),t}}prepareParse(t){const e=new st(t,this._parser),n=this._areaMetaWeakMap;return console.log(n),this._editareas.forEach((t=>{const i=t.prepareParse(),s=n.get(t);e.appendFreeCode(s,i)})),e}}const at=rt;class ct extends G{static create(t,e){const n=nt(s.TEXT_ELEMENT),i=new ct;return i._editor=t,i.attach(n),e&&i.setSource(e),i}static TYPE=s.TEXT_ELEMENT;source="";setSource(t,e){const n=this._editor.lang.tokenize(t),i=this.source;this.source=t,this.documentElement.innerHTML=function(t){const e=[];return t.forEach((t=>{t.kind===d?e.push(t.content.replace(/\s/g,"&nbsp;")):e.push(`<span class="${t.kind}">${t.content}</span>`)})),console.log(e),e}(n).join(""),e&&e.push({op:"setSource",args:[this,t,i]})}getLength(){return this.source.length}serialize(){return{type:s.TEXT_ELEMENT,source:this.source}}serialize(){return()=>ct.create(this._editor,this.source)}getTokenBeforeOffset(t){const e=this.source.substring(0,t);return this._editor.lang.tokenize(e).pop()}}const ut=ct;class ht extends G{static create(t){console.log(s.EDIT_AREA);const e=nt(s.EDIT_AREA),n=new ht;return n._editor=t,n.attach(e),n}static TYPE=s.EDIT_AREA;_lines=[];push(t,e){J(this.documentElement,this._lines,void 0,t)}insert(t,e){J(this.documentElement,this._lines,e,t)}getChildren(){return this._lines}findIndex(t){return Z(this._lines,t)}getChild(t){return K(this._lines,t)}getLastChild(){return Q(this._lines)}getFirstChild(){return this._lines[0]}getLength(){return this._lines.length}splice(t,e,n,...i){const s=tt(this._lines,this.documentElement,e,n,...i);return t&&t.push({op:"splice",args:[e,n,...i],removed:s,instance:this}),s}blur(){this.documentElement.classList.remove("active")}focus(){this.documentElement.classList.add("active")}forEach(t,e=0,n){et(this._lines,t,e,n)}serialize(){return()=>{const t=ht.create(this._editor);return this._lines.forEach((e=>{const n=e.serialize()();t.push(n)})),t}}prepareParse(){const t=new ot;return this._lines.forEach(((e,n)=>{n>0&&(t.source+=";"),e.prepareParse(t)})),t.resolveStrucuture(),t}}const lt=ht;class dt extends G{static create(t){const e=nt(s.LINE),n=new dt;return n._editor=t,n.attach(e),n}static TYPE=s.LINE;_elements=[];push(t,e){J(this.documentElement,this._elements,void 0,t)}insert(t,e){J(this.documentElement,this._elements,e,t)}getChildren(){return this._elements}findIndex(t){return Z(this._elements,t)}getChild(t){return K(this._elements,t)}getLastChild(){return Q(this._elements)}getFirstChild(){return this._elements[0]}getLength(){return this._elements.length}splice(t,e,n,...i){const s=tt(this._elements,this.documentElement,e,n,...i);return t&&t.push({op:"splice",args:[e,n,...i],removed:s,instance:this}),s}slice(...t){return this._elements.slice(...t)}forEach(t,e=0,n){et(this._elements,t,e,n)}reAttachChildNode(){this.documentElement.innerHTML="",this._elements.forEach((t=>{this.documentElement.append(t.documentElement)}))}serialize(){return()=>{const t=dt.create(this._editor);return this._elements.forEach((e=>{const n=e.serialize()();t.push(n)})),t}}prepareParse(t){this._elements.forEach((e=>{e instanceof ut&&t.appendCode(e.source,H(e)),e instanceof at&&t.appendComposite(e,H(e))}))}}const ft=dt,pt=class{_stack=[];_currentTarget=null;_contextRoot=null;_rootType=void 0;constructor(){}addElement(t){const e=this._currentTarget;switch(e.type){case s.COMPOSITE:e.editareas.push(t);break;case s.EDIT_AREA:e.lines.push(t);break;case s.LINE:e.elements.push(t);break;case s.TEXT_ELEMENT:console.error("无法添加元素")}}getCurrent(){const t=this._currentTarget;switch(t.type){case s.COMPOSITE:return t.editareas[t.editareas.length-1];case s.EDIT_AREA:return t.lines[t.lines.length-1];case s.LINE:return t.elements[t.elements.length-1];case s.TEXT_ELEMENT:console.error("无法获取元素")}return null}save(){const t=this.getCurrent();this._stack.push(this._currentTarget),this._currentTarget=t}restore(){if(this._currentTarget.type===s.LINE){const t=this._currentTarget.elements;let e=t.length;if(0===e)t.push(this.createTextElementMeta());else{t[0].type!==s.TEXT_ELEMENT&&t.unshift(this.createTextElementMeta()),e=t.length,t[e-1].type!==s.TEXT_ELEMENT&&t.push(this.createTextElementMeta()),e=t.length;let n=1;const i=[t[0]];for(;n<e;){const e=t[n],o=i[i.length-1];o.type===s.TEXT_ELEMENT&&e.type===s.TEXT_ELEMENT?o.content+=e.content:i.push(e),n++}this._currentTarget.elements=i}}this._currentTarget=this._stack.pop()}createEditLineMeta(){return{type:s.LINE,elements:[]}}createTextElementMeta(t=""){return{type:s.TEXT_ELEMENT,content:t}}createEditAreaMeta(t,e,n){return{type:s.EDIT_AREA,lines:[],source:t,sourceType:e,addtional:n}}createCompositeMeta(t,e){return{type:s.COMPOSITE,editareas:[],source:t,sourceType:e}}};function gt(t,e,n){let i;switch(n(t,e),t.type){case s.COMPOSITE:i=t.editareas;break;case s.EDIT_AREA:i=t.lines;break;case s.LINE:i=t.elements;break;default:i=[]}i.forEach((e=>{gt(e,t,n)}))}function mt(t,e){const n=t._contextRoot,i=new WeakMap;return gt(n,null,((t,n)=>{let o;if(t.type===s.COMPOSITE){const n=e.lang.components.get(t.sourceType),i=e.lang.templates.get(t.sourceType)(t.source).parser;o=at.create(e,t.sourceType),o.setParser(i),o.setComponent((()=>n(t.source)))}else switch(t.type){case s.EDIT_AREA:o=lt.create(e);break;case s.LINE:o=ft.create(e);break;case s.TEXT_ELEMENT:o=ut.create(e,t.content)}if(i.set(t,o),!n)return;const r=i.get(n);o instanceof lt?r.push(o,{type:t.type,sourceType:t.sourceType,addtional:t.addtional}):r.push(o)})),i.get(n)}function _t(t){let e;return function(t,e){let n=[t];for(;0!==n.length;){const t=n.shift();if(e(t))return;n=t.getChildren().concat(n)}}(t,(t=>{if(t instanceof ut)return e=t,!0})),e}function vt(t,e){const n=(vt.canvas||(vt.canvas=document.createElement("canvas"))).getContext("2d");return n.font=e,n.measureText(t).width}class bt{title=null;put=null;test(){return!1}}const Et=class{static create(t){return new this(t)}constructor(t){this._editor=t}exec(){}};function yt(t){if(t.constructor.TYPE===s.TEXT_ELEMENT)return t;const e=O(t,s.TEXT_ELEMENT);return 0===e.length?null:1===e.length?e[0].instane:L({targetElements:e,start:-1/0,factor:t=>t.documentElement.getBoundingClientRect().right,condition:(t,e)=>t>e}).instane}console.log(b);class Ct extends Et{static name=b;exec(){this._editor.range.clear();const t=this._editor.caret,{textElement:e,offset:n}=t.status;if(n>0)return void t.focus(e,n-1);const i=D(e,s.LINE),o=i.findIndex(e);if(o>0){const e=yt(i.getChild(o-1));if(e)return void t.focus(e,e.source.length)}const r=D(i,s.EDIT_AREA),a=r.findIndex(i);if(a>0){const e=yt(r.getChild(a-1).getLastChild());if(e)return void t.focus(e,e.source.length)}const c=D(r,s.COMPOSITE);if(c){const e=c.getChildren().slice().sort(((t,e)=>{const n=t.documentElement.getBoundingClientRect(),i=e.documentElement.getBoundingClientRect();return n.top===i.top?n.left-i.left:n.top-i.top})),n=e.findIndex((t=>t===r)),i=e[n-1];if(i){const e=r.documentElement.getBoundingClientRect(),n=i.getChildren(),s=j(e),o=yt(L({targetElements:n,factor:t=>t.documentElement.getBoundingClientRect(),condition:(t,e)=>Math.abs(j(t)-s)<Math.abs(j(e)-s),filter:t=>t!==r}).getLastChild());if(o)return void t.focus(o,o.source.length)}const o=D(c,s.LINE),a=o.findIndex(c);if(a>0){const e=yt(o.getChild(a-1));if(e)return void t.focus(e,e.source.length)}}}}function wt(t){if(t.constructor.TYPE===s.TEXT_ELEMENT)return t;const e=O(t,s.TEXT_ELEMENT);return 0===e.length?null:1===e.length?e[0].instane:L({targetElements:e,start:1/0,factor:t=>t.documentElement.getBoundingClientRect().left,condition:(t,e)=>t<e}).instane}class xt extends Et{static name=E;exec(){const t=this._editor.caret;this._editor.range.clear();const{textElement:e,offset:n}=t.status;if(n<e.getLength())return void t.focus(e,n+1);const i=D(e,s.LINE),o=i.findIndex(e);if(o+1<i.getLength()){const e=wt(i.getChild(o+1));if(e)return void t.focus(e,0)}const r=D(i,s.EDIT_AREA),a=r.findIndex(i);if(a+1<r.getLength()){const e=wt(r.getChild(a+1).getFirstChild());if(e)return void t.focus(e,0)}const c=D(r,s.COMPOSITE);if(c){const e=c.getChildren().slice().sort(((t,e)=>{const n=t.documentElement.getBoundingClientRect(),i=e.documentElement.getBoundingClientRect();return n.top===i.top?n.left-i.left:n.top-i.top})),n=e.findIndex((t=>t===r)),i=e[n+1];if(i){const e=r.documentElement.getBoundingClientRect(),n=i.getChildren(),s=j(e),o=wt(L({targetElements:n,factor:t=>t.documentElement.getBoundingClientRect(),condition:(t,e)=>Math.abs(j(t)-s)<Math.abs(j(e)-s),filter:t=>t!==r}).getFirstChild());if(o)return void t.focus(o,0)}const o=D(c,s.LINE),a=o.findIndex(c);if(a+1<o.getLength()){const e=wt(o.getChild(a+1));if(e)return void t.focus(e,0)}}}}class At extends Et{static name=y;exec(){if(this._editor.autocompletion.isActive)return void this._editor.autocompletion.up();this._editor.range.clear();const t=this._editor.caret,{textElement:e,offset:i}=t.status,o=e.documentElement.getBoundingClientRect(),r=j(o),a=this._editor.contentElement.querySelectorAll(s.TEXT_ELEMENT);let c=0;const u=a.length;let h,l,d,f=1/0;for(;c<u;){const t=a[c];h=j(t.getBoundingClientRect()),h<r&&(l=r-h)<=f&&(f=l,d=t),c++}if(d){const e=d[n],{monospace:s,monospacedouble:r}=this._editor.getEditorContext(),a=$(e.source,0,i,s,r),c=o.left+a,u=d.getBoundingClientRect();if(c<u.left)return void t.focus(e,0);if(c>u.right)return void t.focus(e,e.getLength());const h=W(e.source,c-u.left,s,r);t.focus(e,h)}}}class kt extends Et{static name=C;exec(){if(this._editor.autocompletion.isActive)return void this._editor.autocompletion.up();const t=this._editor.caret;this._editor.range.clear();const{textElement:e,offset:i}=t.status,o=e.documentElement.getBoundingClientRect(),r=j(o),a=this._editor.contentElement.querySelectorAll(s.TEXT_ELEMENT);let c=0;const u=a.length;let h,l,d,f=1/0;for(;c<u;){const t=a[c];h=j(t.getBoundingClientRect()),h>r&&(l=h-r)<=f&&(f=l,d=t),c++}if(d){const e=d[n],{monospace:s,monospacedouble:r}=this._editor.getEditorContext(),a=$(e.source,0,i,s,r),c=o.left+a,u=d.getBoundingClientRect();if(c<u.left)return void t.focus(e,0);if(c>u.right)return void t.focus(e,e.getLength());const h=W(e.source,c-u.left,s,r);t.focus(e,h)}}}class Bt extends Et{static name=B;exec(){const t=this._editor,e=this._editor.caret,n=this._editor.range,{textElement:i}=e.status,o=D(i,s.COMPOSITE);if(o){const e=D(i,s.EDIT_AREA),r=o.getChildren().slice().sort(((t,e)=>{const n=t.documentElement.getBoundingClientRect(),i=e.documentElement.getBoundingClientRect();return n.top===i.top?n.left-i.left:n.top-i.top})),a=r.findIndex((t=>t===e)),c=r[(a+1)%r.length];if(c){const e=_t(c),i=function(t){let e;return R(t,(t=>{if(t instanceof ut)return e=t,!0})),e}(c);n.clear(),n.setInitialBoundary({textElement:e,offset:0}),n.setCurrentBoundary({textElement:i,offset:i.getLength()}),t.resolveRange(),t.caret.focus(i,i.getLength())}}}}function Tt(t){return 1===t.length&&"setSource"===t[0].op}class Ft{static length=50;_undo=[];_redo=[];_editor=null;write(t){if(0!==t._batch.length){if(Tt(t._batch)){const e=t._batch[0],n=this.getLastUndo();if(n&&Tt(n._batch)){const i=n._batch[0];if(i.args[0]===e.args[0])return i.args[1]=e.args[1],void(n._caretMetaTo=t._caretMetaTo)}}this._undo.push(t),this._undo.length>Ft.length&&this._undo.splice(0,1),this._redo.length&&(this._redo=[])}}getLastUndo(){return this._undo[this._undo.length-1]}undo(){const t=this._undo.pop();return t&&(t.undo(this._editor),this._redo.push(t)),t}redo(){let t=this._redo.pop();for(;t&&t.SKIP_REDO;)t=this._redo.pop();return t&&(t.redo(this._editor),this._undo.push(t)),t}}class St{_batch=[];_caretMetaFrom=null;_caretMetaTo=null;updateCaretMetaTo(t){this._caretMetaTo=t}push(t){this._batch.push(t)}recordBeforeCaret(t){this._caretMetaFrom=t.saveStatus()}recordAfterCaret(t){this._caretMetaTo=t.saveStatus()}undo(t){t.range.clear(),this._batch.slice().reverse().forEach((e=>{switch(e.op){case"range":t.range.restoreBoundary(e.args),t.resolveRange();break;case"setSource":const[n,i,s]=e.args;n.setSource(s);break;case"splice":const o=e.instance,[r,a,...c]=e.args,u=e.removed;let h=0;c&&(h=c.length),o.splice(null,r,h,...u)}})),t.caret.restoreFromStatus(this._caretMetaFrom)}redo(t){t.range.clear(),this._batch.forEach((t=>{switch(t.op){case"setSource":const[e,n,i]=t.args;e.setSource(n);break;case"splice":t.instance.splice(null,...t.args)}})),t.caret.restoreFromStatus(this._caretMetaTo)}}class Dt extends Et{static name=w;exec(){const t=this._editor,e=t.caret,n=t.undoredo,{textElement:i,offset:o}=e.status,r=new St;if(r.recordBeforeCaret(e),t.autocompletion.isActive){const a=t.autocompletion.select().put(t),c=this._editor.lang._lastToken.content.length,u=D(i,s.LINE),h=u.findIndex(i),l=i.source,d=l.substring(0,o-c),f=l.substring(o);i.setSource(d,r);const p=ut.create(t,f);u.splice(r,h+1,0,a,p);const g=_t(a);return t.range.clear(),t.caret.focus(g),t.autocompletion.replaceItems([]),r.recordAfterCaret(e),void n.write(r)}const a=D(i,s.LINE),c=D(a,s.EDIT_AREA),u=c.findIndex(a),h=i.source,l=h.substring(0,o),d=h.substring(o);i.setSource(l,r);const f=ut.create(t,d),p=ft.create(t),g=a.findIndex(i)+1,m=a.splice(r,g,a.getLength()-g);p.splice(r,0,0,f,...m),c.splice(r,u+1,0,p),t.range.clear(),t.caret.focus(f),r.recordAfterCaret(e),n.write(r)}}class Ot extends Et{static name=x;deleteSelection(){const t=this._editor,e=t.range,n=t.undoredo,i=e.getSelections(),s=t.caret;if(i.length>0){const t=new St;t.recordBeforeCaret(s);const[i,o]=e._delete(t);return s.focus(i,o),e.clear(),t.recordAfterCaret(s),n.write(t),!0}}exec(){if(this.deleteSelection())return;const t=this._editor,e=t.caret,n=t.undoredo,{textElement:i,offset:o}=e.status,r=new St;r.recordBeforeCaret(e);const a=D(i,s.LINE),c=i.source,u=c.substring(0,o),h=c.substring(o);if(o>0){i.setSource(u.substring(0,u.length-1)+h,r);const t=o-1;return e.focus(i,t),r.recordAfterCaret(e),void n.write(r)}const l=a.findIndex(i);if(l>0){a.getChild(l-1);const t=a.getChild(l-2),i=l-1,s=t.source.length;return t.setSource(t.source+h,r),a.splice(r,i,2),e.focus(t,s),r.recordAfterCaret(e),void n.write(r)}const d=D(a,s.EDIT_AREA),f=d.findIndex(a);if(f>0){const t=d.getChild(f-1),i=t.getLastChild();if(!i instanceof ut)throw"line not end with textelement!";d.splice(r,f,1);const s=a.slice(1),o=i.source.length;return h&&i.setSource(i.source+h),s.length>0&&t.splice(r,t.getLength(),0,...s),e.focus(i,o),r.recordAfterCaret(e),void n.write(r)}}}class It extends Et{static name=A;exec(){this._editor.undoredo.undo()}}class Mt extends Et{static name=k;exec(){this._editor.undoredo.redo()}}const Pt={payload:void 0};class Lt extends Et{static name=T;exec(){const t=this._editor,e=t.range.getSelections();if(e.length>0){const n=[];e.forEach((e=>{if(e.type===s.COMPOSITE&&n.push(e.scope.serialize()),e.type===s.TEXT_ELEMENT){const i=e.scope.source.substring(...e.offset);n.push((()=>ut.create(t,i)))}})),console.log(n),function(t){Pt.payload=t}(n)}}}class jt extends Et{static name=F;exec(){if(!Pt.payload)return;const t=this._editor,e=t.undoredo,n=t.caret,i=t.range,o=new St;if(o.recordBeforeCaret(n),i.getSelections().length>0){const[t,e]=i._delete(o);n.focus(t,e),i.clear()}const{textElement:r,offset:a}=n.status,c=r.source,u=c.substring(0,a),h=c.substring(a),l=Pt.payload,d=l[0]();r.setSource(u+d.source,o);let f=D(r,s.LINE);const p=D(f,s.EDIT_AREA);let g=f.findIndex(r);const m=f.slice(g+1);let _=p.findIndex(f),v=0;l.slice(1).forEach((e=>{const n=e();if(n instanceof ut){if(v++,2===v){const e=ft.create(t);p.splice(o,_+1,0,e),f=e,g=-1,_++}}else v=0;f.splice(o,g+1,0,n),g++}));const b=f.getLastChild(),E=b.getLength();b.setSource(b.source+h,o),f.splice(o,g+1,0,...m),n.focus(b,E),o.recordAfterCaret(n),e.write(o)}}class Rt{composite_cache=null;_editor=null;handle(t,e){const n=this._editor,i=n.caret,s=n.range,o=new St;if(o.recordBeforeCaret(i),s.getSelections().length>0){const[t,e]=s._delete(o);i.focus(t,e),s.clear()}const{textElement:r,offset:a}=i.status,c=r.source;let u,h=c.substring(0,a);switch(u=this.composite_cache?c.substring(this.composite_cache[1]):c.substring(a),t){case g:h+=e,r.setSource(h+u,o),i.forward(e.length);break;case m:this.composite_cache=[h.length,h.length];break;case _:h=h.substring(0,this.composite_cache[0]),h+=e,this.composite_cache[1]=this.composite_cache[0]+e.length,r.setSource(h+u),i.setOffset(this.composite_cache[1]);break;case v:h=h.substring(0,this.composite_cache[0]),r.setSource(h+e+u,o),i.setOffset(this.composite_cache[0]+e.length),this.composite_cache=null}o.recordAfterCaret(i),n.undoredo.write(o)}}class Nt{static create(t){const e=S({tag:"je-range",className:["jeditor-range"]}),n=new Nt;return n._editor=t,n.attach(e),n}static renderSelections(t,e,n){const i=[];return t.forEach((t=>{const o=t.scope,r=o.documentElement.getBoundingClientRect();switch(t.type){case s.TEXT_ELEMENT:const[c,u]=t.offset,[h,l]=function(t,e,n,i,s){let o=0,r=0,a=0;for(;o<t.length&&o<n;){const n=t.charAt(o),c=N.test(n)?s:i;o<e?a+=c:r+=c,o++}return[a,r]}(o.source,c,u,e.monospace,e.monospacedouble);i.push(S({tag:a,className:["jeditor-selection"],style:{transform:`matrix(${l}, 0, 0, ${r.height}, ${r.x+h-n.x}, ${r.y-n.y})`}}));break;case s.COMPOSITE:i.push(S({tag:a,className:["jeditor-selection"],style:{transform:`matrix(${r.width}, 0, 0, ${r.height}, ${r.x-n.x}, ${r.y-n.y})`}}))}})),i}_editor=null;_selections=[];initialBoundary=null;currentBoundary=null;attach(t){this.documentElement=t}render(t){this.documentElement.innerHTML="",this.documentElement.append(...t)}clear(){this.documentElement.innerHTML="",this._selections=[],this.initialBoundary=null,this.currentBoundary=null}setInitialBoundary(t){this.initialBoundary=t}setCurrentBoundary(t){this.currentBoundary=t}setSelections(t){this._selections=t}getSelections(){return this._selections}resolveRange(t,e){const n=this._resolveRange();this._selections=n;const i=Nt.renderSelections(n,t,e);this.render(i)}_resolveRange(){const{textElement:t,offset:e}=this.initialBoundary,{textElement:n,offset:i}=this.currentBoundary;if(t===n)return[{scope:n,type:s.TEXT_ELEMENT,offset:[Math.min(e,i),Math.max(e,i)]}];const{coparent:o,a_idx:r,b_idx:a,_a:c,_b:u}=function(t,e){const n=P(t);n.push(t);const i=P(e);let o,r,a;if(i.push(e),n.length<i.length)for(o=n.length-1;o>=0;){const t=n[o];if(r=i.indexOf(t),-1!==r){a=t;break}o--}else for(r=i.length-1;r>=0;){const t=i[r];if(o=n.indexOf(t),-1!==o){a=t;break}r--}return{editarea:D(a,s.EDIT_AREA),coparent:a,a_idx:o+1,b_idx:r+1,_a:n,_b:i}}(t,n);if(console.log(o),o.constructor.TYPE===s.LINE){const t=c[r],n=u[a],s=o.findIndex(t),h=o.findIndex(n),l=[];return s<h?Wt({i1:t,init_coparent_idx:s,initOffset:e},{i2:n,curr_coparent_idx:h,currentOffset:i},o,l):Wt({i1:n,init_coparent_idx:h,initOffset:i},{i2:t,curr_coparent_idx:s,currentOffset:e},o,l),l}if(o.constructor.TYPE===s.EDIT_AREA){const t=c[r],n=u[a],s=o.findIndex(t),h=o.findIndex(n),l=[];return s<h?zt({_a:c,_a_idx:r,la:t,init_coparent_idx:s,initOffset:e},{_b:u,_b_idx:a,lb:n,curr_coparent_idx:h,currentOffset:i},o,l):zt({_a:u,_a_idx:a,la:n,init_coparent_idx:h,initOffset:i},{_b:c,_b_idx:r,lb:t,curr_coparent_idx:s,currentOffset:e},o,l),console.log(l),l}return[]}_saveBoundary(){return[{path:H(this.initialBoundary.textElement),offset:this.initialBoundary.offset},{path:H(this.currentBoundary.textElement),offset:this.currentBoundary.offset}]}restoreBoundary(t){const e=this._editor.editareaRoot,[n,i]=t;this.initialBoundary={textElement:X(n.path,e),offset:n.offset},this.currentBoundary={textElement:X(i.path,e),offset:i.offset}}_delete(t){const e=this._selections,n=e[0],i=e[e.length-1],o=n.scope,r=i.scope,[a,c]=n.offset;if(t.push({op:"range",args:this._saveBoundary()}),1===e.length)return o.setSource(o.source.substring(0,a)+n.scope.source.substring(c),t),[o,a];const u=D(o,s.LINE),h=D(r,s.LINE),l=u.findIndex(o),d=h.findIndex(r),f=o.source.substring(0,a),p=r.source.substring(i.offset[1]);if(u===h)return o.setSource(f+p,t),u.splice(t,l+1,d-l),[o,a];const g=D(o,s.EDIT_AREA),m=g.findIndex(u),_=g.findIndex(h),v=u.getLength(),b=h.slice(d+1);return o.setSource(f+p,t),u.splice(t,l+1,v-l,...b),g.splice(t,m+1,_-m),[o,a]}}function $t(t,e=0,n=!0){return t.constructor.TYPE===s.COMPOSITE?{scope:t,type:s.COMPOSITE}:{scope:t,type:s.TEXT_ELEMENT,offset:n?[e,t.getLength()]:[0,e]}}function Wt({i1:t,init_coparent_idx:e,initOffset:n},{i2:i,curr_coparent_idx:o,currentOffset:r},a,c){if(t.constructor.TYPE===s.COMPOSITE){const t=a.getChild(e-1);c.push($t(t,t.getLength()))}if(c.push($t(t,n,!0)),a.forEach((t=>{c.push($t(t))}),e+1,o-1),c.push($t(i,r,!1)),i.constructor.TYPE===s.COMPOSITE){const t=a.getChild(o+1);c.push($t(t,0))}}function zt({_a:t,_a_idx:e,la:n,init_coparent_idx:i,initOffset:o},{_b:r,_b_idx:a,lb:c,curr_coparent_idx:u,currentOffset:h},l,d){const f=t[e+1];if(f.constructor.TYPE===s.COMPOSITE){const n=t[e],i=n.findIndex(f),s=n.getChild(i-1);d.push($t(s,s.getLength()))}d.push($t(f,o,!0));const p=n.findIndex(f)+1;n.forEach((t=>{d.push($t(t))}),p),l.forEach((t=>{t.forEach((t=>{d.push($t(t))}))}),i+1,u-1);const g=r[a+1],m=c.findIndex(g)-1;if(c.forEach((t=>{d.push($t(t))}),0,m),d.push($t(g,h,!1)),g.constructor.TYPE===s.COMPOSITE){const t=r[a],e=t.findIndex(f),n=t.getChild(e+1);d.push($t(n,0,!1))}}const Ht=Nt;class Xt{static create(t){const e=S({tag:"je-autocompletion",className:["jeditor-autocompletion"]}),n=new Xt;return n._editor=t,n.attach(e),n}attach(t){this.documentElement=t,this.ul=S({tag:"ul"}),this.documentElement.append(this.ul)}_active=0;_show=!1;liElems=[];replaceItems(t){if(0===t.length)this.documentElement.removeAttribute("active"),this._show=!1;else{this.documentElement.setAttribute("active",!0),this._show=!0;const e=this.ul;this.liElems.length>t.length&&(this.liElems.length=t.length,e.replaceChildren(...Array.prototype.slice.call(e.children,0,t.length))),this.liElems.forEach(((e,n)=>{const i=t[n];e.element.innerText=i.title,e.completion=i}));let n=this.liElems.length;t.slice(n,t.length).forEach((t=>{const n=S({tag:"li",className:["jEditor-Suggestion-Item"]});n.innerText=t.title,this.liElems.push({element:n,completion:t}),e.append(n)}));const i=this._editor.caret.documentElement,s=this._editor.getContainerInnerBoundingClientRect(),{x:o,y:r,height:a}=i.getBoundingClientRect();this.documentElement.style.transform=`translate(${o-s.x}px, ${r-s.y+a}px)`}this.active(0)}active(t){this._active=t;const e=this.ul.querySelector("[active]"),n=this.ul.children.item(t);e&&e.removeAttribute("active"),n&&n.setAttribute("active",!0)}up(){const t=this.liElems.length;let e=this._active-1;e=(e<0?t+e:e)%t,this.active(e)}down(){const t=this.liElems.length,e=(this._active+1)%t;this.active(e)}get isActive(){return this._show}clean(){this.ul.innerHTML=""}select(){if(this.isActive)return this.liElems[this._active].completion}}const Yt=Xt;class qt{static create(t){const e=S({tag:c,className:["jeditor-error-decorator"]}),n=new qt;return n._editor=t,n.attach(e),n}_decorators=[];attach(t){this.documentElement=t}clear(){this.documentElement.innerHTML="",this._decorators=[]}addDecorator(t){this._decorators.push(t)}resolve(){const t=this._editor,{monospace:e,monospacedouble:n}=t.getEditorContext(),i=this.documentElement.getBoundingClientRect(),s=[];console.log(this._decorators),this._decorators.forEach((o=>{if("TEXT"===o.type){const{offset:r,path:a}=o,[c,u]=r,h=X(a,t.editareaRoot),l=$(h.source,0,c,e,n),d=Math.max($(h.source,c,u,e,n),5),f=h.documentElement.getBoundingClientRect(),p=[f.x-i.x+l,f.y-i.y];console.log(p),s.push({point:p,width:d,style:`height: 1.25em;width: ${d}px; transform: translate(${p[0]}px, ${p[1]}px)`})}if("STRUCTURE"===o.type){const e=X(o.path,t.editareaRoot).documentElement.getBoundingClientRect(),n=[e.x-i.x,e.bottom-i.y];console.log(n),s.push({point:n,width:e.width,style:`height: 2px;width: ${e.width}px; transform: translate(${n[0]}px, ${n[1]}px)`})}})),this.render(s)}render(t){const e=this.documentElement;t.forEach(((t,n)=>{const{point:i,width:s,style:o}=t;let r=e.childNodes[n];r||(r=S({tag:"div",className:["je-er-dec"]}),e.append(r)),r.style=o})),e.childNodes.length>t.length&&Array.prototype.slice.call(e.childNodes,t.length).forEach((t=>{t.remove()}))}}customElements.define(s.EDIT_AREA,class extends HTMLParagraphElement{},{extends:"p"}),customElements.define(s.LINE,class extends HTMLParagraphElement{},{extends:"p"}),customElements.define(s.TEXT_ELEMENT,class extends HTMLPreElement{},{extends:"pre"}),customElements.define(s.COMPOSITE,class extends HTMLDivElement{},{extends:"div"}),customElements.define(r,class extends HTMLDivElement{},{extends:"div"}),customElements.define(o,class extends HTMLDivElement{},{extends:"div"}),customElements.define(c,class extends HTMLDivElement{},{extends:"div"});var Vt=Object.freeze({}),Ut=Array.isArray;function Gt(t){return null==t}function Jt(t){return null!=t}function Zt(t){return!0===t}function Kt(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function Qt(t){return"function"==typeof t}function te(t){return null!==t&&"object"==typeof t}var ee=Object.prototype.toString;function ne(t){return"[object Object]"===ee.call(t)}function ie(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function se(t){return Jt(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function oe(t){return null==t?"":Array.isArray(t)||ne(t)&&t.toString===ee?JSON.stringify(t,null,2):String(t)}function re(t){var e=parseFloat(t);return isNaN(e)?t:e}function ae(t,e){for(var n=Object.create(null),i=t.split(","),s=0;s<i.length;s++)n[i[s]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}ae("slot,component",!0);var ce=ae("key,ref,slot,slot-scope,is");function ue(t,e){var n=t.length;if(n){if(e===t[n-1])return void(t.length=n-1);var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}var he=Object.prototype.hasOwnProperty;function le(t,e){return he.call(t,e)}function de(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var fe=/-(\w)/g,pe=de((function(t){return t.replace(fe,(function(t,e){return e?e.toUpperCase():""}))})),ge=de((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),me=/\B([A-Z])/g,_e=de((function(t){return t.replace(me,"-$1").toLowerCase()})),ve=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function be(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function Ee(t,e){for(var n in e)t[n]=e[n];return t}function ye(t){for(var e={},n=0;n<t.length;n++)t[n]&&Ee(e,t[n]);return e}function Ce(t,e,n){}var we=function(t,e,n){return!1},xe=function(t){return t};function Ae(t,e){if(t===e)return!0;var n=te(t),i=te(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var s=Array.isArray(t),o=Array.isArray(e);if(s&&o)return t.length===e.length&&t.every((function(t,n){return Ae(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||o)return!1;var r=Object.keys(t),a=Object.keys(e);return r.length===a.length&&r.every((function(n){return Ae(t[n],e[n])}))}catch(t){return!1}}function ke(t,e){for(var n=0;n<t.length;n++)if(Ae(t[n],e))return n;return-1}function Be(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var Te="data-server-rendered",Fe=["component","directive","filter"],Se=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],De={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:we,isReservedAttr:we,isUnknownElement:we,getTagNamespace:Ce,parsePlatformTagName:xe,mustUseProp:we,async:!0,_lifecycleHooks:Se};function Oe(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function Ie(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var Me=new RegExp("[^".concat(/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source,".$_\\d]")),Pe="__proto__"in{},Le="undefined"!=typeof window,je=Le&&window.navigator.userAgent.toLowerCase(),Re=je&&/msie|trident/.test(je),Ne=je&&je.indexOf("msie 9.0")>0,$e=je&&je.indexOf("edge/")>0;je&&je.indexOf("android");var We=je&&/iphone|ipad|ipod|ios/.test(je);je&&/chrome\/\d+/.test(je),je&&/phantomjs/.test(je);var ze,He=je&&je.match(/firefox\/(\d+)/),Xe={}.watch,Ye=!1;if(Le)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Ye=!0}}),window.addEventListener("test-passive",null,qe)}catch(t){}var Ve=function(){return void 0===ze&&(ze=!Le&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),ze},Ue=Le&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function Ge(t){return"function"==typeof t&&/native code/.test(t.toString())}var Je,Ze="undefined"!=typeof Symbol&&Ge(Symbol)&&"undefined"!=typeof Reflect&&Ge(Reflect.ownKeys);Je="undefined"!=typeof Set&&Ge(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var Ke=null;function Qe(t){void 0===t&&(t=null),t||Ke&&Ke._scope.off(),Ke=t,t&&t._scope.on()}var tn=function(){function t(t,e,n,i,s,o,r,a){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=s,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=r,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),en=function(t){void 0===t&&(t="");var e=new tn;return e.text=t,e.isComment=!0,e};function nn(t){return new tn(void 0,void 0,void 0,String(t))}function sn(t){var e=new tn(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var on=0,rn=[],an=function(){for(var t=0;t<rn.length;t++){var e=rn[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}rn.length=0},cn=function(){function t(){this._pending=!1,this.id=on++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,rn.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){for(var e=this.subs.filter((function(t){return t})),n=0,i=e.length;n<i;n++)e[n].update()},t}();cn.target=null;var un=[];function hn(t){un.push(t),cn.target=t}function ln(){un.pop(),cn.target=un[un.length-1]}var dn=Array.prototype,fn=Object.create(dn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=dn[t];Ie(fn,t,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s,o=e.apply(this,n),r=this.__ob__;switch(t){case"push":case"unshift":s=n;break;case"splice":s=n.slice(2)}return s&&r.observeArray(s),r.dep.notify(),o}))}));var pn=Object.getOwnPropertyNames(fn),gn={},mn=!0;function _n(t){mn=t}var vn={notify:Ce,depend:Ce,addSub:Ce,removeSub:Ce},bn=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.value=t,this.shallow=e,this.mock=n,this.dep=n?vn:new cn,this.vmCount=0,Ie(t,"__ob__",this),Ut(t)){if(!n)if(Pe)t.__proto__=fn;else for(var i=0,s=pn.length;i<s;i++)Ie(t,r=pn[i],fn[r]);e||this.observeArray(t)}else{var o=Object.keys(t);for(i=0;i<o.length;i++){var r;yn(t,r=o[i],gn,void 0,e,n)}}}return t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)En(t[e],!1,this.mock)},t}();function En(t,e,n){return t&&le(t,"__ob__")&&t.__ob__ instanceof bn?t.__ob__:!mn||!n&&Ve()||!Ut(t)&&!ne(t)||!Object.isExtensible(t)||t.__v_skip||Bn(t)||t instanceof tn?void 0:new bn(t,e,n)}function yn(t,e,n,i,s,o){var r=new cn,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var c=a&&a.get,u=a&&a.set;c&&!u||n!==gn&&2!==arguments.length||(n=t[e]);var h=!s&&En(n,!1,o);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(t):n;return cn.target&&(r.depend(),h&&(h.dep.depend(),Ut(e)&&xn(e))),Bn(e)&&!s?e.value:e},set:function(e){var i,a,l=c?c.call(t):n;if((i=l)===(a=e)?0===i&&1/i!=1/a:i==i||a==a){if(u)u.call(t,e);else{if(c)return;if(!s&&Bn(l)&&!Bn(e))return void(l.value=e);n=e}h=!s&&En(e,!1,o),r.notify()}}}),r}}function Cn(t,e,n){if(!kn(t)){var i=t.__ob__;return Ut(t)&&ie(e)?(t.length=Math.max(t.length,e),t.splice(e,1,n),i&&!i.shallow&&i.mock&&En(n,!1,!0),n):e in t&&!(e in Object.prototype)?(t[e]=n,n):t._isVue||i&&i.vmCount?n:i?(yn(i.value,e,n,void 0,i.shallow,i.mock),i.dep.notify(),n):(t[e]=n,n)}}function wn(t,e){if(Ut(t)&&ie(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||kn(t)||le(t,e)&&(delete t[e],n&&n.dep.notify())}}function xn(t){for(var e=void 0,n=0,i=t.length;n<i;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Ut(e)&&xn(e)}function An(t){return function(t,e){kn(t)||En(t,e,Ve())}(t,!0),Ie(t,"__v_isShallow",!0),t}function kn(t){return!(!t||!t.__v_isReadonly)}function Bn(t){return!(!t||!0!==t.__v_isRef)}function Tn(t,e,n){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];if(Bn(t))return t.value;var i=t&&t.__ob__;return i&&i.dep.depend(),t},set:function(t){var i=e[n];Bn(i)&&!Bn(t)?i.value=t:e[n]=t}})}var Fn,Sn="watcher";"".concat(Sn," callback"),"".concat(Sn," getter"),"".concat(Sn," cleanup");var Dn=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Fn,!t&&Fn&&(this.index=(Fn.scopes||(Fn.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=Fn;try{return Fn=this,t()}finally{Fn=e}}},t.prototype.on=function(){Fn=this},t.prototype.off=function(){Fn=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,n=void 0;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].teardown();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},t}();var On=de((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}}));function In(t,e){function n(){var t=n.fns;if(!Ut(t))return vi(t,null,arguments,e,"v-on handler");for(var i=t.slice(),s=0;s<i.length;s++)vi(i[s],null,arguments,e,"v-on handler")}return n.fns=t,n}function Mn(t,e,n,i,s,o){var r,a,c,u;for(r in t)a=t[r],c=e[r],u=On(r),Gt(a)||(Gt(c)?(Gt(a.fns)&&(a=t[r]=In(a,o)),Zt(u.once)&&(a=t[r]=s(u.name,a,u.capture)),n(u.name,a,u.capture,u.passive,u.params)):a!==c&&(c.fns=a,t[r]=c));for(r in e)Gt(t[r])&&i((u=On(r)).name,e[r],u.capture)}function Pn(t,e,n){var i;t instanceof tn&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function o(){n.apply(this,arguments),ue(i.fns,o)}Gt(s)?i=In([o]):Jt(s.fns)&&Zt(s.merged)?(i=s).fns.push(o):i=In([s,o]),i.merged=!0,t[e]=i}function Ln(t,e,n,i,s){if(Jt(e)){if(le(e,n))return t[n]=e[n],s||delete e[n],!0;if(le(e,i))return t[n]=e[i],s||delete e[i],!0}return!1}function jn(t){return Kt(t)?[nn(t)]:Ut(t)?Nn(t):void 0}function Rn(t){return Jt(t)&&Jt(t.text)&&!1===t.isComment}function Nn(t,e){var n,i,s,o,r=[];for(n=0;n<t.length;n++)Gt(i=t[n])||"boolean"==typeof i||(o=r[s=r.length-1],Ut(i)?i.length>0&&(Rn((i=Nn(i,"".concat(e||"","_").concat(n)))[0])&&Rn(o)&&(r[s]=nn(o.text+i[0].text),i.shift()),r.push.apply(r,i)):Kt(i)?Rn(o)?r[s]=nn(o.text+i):""!==i&&r.push(nn(i)):Rn(i)&&Rn(o)?r[s]=nn(o.text+i.text):(Zt(t._isVList)&&Jt(i.tag)&&Gt(i.key)&&Jt(e)&&(i.key="__vlist".concat(e,"_").concat(n,"__")),r.push(i)));return r}function $n(t,e){var n,i,s,o,r=null;if(Ut(t)||"string"==typeof t)for(r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=e(t[n],n);else if("number"==typeof t)for(r=new Array(t),n=0;n<t;n++)r[n]=e(n+1,n);else if(te(t))if(Ze&&t[Symbol.iterator]){r=[];for(var a=t[Symbol.iterator](),c=a.next();!c.done;)r.push(e(c.value,r.length)),c=a.next()}else for(s=Object.keys(t),r=new Array(s.length),n=0,i=s.length;n<i;n++)o=s[n],r[n]=e(t[o],o,n);return Jt(r)||(r=[]),r._isVList=!0,r}function Wn(t,e,n,i){var s,o=this.$scopedSlots[t];o?(n=n||{},i&&(n=Ee(Ee({},i),n)),s=o(n)||(Qt(e)?e():e)):s=this.$slots[t]||(Qt(e)?e():e);var r=n&&n.slot;return r?this.$createElement("template",{slot:r},s):s}function zn(t){return Cs(this.$options,"filters",t)||xe}function Hn(t,e){return Ut(t)?-1===t.indexOf(e):t!==e}function Xn(t,e,n,i,s){var o=De.keyCodes[e]||n;return s&&i&&!De.keyCodes[e]?Hn(s,i):o?Hn(o,t):i?_e(i)!==e:void 0===t}function Yn(t,e,n,i,s){if(n&&te(n)){Ut(n)&&(n=ye(n));var o=void 0,r=function(r){if("class"===r||"style"===r||ce(r))o=t;else{var a=t.attrs&&t.attrs.type;o=i||De.mustUseProp(e,a,r)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=pe(r),u=_e(r);c in o||u in o||(o[r]=n[r],s&&((t.on||(t.on={}))["update:".concat(r)]=function(t){n[r]=t}))};for(var a in n)r(a)}return t}function qn(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e||Un(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),"__static__".concat(t),!1),i}function Vn(t,e,n){return Un(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function Un(t,e,n){if(Ut(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Gn(t[i],"".concat(e,"_").concat(i),n);else Gn(t,e,n)}function Gn(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Jn(t,e){if(e&&ne(e)){var n=t.on=t.on?Ee({},t.on):{};for(var i in e){var s=n[i],o=e[i];n[i]=s?[].concat(s,o):o}}return t}function Zn(t,e,n,i){e=e||{$stable:!n};for(var s=0;s<t.length;s++){var o=t[s];Ut(o)?Zn(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return i&&(e.$key=i),e}function Kn(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"==typeof i&&i&&(t[e[n]]=e[n+1])}return t}function Qn(t,e){return"string"==typeof t?e+t:t}function ti(t){t._o=Vn,t._n=re,t._s=oe,t._l=$n,t._t=Wn,t._q=Ae,t._i=ke,t._m=qn,t._f=zn,t._k=Xn,t._b=Yn,t._v=nn,t._e=en,t._u=Zn,t._g=Jn,t._d=Kn,t._p=Qn}function ei(t,e){if(!t||!t.length)return{};for(var n={},i=0,s=t.length;i<s;i++){var o=t[i],r=o.data;if(r&&r.attrs&&r.attrs.slot&&delete r.attrs.slot,o.context!==e&&o.fnContext!==e||!r||null==r.slot)(n.default||(n.default=[])).push(o);else{var a=r.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(ni)&&delete n[u];return n}function ni(t){return t.isComment&&!t.asyncFactory||" "===t.text}function ii(t){return t.isComment&&t.asyncFactory}function si(t,e,n,i){var s,o=Object.keys(n).length>0,r=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(r&&i&&i!==Vt&&a===i.$key&&!o&&!i.$hasNormal)return i;for(var c in s={},e)e[c]&&"$"!==c[0]&&(s[c]=oi(t,n,c,e[c]))}else s={};for(var u in n)u in s||(s[u]=ri(n,u));return e&&Object.isExtensible(e)&&(e._normalized=s),Ie(s,"$stable",r),Ie(s,"$key",a),Ie(s,"$hasNormal",o),s}function oi(t,e,n,i){var s=function(){var e=Ke;Qe(t);var n=arguments.length?i.apply(null,arguments):i({}),s=(n=n&&"object"==typeof n&&!Ut(n)?[n]:jn(n))&&n[0];return Qe(e),n&&(!s||1===n.length&&s.isComment&&!ii(s))?void 0:n};return i.proxy&&Object.defineProperty(e,n,{get:s,enumerable:!0,configurable:!0}),s}function ri(t,e){return function(){return t[e]}}function ai(t,e,n,i,s){var o=!1;for(var r in e)r in t?e[r]!==n[r]&&(o=!0):(o=!0,ci(t,r,i,s));for(var r in t)r in e||(o=!0,delete t[r]);return o}function ci(t,e,n,i){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[i][e]}})}function ui(t,e){for(var n in e)t[n]=e[n];for(var n in t)n in e||delete t[n]}var hi=null;function li(t,e){return(t.__esModule||Ze&&"Module"===t[Symbol.toStringTag])&&(t=t.default),te(t)?e.extend(t):t}function di(t){if(Ut(t))for(var e=0;e<t.length;e++){var n=t[e];if(Jt(n)&&(Jt(n.componentOptions)||ii(n)))return n}}var fi=1,pi=2;function gi(t,e,n,i,s,o){return(Ut(n)||Kt(n))&&(s=i,i=n,n=void 0),Zt(o)&&(s=pi),function(t,e,n,i,s){if(Jt(n)&&Jt(n.__ob__))return en();if(Jt(n)&&Jt(n.is)&&(e=n.is),!e)return en();var o,r;if(Ut(i)&&Qt(i[0])&&((n=n||{}).scopedSlots={default:i[0]},i.length=0),s===pi?i=jn(i):s===fi&&(i=function(t){for(var e=0;e<t.length;e++)if(Ut(t[e]))return Array.prototype.concat.apply([],t);return t}(i)),"string"==typeof e){var a=void 0;r=t.$vnode&&t.$vnode.ns||De.getTagNamespace(e),o=De.isReservedTag(e)?new tn(De.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!Jt(a=Cs(t.$options,"components",e))?new tn(e,n,i,void 0,void 0,t):ds(a,n,t,i,e)}else o=ds(e,n,t,i);return Ut(o)?o:Jt(o)?(Jt(r)&&mi(o,r),Jt(n)&&function(t){te(t.style)&&Ii(t.style),te(t.class)&&Ii(t.class)}(n),o):en()}(t,e,n,i,s)}function mi(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),Jt(t.children))for(var i=0,s=t.children.length;i<s;i++){var o=t.children[i];Jt(o.tag)&&(Gt(o.ns)||Zt(n)&&"svg"!==o.tag)&&mi(o,e,n)}}function _i(t,e,n){hn();try{if(e)for(var i=e;i=i.$parent;){var s=i.$options.errorCaptured;if(s)for(var o=0;o<s.length;o++)try{if(!1===s[o].call(i,t,e,n))return}catch(t){bi(t,i,"errorCaptured hook")}}bi(t,e,n)}finally{ln()}}function vi(t,e,n,i,s){var o;try{(o=n?t.apply(e,n):t.call(e))&&!o._isVue&&se(o)&&!o._handled&&(o.catch((function(t){return _i(t,i,s+" (Promise/async)")})),o._handled=!0)}catch(t){_i(t,i,s)}return o}function bi(t,e,n){if(De.errorHandler)try{return De.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Ei(e)}Ei(t)}function Ei(t,e,n){if(!Le||"undefined"==typeof console)throw t;console.error(t)}var yi,Ci=!1,wi=[],xi=!1;function Ai(){xi=!1;var t=wi.slice(0);wi.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&Ge(Promise)){var ki=Promise.resolve();yi=function(){ki.then(Ai),We&&setTimeout(Ce)},Ci=!0}else if(Re||"undefined"==typeof MutationObserver||!Ge(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())yi="undefined"!=typeof setImmediate&&Ge(setImmediate)?function(){setImmediate(Ai)}:function(){setTimeout(Ai,0)};else{var Bi=1,Ti=new MutationObserver(Ai),Fi=document.createTextNode(String(Bi));Ti.observe(Fi,{characterData:!0}),yi=function(){Bi=(Bi+1)%2,Fi.data=String(Bi)},Ci=!0}function Si(t,e){var n;if(wi.push((function(){if(t)try{t.call(e)}catch(t){_i(t,e,"nextTick")}else n&&n(e)})),xi||(xi=!0,yi()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}function Di(t){return function(e,n){if(void 0===n&&(n=Ke),n)return function(t,e,n){var i=t.$options;i[e]=vs(i[e],n)}(n,t,e)}}Di("beforeMount"),Di("mounted"),Di("beforeUpdate"),Di("updated"),Di("beforeDestroy"),Di("destroyed"),Di("activated"),Di("deactivated"),Di("serverPrefetch"),Di("renderTracked"),Di("renderTriggered"),Di("errorCaptured");var Oi=new Je;function Ii(t){return Mi(t,Oi),Oi.clear(),t}function Mi(t,e){var n,i,s=Ut(t);if(!(!s&&!te(t)||t.__v_skip||Object.isFrozen(t)||t instanceof tn)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(s)for(n=t.length;n--;)Mi(t[n],e);else if(Bn(t))Mi(t.value,e);else for(n=(i=Object.keys(t)).length;n--;)Mi(t[i[n]],e)}}var Pi,Li=0,ji=function(){function t(t,e,n,i,s){var o;void 0===(o=Fn&&!Fn._vm?Fn:t?t._scope:void 0)&&(o=Fn),o&&o.active&&o.effects.push(this),(this.vm=t)&&s&&(t._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Li,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Je,this.newDepIds=new Je,this.expression="",Qt(e)?this.getter=e:(this.getter=function(t){if(!Me.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=Ce)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;hn(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;_i(t,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Ii(t),ln(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Ji[e]&&(t!==cn.target||!t.noRecurse)){if(Ji[e]=!0,Ki){for(var n=Ui.length-1;n>Qi&&Ui[n].id>t.id;)n--;Ui.splice(n+1,0,t)}else Ui.push(t);Zi||(Zi=!0,Si(ss))}}(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||te(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'.concat(this.expression,'"');vi(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&ue(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function Ri(t,e){Pi.$on(t,e)}function Ni(t,e){Pi.$off(t,e)}function $i(t,e){var n=Pi;return function i(){null!==e.apply(null,arguments)&&n.$off(t,i)}}function Wi(t,e,n){Pi=t,Mn(e,n||{},Ri,Ni,$i,t),Pi=void 0}var zi=null;function Hi(t){var e=zi;return zi=t,function(){zi=e}}function Xi(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Yi(t,e){if(e){if(t._directInactive=!1,Xi(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Yi(t.$children[n]);Vi(t,"activated")}}function qi(t,e){if(!(e&&(t._directInactive=!0,Xi(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)qi(t.$children[n]);Vi(t,"deactivated")}}function Vi(t,e,n,i){void 0===i&&(i=!0),hn();var s=Ke;i&&Qe(t);var o=t.$options[e],r="".concat(e," hook");if(o)for(var a=0,c=o.length;a<c;a++)vi(o[a],t,n||null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),i&&Qe(s),ln()}var Ui=[],Gi=[],Ji={},Zi=!1,Ki=!1,Qi=0,ts=0,es=Date.now;if(Le&&!Re){var ns=window.performance;ns&&"function"==typeof ns.now&&es()>document.createEvent("Event").timeStamp&&(es=function(){return ns.now()})}var is=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function ss(){var t,e;for(ts=es(),Ki=!0,Ui.sort(is),Qi=0;Qi<Ui.length;Qi++)(t=Ui[Qi]).before&&t.before(),e=t.id,Ji[e]=null,t.run();var n=Gi.slice(),i=Ui.slice();Qi=Ui.length=Gi.length=0,Ji={},Zi=Ki=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Yi(t[e],!0)}(n),function(t){for(var e=t.length;e--;){var n=t[e],i=n.vm;i&&i._watcher===n&&i._isMounted&&!i._isDestroyed&&Vi(i,"updated")}}(i),an(),Ue&&De.devtools&&Ue.emit("flush")}function os(t,e){if(t){for(var n=Object.create(null),i=Ze?Reflect.ownKeys(t):Object.keys(t),s=0;s<i.length;s++){var o=i[s];if("__ob__"!==o){var r=t[o].from;if(r in e._provided)n[o]=e._provided[r];else if("default"in t[o]){var a=t[o].default;n[o]=Qt(a)?a.call(e):a}}}return n}}function rs(t,e,n,i,s){var o,r=this,a=s.options;le(i,"_uid")?(o=Object.create(i))._original=i:(o=i,i=i._original);var c=Zt(a._compiled),u=!c;this.data=t,this.props=e,this.children=n,this.parent=i,this.listeners=t.on||Vt,this.injections=os(a.inject,i),this.slots=function(){return r.$slots||si(i,t.scopedSlots,r.$slots=ei(n,i)),r.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return si(i,t.scopedSlots,this.slots())}}),c&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=si(i,t.scopedSlots,this.$slots)),a._scopeId?this._c=function(t,e,n,s){var r=gi(o,t,e,n,s,u);return r&&!Ut(r)&&(r.fnScopeId=a._scopeId,r.fnContext=i),r}:this._c=function(t,e,n,i){return gi(o,t,e,n,i,u)}}function as(t,e,n,i,s){var o=sn(t);return o.fnContext=n,o.fnOptions=i,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function cs(t,e){for(var n in e)t[pe(n)]=e[n]}function us(t){return t.name||t.__name||t._componentTag}ti(rs.prototype);var hs={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;hs.prepatch(n,n)}else{var i=t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return Jt(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(n)}(t,zi);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,i,s){var o=i.data.scopedSlots,r=t.$scopedSlots,a=!!(o&&!o.$stable||r!==Vt&&!r.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),c=!!(s||t.$options._renderChildren||a),u=t.$vnode;t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=s;var h=i.data.attrs||Vt;t._attrsProxy&&ai(t._attrsProxy,h,u.data&&u.data.attrs||Vt,t,"$attrs")&&(c=!0),t.$attrs=h,n=n||Vt;var l=t.$options._parentListeners;if(t._listenersProxy&&ai(t._listenersProxy,n,l||Vt,t,"$listeners"),t.$listeners=t.$options._parentListeners=n,Wi(t,n,l),e&&t.$options.props){_n(!1);for(var d=t._props,f=t.$options._propKeys||[],p=0;p<f.length;p++){var g=f[p],m=t.$options.props;d[g]=ws(g,m,e,t)}_n(!0),t.$options.propsData=e}c&&(t.$slots=ei(s,i.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,Vi(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,Gi.push(e)):Yi(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?qi(e,!0):e.$destroy())}},ls=Object.keys(hs);function ds(t,e,n,i,s){if(!Gt(t)){var o=n.$options._base;if(te(t)&&(t=o.extend(t)),"function"==typeof t){var r;if(Gt(t.cid)&&(t=function(t,e){if(Zt(t.error)&&Jt(t.errorComp))return t.errorComp;if(Jt(t.resolved))return t.resolved;var n=hi;if(n&&Jt(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),Zt(t.loading)&&Jt(t.loadingComp))return t.loadingComp;if(n&&!Jt(t.owners)){var i=t.owners=[n],s=!0,o=null,r=null;n.$on("hook:destroyed",(function(){return ue(i,n)}));var a=function(t){for(var e=0,n=i.length;e<n;e++)i[e].$forceUpdate();t&&(i.length=0,null!==o&&(clearTimeout(o),o=null),null!==r&&(clearTimeout(r),r=null))},c=Be((function(n){t.resolved=li(n,e),s?i.length=0:a(!0)})),u=Be((function(e){Jt(t.errorComp)&&(t.error=!0,a(!0))})),h=t(c,u);return te(h)&&(se(h)?Gt(t.resolved)&&h.then(c,u):se(h.component)&&(h.component.then(c,u),Jt(h.error)&&(t.errorComp=li(h.error,e)),Jt(h.loading)&&(t.loadingComp=li(h.loading,e),0===h.delay?t.loading=!0:o=setTimeout((function(){o=null,Gt(t.resolved)&&Gt(t.error)&&(t.loading=!0,a(!1))}),h.delay||200)),Jt(h.timeout)&&(r=setTimeout((function(){r=null,Gt(t.resolved)&&u(null)}),h.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}(r=t,o),void 0===t))return function(t,e,n,i,s){var o=en();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:i,tag:s},o}(r,e,n,i,s);e=e||{},js(t),Jt(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var s=e.on||(e.on={}),o=s[i],r=e.model.callback;Jt(o)?(Ut(o)?-1===o.indexOf(r):o!==r)&&(s[i]=[r].concat(o)):s[i]=r}(t.options,e);var a=function(t,e,n){var i=e.options.props;if(!Gt(i)){var s={},o=t.attrs,r=t.props;if(Jt(o)||Jt(r))for(var a in i){var c=_e(a);Ln(s,r,a,c,!0)||Ln(s,o,a,c,!1)}return s}}(e,t);if(Zt(t.options.functional))return function(t,e,n,i,s){var o=t.options,r={},a=o.props;if(Jt(a))for(var c in a)r[c]=ws(c,a,e||Vt);else Jt(n.attrs)&&cs(r,n.attrs),Jt(n.props)&&cs(r,n.props);var u=new rs(n,r,s,i,t),h=o.render.call(null,u._c,u);if(h instanceof tn)return as(h,n,u.parent,o);if(Ut(h)){for(var l=jn(h)||[],d=new Array(l.length),f=0;f<l.length;f++)d[f]=as(l[f],n,u.parent,o);return d}}(t,a,e,n,i);var c=e.on;if(e.on=e.nativeOn,Zt(t.options.abstract)){var u=e.slot;e={},u&&(e.slot=u)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<ls.length;n++){var i=ls[n],s=e[i],o=hs[i];s===o||s&&s._merged||(e[i]=s?fs(o,s):o)}}(e);var h=us(t.options)||s;return new tn("vue-component-".concat(t.cid).concat(h?"-".concat(h):""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:a,listeners:c,tag:s,children:i},r)}}}function fs(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}var ps=Ce,gs=De.optionMergeStrategies;function ms(t,e,n){if(void 0===n&&(n=!0),!e)return t;for(var i,s,o,r=Ze?Reflect.ownKeys(e):Object.keys(e),a=0;a<r.length;a++)"__ob__"!==(i=r[a])&&(s=t[i],o=e[i],n&&le(t,i)?s!==o&&ne(s)&&ne(o)&&ms(s,o):Cn(t,i,o));return t}function _s(t,e,n){return n?function(){var i=Qt(e)?e.call(n,n):e,s=Qt(t)?t.call(n,n):t;return i?ms(i,s):s}:e?t?function(){return ms(Qt(e)?e.call(this,this):e,Qt(t)?t.call(this,this):t)}:e:t}function vs(t,e){var n=e?t?t.concat(e):Ut(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function bs(t,e,n,i){var s=Object.create(t||null);return e?Ee(s,e):s}gs.data=function(t,e,n){return n?_s(t,e,n):e&&"function"!=typeof e?t:_s(t,e)},Se.forEach((function(t){gs[t]=vs})),Fe.forEach((function(t){gs[t+"s"]=bs})),gs.watch=function(t,e,n,i){if(t===Xe&&(t=void 0),e===Xe&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var s={};for(var o in Ee(s,t),e){var r=s[o],a=e[o];r&&!Ut(r)&&(r=[r]),s[o]=r?r.concat(a):Ut(a)?a:[a]}return s},gs.props=gs.methods=gs.inject=gs.computed=function(t,e,n,i){if(!t)return e;var s=Object.create(null);return Ee(s,t),e&&Ee(s,e),s},gs.provide=function(t,e){return t?function(){var n=Object.create(null);return ms(n,Qt(t)?t.call(this):t),e&&ms(n,Qt(e)?e.call(this):e,!1),n}:e};var Es=function(t,e){return void 0===e?t:e};function ys(t,e,n){if(Qt(e)&&(e=e.options),function(t,e){var n=t.props;if(n){var i,s,o={};if(Ut(n))for(i=n.length;i--;)"string"==typeof(s=n[i])&&(o[pe(s)]={type:null});else if(ne(n))for(var r in n)s=n[r],o[pe(r)]=ne(s)?s:{type:s};t.props=o}}(e),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(Ut(n))for(var s=0;s<n.length;s++)i[n[s]]={from:n[s]};else if(ne(n))for(var o in n){var r=n[o];i[o]=ne(r)?Ee({from:o},r):{from:r}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];Qt(i)&&(e[n]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=ys(t,e.extends,n)),e.mixins))for(var i=0,s=e.mixins.length;i<s;i++)t=ys(t,e.mixins[i],n);var o,r={};for(o in t)a(o);for(o in e)le(t,o)||a(o);function a(i){var s=gs[i]||Es;r[i]=s(t[i],e[i],n,i)}return r}function Cs(t,e,n,i){if("string"==typeof n){var s=t[e];if(le(s,n))return s[n];var o=pe(n);if(le(s,o))return s[o];var r=ge(o);return le(s,r)?s[r]:s[n]||s[o]||s[r]}}function ws(t,e,n,i){var s=e[t],o=!le(n,t),r=n[t],a=Bs(Boolean,s.type);if(a>-1)if(o&&!le(s,"default"))r=!1;else if(""===r||r===_e(t)){var c=Bs(String,s.type);(c<0||a<c)&&(r=!0)}if(void 0===r){r=function(t,e,n){if(le(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:Qt(i)&&"Function"!==As(e.type)?i.call(t):i}}(i,s,t);var u=mn;_n(!0),En(r),_n(u)}return r}var xs=/^\s*function (\w+)/;function As(t){var e=t&&t.toString().match(xs);return e?e[1]:""}function ks(t,e){return As(t)===As(e)}function Bs(t,e){if(!Ut(e))return ks(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(ks(e[n],t))return n;return-1}var Ts={enumerable:!0,configurable:!0,get:Ce,set:Ce};function Fs(t,e,n){Ts.get=function(){return this[e][n]},Ts.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Ts)}function Ss(t){var e=t.$options;if(e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props=An({}),s=t.$options._propKeys=[];!t.$parent||_n(!1);var o=function(o){s.push(o);var r=ws(o,e,n,t);yn(i,o,r),o in t||Fs(t,"_props",o)};for(var r in e)o(r);_n(!0)}(t,e.props),function(t){var e=t.$options,n=e.setup;if(n){var i=t._setupContext=function(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};Ie(e,"_v_attr_proxy",!0),ai(e,t.$attrs,Vt,t,"$attrs")}return t._attrsProxy},get listeners(){return t._listenersProxy||ai(t._listenersProxy={},t.$listeners,Vt,t,"$listeners"),t._listenersProxy},get slots(){return function(t){return t._slotsProxy||ui(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}(t)},emit:ve(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(n){return Tn(t,e,n)}))}}}(t);Qe(t),hn();var s=vi(n,null,[t._props||An({}),i],t,"setup");if(ln(),Qe(),Qt(s))e.render=s;else if(te(s))if(t._setupState=s,s.__sfc){var o=t._setupProxy={};for(var r in s)"__sfc"!==r&&Tn(o,s,r)}else for(var r in s)Oe(r)||Tn(t,s,r)}}(t),e.methods&&function(t,e){for(var n in t.$options.props,e)t[n]="function"!=typeof e[n]?Ce:ve(e[n],t)}(t,e.methods),e.data)!function(t){var e=t.$options.data;ne(e=t._data=Qt(e)?function(t,e){hn();try{return t.call(e,e)}catch(t){return _i(t,e,"data()"),{}}finally{ln()}}(e,t):e||{})||(e={});for(var n=Object.keys(e),i=t.$options.props,s=(t.$options.methods,n.length);s--;){var o=n[s];i&&le(i,o)||Oe(o)||Fs(t,"_data",o)}var r=En(e);r&&r.vmCount++}(t);else{var n=En(t._data={});n&&n.vmCount++}e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=Ve();for(var s in e){var o=e[s],r=Qt(o)?o:o.get;i||(n[s]=new ji(t,r||Ce,Ce,Ds)),s in t||Os(t,s,o)}}(t,e.computed),e.watch&&e.watch!==Xe&&function(t,e){for(var n in e){var i=e[n];if(Ut(i))for(var s=0;s<i.length;s++)Ps(t,n,i[s]);else Ps(t,n,i)}}(t,e.watch)}var Ds={lazy:!0};function Os(t,e,n){var i=!Ve();Qt(n)?(Ts.get=i?Is(e):Ms(n),Ts.set=Ce):(Ts.get=n.get?i&&!1!==n.cache?Is(e):Ms(n.get):Ce,Ts.set=n.set||Ce),Object.defineProperty(t,e,Ts)}function Is(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),cn.target&&e.depend(),e.value}}function Ms(t){return function(){return t.call(this,this)}}function Ps(t,e,n,i){return ne(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}var Ls=0;function js(t){var e=t.options;if(t.super){var n=js(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.sealedOptions;for(var s in n)n[s]!==i[s]&&(e||(e={}),e[s]=n[s]);return e}(t);i&&Ee(t.extendOptions,i),(e=t.options=ys(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Rs(t){this._init(t)}function Ns(t){return t&&(us(t.Ctor.options)||t.tag)}function $s(t,e){return Ut(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(n=t,!("[object RegExp]"!==ee.call(n))&&t.test(e));var n}function Ws(t,e){var n=t.cache,i=t.keys,s=t._vnode;for(var o in n){var r=n[o];if(r){var a=r.name;a&&!e(a)&&zs(n,o,i,s)}}}function zs(t,e,n,i){var s=t[e];!s||i&&s.tag===i.tag||s.componentInstance.$destroy(),t[e]=null,ue(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Ls++,e._isVue=!0,e.__v_skip=!0,e._scope=new Dn(!0),e._scope._vm=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var s=i.componentOptions;n.propsData=s.propsData,n._parentListeners=s.listeners,n._renderChildren=s.children,n._componentTag=s.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=ys(js(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._provided=n?n._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Wi(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=ei(e._renderChildren,i),t.$scopedSlots=n?si(t.$parent,n.data.scopedSlots,t.$slots):Vt,t._c=function(e,n,i,s){return gi(t,e,n,i,s,!1)},t.$createElement=function(e,n,i,s){return gi(t,e,n,i,s,!0)};var s=n&&n.data;yn(t,"$attrs",s&&s.attrs||Vt,null,!0),yn(t,"$listeners",e._parentListeners||Vt,null,!0)}(e),Vi(e,"beforeCreate",void 0,!1),function(t){var e=os(t.$options.inject,t);e&&(_n(!1),Object.keys(e).forEach((function(n){yn(t,n,e[n])})),_n(!0))}(e),Ss(e),function(t){var e=t.$options.provide;if(e){var n=Qt(e)?e.call(t):e;if(!te(n))return;for(var i=function(t){var e=t._provided,n=t.$parent&&t.$parent._provided;return n===e?t._provided=Object.create(n):e}(t),s=Ze?Reflect.ownKeys(n):Object.keys(n),o=0;o<s.length;o++){var r=s[o];Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))}}}(e),Vi(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Rs),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Cn,t.prototype.$delete=wn,t.prototype.$watch=function(t,e,n){var i=this;if(ne(e))return Ps(i,t,e,n);(n=n||{}).user=!0;var s=new ji(i,t,e,n);if(n.immediate){var o='callback for immediate watcher "'.concat(s.expression,'"');hn(),vi(e,i,[s.value],i,o),ln()}return function(){s.teardown()}}}(Rs),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Ut(t))for(var s=0,o=t.length;s<o;s++)i.$on(t[s],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Ut(t)){for(var i=0,s=t.length;i<s;i++)n.$off(t[i],e);return n}var o,r=n._events[t];if(!r)return n;if(!e)return n._events[t]=null,n;for(var a=r.length;a--;)if((o=r[a])===e||o.fn===e){r.splice(a,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?be(n):n;for(var i=be(arguments,1),s='event handler for "'.concat(t,'"'),o=0,r=n.length;o<r;o++)vi(n[o],e,i,e,s)}return e}}(Rs),function(t){t.prototype._update=function(t,e){var n=this,i=n.$el,s=n._vnode,o=Hi(n);n._vnode=t,n.$el=s?n.__patch__(s,t):n.__patch__(n.$el,t,e,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n);for(var r=n;r&&r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode;)r.$parent.$el=r.$el,r=r.$parent},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Vi(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||ue(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Vi(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Rs),function(t){ti(t.prototype),t.prototype.$nextTick=function(t){return Si(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,s=n._parentVnode;s&&e._isMounted&&(e.$scopedSlots=si(e.$parent,s.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&ui(e._slotsProxy,e.$scopedSlots)),e.$vnode=s;try{Qe(e),hi=e,t=i.call(e._renderProxy,e.$createElement)}catch(n){_i(n,e,"render"),t=e._vnode}finally{hi=null,Qe()}return Ut(t)&&1===t.length&&(t=t[0]),t instanceof tn||(t=en()),t.parent=s,t}}(Rs);var Hs=[String,RegExp,Array],Xs={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Hs,exclude:Hs,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,i=t.vnodeToCache,s=t.keyToCache;if(i){var o=i.tag,r=i.componentInstance,a=i.componentOptions;e[s]={name:Ns(a),tag:o,componentInstance:r},n.push(s),this.max&&n.length>parseInt(this.max)&&zs(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)zs(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Ws(t,(function(t){return $s(e,t)}))})),this.$watch("exclude",(function(e){Ws(t,(function(t){return!$s(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=di(t),n=e&&e.componentOptions;if(n){var i=Ns(n),s=this.include,o=this.exclude;if(s&&(!i||!$s(s,i))||o&&i&&$s(o,i))return e;var r=this.cache,a=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):e.key;r[c]?(e.componentInstance=r[c].componentInstance,ue(a,c),a.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return De}};Object.defineProperty(t,"config",e),t.util={warn:ps,extend:Ee,mergeOptions:ys,defineReactive:yn},t.set=Cn,t.delete=wn,t.nextTick=Si,t.observable=function(t){return En(t),t},t.options=Object.create(null),Fe.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,Ee(t.options.components,Xs),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=be(arguments,1);return n.unshift(this),Qt(t.install)?t.install.apply(t,n):Qt(t)&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=ys(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,s=t._Ctor||(t._Ctor={});if(s[i])return s[i];var o=us(t)||us(n.options),r=function(t){this._init(t)};return(r.prototype=Object.create(n.prototype)).constructor=r,r.cid=e++,r.options=ys(n.options,t),r.super=n,r.options.props&&function(t){var e=t.options.props;for(var n in e)Fs(t.prototype,"_props",n)}(r),r.options.computed&&function(t){var e=t.options.computed;for(var n in e)Os(t.prototype,n,e[n])}(r),r.extend=n.extend,r.mixin=n.mixin,r.use=n.use,Fe.forEach((function(t){r[t]=n[t]})),o&&(r.options.components[o]=r),r.superOptions=n.options,r.extendOptions=t,r.sealedOptions=Ee({},r.options),s[i]=r,r}}(t),function(t){Fe.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&ne(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&Qt(n)&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(Rs),Object.defineProperty(Rs.prototype,"$isServer",{get:Ve}),Object.defineProperty(Rs.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Rs,"FunctionalRenderContext",{value:rs}),Rs.version="2.7.14";var Ys=ae("style,class"),qs=ae("input,textarea,option,select,progress"),Vs=ae("contenteditable,draggable,spellcheck"),Us=ae("events,caret,typing,plaintext-only"),Gs=function(t,e){return to(e)||"false"===e?"false":"contenteditable"===t&&Us(e)?e:"true"},Js=ae("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Zs="http://www.w3.org/1999/xlink",Ks=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Qs=function(t){return Ks(t)?t.slice(6,t.length):""},to=function(t){return null==t||!1===t};function eo(t,e){return{staticClass:no(t.staticClass,e.staticClass),class:Jt(t.class)?[t.class,e.class]:e.class}}function no(t,e){return t?e?t+" "+e:t:e||""}function io(t){return Array.isArray(t)?function(t){for(var e,n="",i=0,s=t.length;i<s;i++)Jt(e=io(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):te(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var so={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},oo=ae("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ro=ae("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ao=function(t){return oo(t)||ro(t)},co=Object.create(null),uo=ae("text,number,password,search,email,tel,url"),ho=Object.freeze({__proto__:null,createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(so[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),lo={create:function(t,e){fo(e)},update:function(t,e){t.data.ref!==e.data.ref&&(fo(t,!0),fo(e))},destroy:function(t){fo(t,!0)}};function fo(t,e){var n=t.data.ref;if(Jt(n)){var i=t.context,s=t.componentInstance||t.elm,o=e?null:s,r=e?void 0:s;if(Qt(n))vi(n,i,[o],i,"template ref function");else{var a=t.data.refInFor,c="string"==typeof n||"number"==typeof n,u=Bn(n),h=i.$refs;if(c||u)if(a){var l=c?h[n]:n.value;e?Ut(l)&&ue(l,s):Ut(l)?l.includes(s)||l.push(s):c?(h[n]=[s],po(i,n,h[n])):n.value=[s]}else if(c){if(e&&h[n]!==s)return;h[n]=r,po(i,n,o)}else if(u){if(e&&n.value!==s)return;n.value=o}}}}function po(t,e,n){var i=t._setupState;i&&le(i,e)&&(Bn(i[e])?i[e].value=n:i[e]=n)}var go=new tn("",{},[]),mo=["create","activate","update","remove","destroy"];function _o(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&Jt(t.data)===Jt(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,i=Jt(n=t.data)&&Jt(n=n.attrs)&&n.type,s=Jt(n=e.data)&&Jt(n=n.attrs)&&n.type;return i===s||uo(i)&&uo(s)}(t,e)||Zt(t.isAsyncPlaceholder)&&Gt(e.asyncFactory.error))}function vo(t,e,n){var i,s,o={};for(i=e;i<=n;++i)Jt(s=t[i].key)&&(o[s]=i);return o}var bo={create:Eo,update:Eo,destroy:function(t){Eo(t,go)}};function Eo(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,s,o=t===go,r=e===go,a=Co(t.data.directives,t.context),c=Co(e.data.directives,e.context),u=[],h=[];for(n in c)i=a[n],s=c[n],i?(s.oldValue=i.value,s.oldArg=i.arg,xo(s,"update",e,t),s.def&&s.def.componentUpdated&&h.push(s)):(xo(s,"bind",e,t),s.def&&s.def.inserted&&u.push(s));if(u.length){var l=function(){for(var n=0;n<u.length;n++)xo(u[n],"inserted",e,t)};o?Pn(e,"insert",l):l()}if(h.length&&Pn(e,"postpatch",(function(){for(var n=0;n<h.length;n++)xo(h[n],"componentUpdated",e,t)})),!o)for(n in a)c[n]||xo(a[n],"unbind",t,t,r)}(t,e)}var yo=Object.create(null);function Co(t,e){var n,i,s=Object.create(null);if(!t)return s;for(n=0;n<t.length;n++){if((i=t[n]).modifiers||(i.modifiers=yo),s[wo(i)]=i,e._setupState&&e._setupState.__sfc){var o=i.def||Cs(e,"_setupState","v-"+i.name);i.def="function"==typeof o?{bind:o,update:o}:o}i.def=i.def||Cs(e.$options,"directives",i.name)}return s}function wo(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function xo(t,e,n,i,s){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,i,s)}catch(i){_i(i,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var Ao=[lo,bo];function ko(t,e){var n=e.componentOptions;if(!(Jt(n)&&!1===n.Ctor.options.inheritAttrs||Gt(t.data.attrs)&&Gt(e.data.attrs))){var i,s,o=e.elm,r=t.data.attrs||{},a=e.data.attrs||{};for(i in(Jt(a.__ob__)||Zt(a._v_attr_proxy))&&(a=e.data.attrs=Ee({},a)),a)s=a[i],r[i]!==s&&Bo(o,i,s,e.data.pre);for(i in(Re||$e)&&a.value!==r.value&&Bo(o,"value",a.value),r)Gt(a[i])&&(Ks(i)?o.removeAttributeNS(Zs,Qs(i)):Vs(i)||o.removeAttribute(i))}}function Bo(t,e,n,i){i||t.tagName.indexOf("-")>-1?To(t,e,n):Js(e)?to(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Vs(e)?t.setAttribute(e,Gs(e,n)):Ks(e)?to(n)?t.removeAttributeNS(Zs,Qs(e)):t.setAttributeNS(Zs,e,n):To(t,e,n)}function To(t,e,n){if(to(n))t.removeAttribute(e);else{if(Re&&!Ne&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var Fo={create:ko,update:ko};function So(t,e){var n=e.elm,i=e.data,s=t.data;if(!(Gt(i.staticClass)&&Gt(i.class)&&(Gt(s)||Gt(s.staticClass)&&Gt(s.class)))){var o=function(t){for(var e=t.data,n=t,i=t;Jt(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=eo(i.data,e));for(;Jt(n=n.parent);)n&&n.data&&(e=eo(e,n.data));return s=e.staticClass,o=e.class,Jt(s)||Jt(o)?no(s,io(o)):"";var s,o}(e),r=n._transitionClasses;Jt(r)&&(o=no(o,io(r))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}var Do,Oo={create:So,update:So},Io="__r",Mo="__c";function Po(t,e,n){var i=Do;return function s(){null!==e.apply(null,arguments)&&Ro(t,s,n,i)}}var Lo=Ci&&!(He&&Number(He[1])<=53);function jo(t,e,n,i){if(Lo){var s=ts,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=s||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Do.addEventListener(t,e,Ye?{capture:n,passive:i}:n)}function Ro(t,e,n,i){(i||Do).removeEventListener(t,e._wrapper||e,n)}function No(t,e){if(!Gt(t.data.on)||!Gt(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Do=e.elm||t.elm,function(t){if(Jt(t[Io])){var e=Re?"change":"input";t[e]=[].concat(t[Io],t[e]||[]),delete t[Io]}Jt(t[Mo])&&(t.change=[].concat(t[Mo],t.change||[]),delete t[Mo])}(n),Mn(n,i,jo,Ro,Po,e.context),Do=void 0}}var $o,Wo={create:No,update:No,destroy:function(t){return No(t,go)}};function zo(t,e){if(!Gt(t.data.domProps)||!Gt(e.data.domProps)){var n,i,s=e.elm,o=t.data.domProps||{},r=e.data.domProps||{};for(n in(Jt(r.__ob__)||Zt(r._v_attr_proxy))&&(r=e.data.domProps=Ee({},r)),o)n in r||(s[n]="");for(n in r){if(i=r[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===o[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=i;var a=Gt(i)?"":String(i);Ho(s,a)&&(s.value=a)}else if("innerHTML"===n&&ro(s.tagName)&&Gt(s.innerHTML)){($o=$o||document.createElement("div")).innerHTML="<svg>".concat(i,"</svg>");for(var c=$o.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;c.firstChild;)s.appendChild(c.firstChild)}else if(i!==o[n])try{s[n]=i}catch(t){}}}}function Ho(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,i=t._vModifiers;if(Jt(i)){if(i.number)return re(n)!==re(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Xo={create:zo,update:zo},Yo=de((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function qo(t){var e=Vo(t.style);return t.staticStyle?Ee(t.staticStyle,e):e}function Vo(t){return Array.isArray(t)?ye(t):"string"==typeof t?Yo(t):t}var Uo,Go=/^--/,Jo=/\s*!important$/,Zo=function(t,e,n){if(Go.test(e))t.style.setProperty(e,n);else if(Jo.test(n))t.style.setProperty(_e(e),n.replace(Jo,""),"important");else{var i=Qo(e);if(Array.isArray(n))for(var s=0,o=n.length;s<o;s++)t.style[i]=n[s];else t.style[i]=n}},Ko=["Webkit","Moz","ms"],Qo=de((function(t){if(Uo=Uo||document.createElement("div").style,"filter"!==(t=pe(t))&&t in Uo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Ko.length;n++){var i=Ko[n]+e;if(i in Uo)return i}}));function tr(t,e){var n=e.data,i=t.data;if(!(Gt(n.staticStyle)&&Gt(n.style)&&Gt(i.staticStyle)&&Gt(i.style))){var s,o,r=e.elm,a=i.staticStyle,c=i.normalizedStyle||i.style||{},u=a||c,h=Vo(e.data.style)||{};e.data.normalizedStyle=Jt(h.__ob__)?Ee({},h):h;var l=function(t,e){for(var n,i={},s=t;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(n=qo(s.data))&&Ee(i,n);(n=qo(t.data))&&Ee(i,n);for(var o=t;o=o.parent;)o.data&&(n=qo(o.data))&&Ee(i,n);return i}(e);for(o in u)Gt(l[o])&&Zo(r,o,"");for(o in l)(s=l[o])!==u[o]&&Zo(r,o,null==s?"":s)}}var er={create:tr,update:tr},nr=/\s+/;function ir(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(nr).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function sr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(nr).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" ".concat(t.getAttribute("class")||""," "),i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function or(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&Ee(e,rr(t.name||"v")),Ee(e,t),e}return"string"==typeof t?rr(t):void 0}}var rr=de((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),ar=Le&&!Ne,cr="transition",ur="animation",hr="transition",lr="transitionend",dr="animation",fr="animationend";ar&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(hr="WebkitTransition",lr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(dr="WebkitAnimation",fr="webkitAnimationEnd"));var pr=Le?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function gr(t){pr((function(){pr(t)}))}function mr(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),ir(t,e))}function _r(t,e){t._transitionClasses&&ue(t._transitionClasses,e),sr(t,e)}function vr(t,e,n){var i=Er(t,e),s=i.type,o=i.timeout,r=i.propCount;if(!s)return n();var a=s===cr?lr:fr,c=0,u=function(){t.removeEventListener(a,h),n()},h=function(e){e.target===t&&++c>=r&&u()};setTimeout((function(){c<r&&u()}),o+1),t.addEventListener(a,h)}var br=/\b(transform|all)(,|$)/;function Er(t,e){var n,i=window.getComputedStyle(t),s=(i[hr+"Delay"]||"").split(", "),o=(i[hr+"Duration"]||"").split(", "),r=yr(s,o),a=(i[dr+"Delay"]||"").split(", "),c=(i[dr+"Duration"]||"").split(", "),u=yr(a,c),h=0,l=0;return e===cr?r>0&&(n=cr,h=r,l=o.length):e===ur?u>0&&(n=ur,h=u,l=c.length):l=(n=(h=Math.max(r,u))>0?r>u?cr:ur:null)?n===cr?o.length:c.length:0,{type:n,timeout:h,propCount:l,hasTransform:n===cr&&br.test(i[hr+"Property"])}}function yr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Cr(e)+Cr(t[n])})))}function Cr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function wr(t,e){var n=t.elm;Jt(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=or(t.data.transition);if(!Gt(i)&&!Jt(n._enterCb)&&1===n.nodeType){for(var s=i.css,o=i.type,r=i.enterClass,a=i.enterToClass,c=i.enterActiveClass,u=i.appearClass,h=i.appearToClass,l=i.appearActiveClass,d=i.beforeEnter,f=i.enter,p=i.afterEnter,g=i.enterCancelled,m=i.beforeAppear,_=i.appear,v=i.afterAppear,b=i.appearCancelled,E=i.duration,y=zi,C=zi.$vnode;C&&C.parent;)y=C.context,C=C.parent;var w=!y._isMounted||!t.isRootInsert;if(!w||_||""===_){var x=w&&u?u:r,A=w&&l?l:c,k=w&&h?h:a,B=w&&m||d,T=w&&Qt(_)?_:f,F=w&&v||p,S=w&&b||g,D=re(te(E)?E.enter:E),O=!1!==s&&!Ne,I=kr(T),M=n._enterCb=Be((function(){O&&(_r(n,k),_r(n,A)),M.cancelled?(O&&_r(n,x),S&&S(n)):F&&F(n),n._enterCb=null}));t.data.show||Pn(t,"insert",(function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),T&&T(n,M)})),B&&B(n),O&&(mr(n,x),mr(n,A),gr((function(){_r(n,x),M.cancelled||(mr(n,k),I||(Ar(D)?setTimeout(M,D):vr(n,o,M)))}))),t.data.show&&(e&&e(),T&&T(n,M)),O||I||M()}}}function xr(t,e){var n=t.elm;Jt(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=or(t.data.transition);if(Gt(i)||1!==n.nodeType)return e();if(!Jt(n._leaveCb)){var s=i.css,o=i.type,r=i.leaveClass,a=i.leaveToClass,c=i.leaveActiveClass,u=i.beforeLeave,h=i.leave,l=i.afterLeave,d=i.leaveCancelled,f=i.delayLeave,p=i.duration,g=!1!==s&&!Ne,m=kr(h),_=re(te(p)?p.leave:p),v=n._leaveCb=Be((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),g&&(_r(n,a),_r(n,c)),v.cancelled?(g&&_r(n,r),d&&d(n)):(e(),l&&l(n)),n._leaveCb=null}));f?f(b):b()}function b(){v.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),u&&u(n),g&&(mr(n,r),mr(n,c),gr((function(){_r(n,r),v.cancelled||(mr(n,a),m||(Ar(_)?setTimeout(v,_):vr(n,o,v)))}))),h&&h(n,v),g||m||v())}}function Ar(t){return"number"==typeof t&&!isNaN(t)}function kr(t){if(Gt(t))return!1;var e=t.fns;return Jt(e)?kr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Br(t,e){!0!==e.data.show&&wr(e)}var Tr=function(t){var e,n,i={},s=t.modules,o=t.nodeOps;for(e=0;e<mo.length;++e)for(i[mo[e]]=[],n=0;n<s.length;++n)Jt(s[n][mo[e]])&&i[mo[e]].push(s[n][mo[e]]);function r(t){var e=o.parentNode(t);Jt(e)&&o.removeChild(e,t)}function a(t,e,n,s,r,a,l){if(Jt(t.elm)&&Jt(a)&&(t=a[l]=sn(t)),t.isRootInsert=!r,!function(t,e,n,s){var o=t.data;if(Jt(o)){var r=Jt(t.componentInstance)&&o.keepAlive;if(Jt(o=o.hook)&&Jt(o=o.init)&&o(t,!1),Jt(t.componentInstance))return c(t,e),u(n,t.elm,s),Zt(r)&&function(t,e,n,s){for(var o,r=t;r.componentInstance;)if(Jt(o=(r=r.componentInstance._vnode).data)&&Jt(o=o.transition)){for(o=0;o<i.activate.length;++o)i.activate[o](go,r);e.push(r);break}u(n,t.elm,s)}(t,e,n,s),!0}}(t,e,n,s)){var p=t.data,g=t.children,m=t.tag;Jt(m)?(t.elm=t.ns?o.createElementNS(t.ns,m):o.createElement(m,t),f(t),h(t,g,e),Jt(p)&&d(t,e),u(n,t.elm,s)):Zt(t.isComment)?(t.elm=o.createComment(t.text),u(n,t.elm,s)):(t.elm=o.createTextNode(t.text),u(n,t.elm,s))}}function c(t,e){Jt(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,l(t)?(d(t,e),f(t)):(fo(t),e.push(t))}function u(t,e,n){Jt(t)&&(Jt(n)?o.parentNode(n)===t&&o.insertBefore(t,e,n):o.appendChild(t,e))}function h(t,e,n){if(Ut(e))for(var i=0;i<e.length;++i)a(e[i],n,t.elm,null,!0,e,i);else Kt(t.text)&&o.appendChild(t.elm,o.createTextNode(String(t.text)))}function l(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return Jt(t.tag)}function d(t,n){for(var s=0;s<i.create.length;++s)i.create[s](go,t);Jt(e=t.data.hook)&&(Jt(e.create)&&e.create(go,t),Jt(e.insert)&&n.push(t))}function f(t){var e;if(Jt(e=t.fnScopeId))o.setStyleScope(t.elm,e);else for(var n=t;n;)Jt(e=n.context)&&Jt(e=e.$options._scopeId)&&o.setStyleScope(t.elm,e),n=n.parent;Jt(e=zi)&&e!==t.context&&e!==t.fnContext&&Jt(e=e.$options._scopeId)&&o.setStyleScope(t.elm,e)}function p(t,e,n,i,s,o){for(;i<=s;++i)a(n[i],o,t,e,!1,n,i)}function g(t){var e,n,s=t.data;if(Jt(s))for(Jt(e=s.hook)&&Jt(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(Jt(e=t.children))for(n=0;n<t.children.length;++n)g(t.children[n])}function m(t,e,n){for(;e<=n;++e){var i=t[e];Jt(i)&&(Jt(i.tag)?(_(i),g(i)):r(i.elm))}}function _(t,e){if(Jt(e)||Jt(t.data)){var n,s=i.remove.length+1;for(Jt(e)?e.listeners+=s:e=function(t,e){function n(){0==--n.listeners&&r(t)}return n.listeners=e,n}(t.elm,s),Jt(n=t.componentInstance)&&Jt(n=n._vnode)&&Jt(n.data)&&_(n,e),n=0;n<i.remove.length;++n)i.remove[n](t,e);Jt(n=t.data.hook)&&Jt(n=n.remove)?n(t,e):e()}else r(t.elm)}function v(t,e,n,i){for(var s=n;s<i;s++){var o=e[s];if(Jt(o)&&_o(t,o))return s}}function b(t,e,n,s,r,c){if(t!==e){Jt(e.elm)&&Jt(s)&&(e=s[r]=sn(e));var u=e.elm=t.elm;if(Zt(t.isAsyncPlaceholder))Jt(e.asyncFactory.resolved)?C(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(Zt(e.isStatic)&&Zt(t.isStatic)&&e.key===t.key&&(Zt(e.isCloned)||Zt(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,d=e.data;Jt(d)&&Jt(h=d.hook)&&Jt(h=h.prepatch)&&h(t,e);var f=t.children,g=e.children;if(Jt(d)&&l(e)){for(h=0;h<i.update.length;++h)i.update[h](t,e);Jt(h=d.hook)&&Jt(h=h.update)&&h(t,e)}Gt(e.text)?Jt(f)&&Jt(g)?f!==g&&function(t,e,n,i,s){for(var r,c,u,h=0,l=0,d=e.length-1,f=e[0],g=e[d],_=n.length-1,E=n[0],y=n[_],C=!s;h<=d&&l<=_;)Gt(f)?f=e[++h]:Gt(g)?g=e[--d]:_o(f,E)?(b(f,E,i,n,l),f=e[++h],E=n[++l]):_o(g,y)?(b(g,y,i,n,_),g=e[--d],y=n[--_]):_o(f,y)?(b(f,y,i,n,_),C&&o.insertBefore(t,f.elm,o.nextSibling(g.elm)),f=e[++h],y=n[--_]):_o(g,E)?(b(g,E,i,n,l),C&&o.insertBefore(t,g.elm,f.elm),g=e[--d],E=n[++l]):(Gt(r)&&(r=vo(e,h,d)),Gt(c=Jt(E.key)?r[E.key]:v(E,e,h,d))?a(E,i,t,f.elm,!1,n,l):_o(u=e[c],E)?(b(u,E,i,n,l),e[c]=void 0,C&&o.insertBefore(t,u.elm,f.elm)):a(E,i,t,f.elm,!1,n,l),E=n[++l]);h>d?p(t,Gt(n[_+1])?null:n[_+1].elm,n,l,_,i):l>_&&m(e,h,d)}(u,f,g,n,c):Jt(g)?(Jt(t.text)&&o.setTextContent(u,""),p(u,null,g,0,g.length-1,n)):Jt(f)?m(f,0,f.length-1):Jt(t.text)&&o.setTextContent(u,""):t.text!==e.text&&o.setTextContent(u,e.text),Jt(d)&&Jt(h=d.hook)&&Jt(h=h.postpatch)&&h(t,e)}}}function E(t,e,n){if(Zt(n)&&Jt(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var y=ae("attrs,class,staticClass,staticStyle,key");function C(t,e,n,i){var s,o=e.tag,r=e.data,a=e.children;if(i=i||r&&r.pre,e.elm=t,Zt(e.isComment)&&Jt(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(Jt(r)&&(Jt(s=r.hook)&&Jt(s=s.init)&&s(e,!0),Jt(s=e.componentInstance)))return c(e,n),!0;if(Jt(o)){if(Jt(a))if(t.hasChildNodes())if(Jt(s=r)&&Jt(s=s.domProps)&&Jt(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var u=!0,l=t.firstChild,f=0;f<a.length;f++){if(!l||!C(l,a[f],n,i)){u=!1;break}l=l.nextSibling}if(!u||l)return!1}else h(e,a,n);if(Jt(r)){var p=!1;for(var g in r)if(!y(g)){p=!0,d(e,n);break}!p&&r.class&&Ii(r.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!Gt(e)){var r,c=!1,u=[];if(Gt(t))c=!0,a(e,u);else{var h=Jt(t.nodeType);if(!h&&_o(t,e))b(t,e,u,null,null,s);else{if(h){if(1===t.nodeType&&t.hasAttribute(Te)&&(t.removeAttribute(Te),n=!0),Zt(n)&&C(t,e,u))return E(e,u,!0),t;r=t,t=new tn(o.tagName(r).toLowerCase(),{},[],void 0,r)}var d=t.elm,f=o.parentNode(d);if(a(e,u,d._leaveCb?null:f,o.nextSibling(d)),Jt(e.parent))for(var p=e.parent,_=l(e);p;){for(var v=0;v<i.destroy.length;++v)i.destroy[v](p);if(p.elm=e.elm,_){for(var y=0;y<i.create.length;++y)i.create[y](go,p);var w=p.data.hook.insert;if(w.merged)for(var x=1;x<w.fns.length;x++)w.fns[x]()}else fo(p);p=p.parent}Jt(f)?m([t],0,0):Jt(t.tag)&&g(t)}}return E(e,u,c),e.elm}Jt(t)&&g(t)}}({nodeOps:ho,modules:[Fo,Oo,Wo,Xo,er,Le?{create:Br,activate:Br,remove:function(t,e){!0!==t.data.show?xr(t,e):e()}}:{}].concat(Ao)});Ne&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&Lr(t,"input")}));var Fr={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Pn(n,"postpatch",(function(){Fr.componentUpdated(t,e,n)})):Sr(t,e,n.context),t._vOptions=[].map.call(t.options,Ir)):("textarea"===n.tag||uo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Mr),t.addEventListener("compositionend",Pr),t.addEventListener("change",Pr),Ne&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Sr(t,e,n.context);var i=t._vOptions,s=t._vOptions=[].map.call(t.options,Ir);s.some((function(t,e){return!Ae(t,i[e])}))&&(t.multiple?e.value.some((function(t){return Or(t,s)})):e.value!==e.oldValue&&Or(e.value,s))&&Lr(t,"change")}}};function Sr(t,e,n){Dr(t,e),(Re||$e)&&setTimeout((function(){Dr(t,e)}),0)}function Dr(t,e,n){var i=e.value,s=t.multiple;if(!s||Array.isArray(i)){for(var o,r,a=0,c=t.options.length;a<c;a++)if(r=t.options[a],s)o=ke(i,Ir(r))>-1,r.selected!==o&&(r.selected=o);else if(Ae(Ir(r),i))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}}function Or(t,e){return e.every((function(e){return!Ae(e,t)}))}function Ir(t){return"_value"in t?t._value:t.value}function Mr(t){t.target.composing=!0}function Pr(t){t.target.composing&&(t.target.composing=!1,Lr(t.target,"input"))}function Lr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function jr(t){return!t.componentInstance||t.data&&t.data.transition?t:jr(t.componentInstance._vnode)}var Rr={model:Fr,show:{bind:function(t,e,n){var i=e.value,s=(n=jr(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&s?(n.data.show=!0,wr(n,(function(){t.style.display=o}))):t.style.display=i?o:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=jr(n)).data&&n.data.transition?(n.data.show=!0,i?wr(n,(function(){t.style.display=t.__vOriginalDisplay})):xr(n,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,s){s||(t.style.display=t.__vOriginalDisplay)}}},Nr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function $r(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?$r(di(e.children)):t}function Wr(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var s=n._parentListeners;for(var i in s)e[pe(i)]=s[i];return e}function zr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Hr=function(t){return t.tag||ii(t)},Xr=function(t){return"show"===t.name},Yr={name:"transition",props:Nr,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Hr)).length){var i=this.mode,s=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return s;var o=$r(s);if(!o)return s;if(this._leaving)return zr(t,s);var r="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?r+"comment":r+o.tag:Kt(o.key)?0===String(o.key).indexOf(r)?o.key:r+o.key:o.key;var a=(o.data||(o.data={})).transition=Wr(this),c=this._vnode,u=$r(c);if(o.data.directives&&o.data.directives.some(Xr)&&(o.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,u)&&!ii(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=Ee({},a);if("out-in"===i)return this._leaving=!0,Pn(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),zr(t,s);if("in-out"===i){if(ii(o))return c;var l,d=function(){l()};Pn(a,"afterEnter",d),Pn(a,"enterCancelled",d),Pn(h,"delayLeave",(function(t){l=t}))}}return s}}},qr=Ee({tag:String,moveClass:String},Nr);function Vr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Ur(t){t.data.newPos=t.elm.getBoundingClientRect()}function Gr(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,s=e.top-n.top;if(i||s){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate(".concat(i,"px,").concat(s,"px)"),o.transitionDuration="0s"}}delete qr.mode;var Jr={Transition:Yr,TransitionGroup:{props:qr,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var s=Hi(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,s(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,s=this.$slots.default||[],o=this.children=[],r=Wr(this),a=0;a<s.length;a++)(h=s[a]).tag&&null!=h.key&&0!==String(h.key).indexOf("__vlist")&&(o.push(h),n[h.key]=h,(h.data||(h.data={})).transition=r);if(i){var c=[],u=[];for(a=0;a<i.length;a++){var h;(h=i[a]).data.transition=r,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?c.push(h):u.push(h)}this.kept=t(e,null,c),this.removed=u}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Vr),t.forEach(Ur),t.forEach(Gr),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,i=n.style;mr(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(lr,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(lr,t),n._moveCb=null,_r(n,e))})}})))},methods:{hasMove:function(t,e){if(!ar)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){sr(n,t)})),ir(n,e),n.style.display="none",this.$el.appendChild(n);var i=Er(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};function Zr(t){const e=document.createElement("canvas"),n=e.getContext("2d"),{width:i,height:s,left:o,top:r}=t.getBoundingClientRect();e.style.width=i+"px",e.style.height=s+"px",e.style.userSelect="none";const a=window.devicePixelRatio;return e.width=Math.floor(i*a),e.height=Math.floor(s*a),t&&(t.style.position="relative",t.style.overflow="hidden",t.append(e)),{canvas:e,width:i,height:s,raw_width:e.width,raw_height:e.height,left:o,top:r,ctx:n,scale:a}}Rs.config.mustUseProp=function(t,e,n){return"value"===n&&qs(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Rs.config.isReservedTag=ao,Rs.config.isReservedAttr=Ys,Rs.config.getTagNamespace=function(t){return ro(t)?"svg":"math"===t?"math":void 0},Rs.config.isUnknownElement=function(t){if(!Le)return!0;if(ao(t))return!1;if(t=t.toLowerCase(),null!=co[t])return co[t];var e=document.createElement(t);return t.indexOf("-")>-1?co[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:co[t]=/HTMLUnknownElement/.test(e.toString())},Ee(Rs.options.directives,Rr),Ee(Rs.options.components,Jr),Rs.prototype.__patch__=Le?Tr:Ce,Rs.prototype.$mount=function(t,e){return function(t,e,n){var i;t.$el=e,t.$options.render||(t.$options.render=en),Vi(t,"beforeMount"),i=function(){t._update(t._render(),n)},new ji(t,i,Ce,{before:function(){t._isMounted&&!t._isDestroyed&&Vi(t,"beforeUpdate")}},!0),n=!1;var s=t._preWatchers;if(s)for(var o=0;o<s.length;o++)s[o].run();return null==t.$vnode&&(t._isMounted=!0,Vi(t,"mounted")),t}(this,t=t&&Le?function(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}(t):void 0,e)},Le&&setTimeout((function(){De.devtools&&Ue&&Ue.emit("init",Rs)}),0);const Kr=document.createElement("canvas");Kr.width=1,Kr.height=1;const Qr=Kr.getContext("2d"),ta=window.devicePixelRatio;function ea(t){Qr.clearRect(0,0,5,5),Qr.save(),t(Qr),Qr.restore(),Qr.clearRect(0,0,5,5)}function na(t,e){const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);function i(){console.log("devicePixelRatio changed: "+window.devicePixelRatio),t(window.devicePixelRatio),na(t,e)}e((()=>{console.log("remove devicePixelRatio event handler"),n.removeEventListener("change",i,{once:!0})})),n.addEventListener("change",i,{once:!0})}Qr.scale(ta,ta);const{abs:ia,cos:sa,sin:oa,acos:ra,atan2:aa,sqrt:ca,pow:ua}=Math;function ha(t){return t<0?-ua(-t,1/3):ua(t,1/3)}const la=Math.PI,da=2*la,fa=la/2,pa=Number.MAX_SAFE_INTEGER||9007199254740991,ga=Number.MIN_SAFE_INTEGER||-9007199254740991,ma={x:0,y:0,z:0},_a={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){const n=e(t);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),ca(i)},compute:function(t,e,n){if(0===t)return e[0].t=0,e[0];const i=e.length-1;if(1===t)return e[i].t=1,e[i];const s=1-t;let o=e;if(0===i)return e[0].t=t,e[0];if(1===i){const e={x:s*o[0].x+t*o[1].x,y:s*o[0].y+t*o[1].y,t};return n&&(e.z=s*o[0].z+t*o[1].z),e}if(i<4){let e,r,a,c=s*s,u=t*t,h=0;2===i?(o=[o[0],o[1],o[2],ma],e=c,r=s*t*2,a=u):3===i&&(e=c*s,r=c*t*3,a=s*u*3,h=t*u);const l={x:e*o[0].x+r*o[1].x+a*o[2].x+h*o[3].x,y:e*o[0].y+r*o[1].y+a*o[2].y+h*o[3].y,t};return n&&(l.z=e*o[0].z+r*o[1].z+a*o[2].z+h*o[3].z),l}const r=JSON.parse(JSON.stringify(e));for(;r.length>1;){for(let e=0;e<r.length-1;e++)r[e]={x:r[e].x+(r[e+1].x-r[e].x)*t,y:r[e].y+(r[e+1].y-r[e].y)*t},void 0!==r[e].z&&(r[e]=r[e].z+(r[e+1].z-r[e].z)*t);r.splice(r.length-1,1)}return r[0].t=t,r[0]},computeWithRatios:function(t,e,n,i){const s=1-t,o=n,r=e;let a,c=o[0],u=o[1],h=o[2],l=o[3];return c*=s,u*=t,2===r.length?(a=c+u,{x:(c*r[0].x+u*r[1].x)/a,y:(c*r[0].y+u*r[1].y)/a,z:!!i&&(c*r[0].z+u*r[1].z)/a,t}):(c*=s,u*=2*s,h*=t*t,3===r.length?(a=c+u+h,{x:(c*r[0].x+u*r[1].x+h*r[2].x)/a,y:(c*r[0].y+u*r[1].y+h*r[2].y)/a,z:!!i&&(c*r[0].z+u*r[1].z+h*r[2].z)/a,t}):(c*=s,u*=1.5*s,h*=3*s,l*=t*t*t,4===r.length?(a=c+u+h+l,{x:(c*r[0].x+u*r[1].x+h*r[2].x+l*r[3].x)/a,y:(c*r[0].y+u*r[1].y+h*r[2].y+l*r[3].y)/a,z:!!i&&(c*r[0].z+u*r[1].z+h*r[2].z+l*r[3].z)/a,t}):void 0))},derive:function(t,e){const n=[];for(let i=t,s=i.length,o=s-1;s>1;s--,o--){const t=[];for(let n,s=0;s<o;s++)n={x:o*(i[s+1].x-i[s].x),y:o*(i[s+1].y-i[s].y)},e&&(n.z=o*(i[s+1].z-i[s].z)),t.push(n);n.push(t),i=t}return n},between:function(t,e,n){return e<=t&&t<=n||_a.approximately(t,e)||_a.approximately(t,n)},approximately:function(t,e,n){return ia(t-e)<=(n||1e-6)},length:function(t){const e=_a.Tvalues.length;let n=0;for(let i,s=0;s<e;s++)i=.5*_a.Tvalues[s]+.5,n+=_a.Cvalues[s]*_a.arcfn(i,t);return.5*n},map:function(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)},lerp:function(t,e,n){const i={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return void 0!==e.z&&void 0!==n.z&&(i.z=e.z+t*(n.z-e.z)),i},pointToString:function(t){let e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(_a.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,o=n.x-t.x,r=n.y-t.y;return aa(i*r-s*o,i*o+s*r)},round:function(t,e){const n=""+t,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(t,e){const n=t.x-e.x,i=t.y-e.y;return ca(n*n+i*i)},closest:function(t,e){let n,i,s=ua(2,63);return t.forEach((function(t,o){i=_a.dist(e,t),i<s&&(s=i,n=o)})),{mdist:s,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=ua(t,e)+ua(1-t,e);return ia((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=ua(1-t,e);return n/(ua(t,e)+n)},lli8:function(t,e,n,i,s,o,r,a){const c=(t-n)*(o-a)-(e-i)*(s-r);return 0!=c&&{x:((t*i-e*n)*(s-r)-(t-n)*(s*a-o*r))/c,y:((t*i-e*n)*(o-a)-(e-i)*(s*a-o*r))/c}},lli4:function(t,e,n,i){const s=t.x,o=t.y,r=e.x,a=e.y,c=n.x,u=n.y,h=i.x,l=i.y;return _a.lli8(s,o,r,a,c,u,h,l)},lli:function(t,e){return _a.lli4(t,t.c,e,e.c)},makeline:function(t,e){const n=t.x,i=t.y,s=e.x,o=e.y,r=(s-n)/3,a=(o-i)/3;return new Ba(n,i,n+r,i+a,n+2*r,i+2*a,s,o)},findbbox:function(t){let e=pa,n=pa,i=ga,s=ga;return t.forEach((function(t){const o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),s<o.y.max&&(s=o.y.max)})),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(t,e,n,i,s){if(!_a.bboxoverlap(e,i))return[];const o=[],r=[t.startcap,t.forward,t.back,t.endcap],a=[n.startcap,n.forward,n.back,n.endcap];return r.forEach((function(e){e.virtual||a.forEach((function(i){if(i.virtual)return;const r=e.intersects(i,s);r.length>0&&(r.c1=e,r.c2=i,r.s1=t,r.s2=n,o.push(r))}))})),o},makeshape:function(t,e,n){const i=e.points.length,s=t.points.length,o=_a.makeline(e.points[i-1],t.points[0]),r=_a.makeline(t.points[s-1],e.points[0]),a={startcap:o,forward:t,back:e,endcap:r,bbox:_a.findbbox([o,t,e,r]),intersections:function(t){return _a.shapeintersections(a,a.bbox,t,t.bbox,n)}};return a},getminmax:function(t,e,n){if(!n)return{min:0,max:0};let i,s,o=pa,r=ga;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let a=0,c=n.length;a<c;a++)i=n[a],s=t.get(i),s[e]<o&&(o=s[e]),s[e]>r&&(r=s[e]);return{min:o,mid:(o+r)/2,max:r,size:r-o}},align:function(t,e){const n=e.p1.x,i=e.p1.y,s=-aa(e.p2.y-i,e.p2.x-n);return t.map((function(t){return{x:(t.x-n)*sa(s)-(t.y-i)*oa(s),y:(t.x-n)*oa(s)+(t.y-i)*sa(s)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=t.length-1,i=_a.align(t,e),s=function(t){return 0<=t&&t<=1};if(2===n){const t=i[0].y,e=i[1].y,n=i[2].y,o=t-2*e+n;if(0!==o){const i=-ca(e*e-t*n),r=-t+e;return[-(i+r)/o,-(-i+r)/o].filter(s)}return e!==n&&0===o?[(2*e-n)/(2*e-2*n)].filter(s):[]}const o=i[0].y,r=i[1].y,a=i[2].y;let c=3*r-o-3*a+i[3].y,u=3*o-6*r+3*a,h=-3*o+3*r,l=o;if(_a.approximately(c,0)){if(_a.approximately(u,0))return _a.approximately(h,0)?[]:[-l/h].filter(s);const t=ca(h*h-4*u*l),e=2*u;return[(t-h)/e,(-h-t)/e].filter(s)}u/=c,h/=c,l/=c;const d=(3*h-u*u)/3,f=d/3,p=(2*u*u*u-9*u*h+27*l)/27,g=p/2,m=g*g+f*f*f;let _,v,b,E,y;if(m<0){const t=-d/3,e=ca(t*t*t),n=-p/(2*e),i=ra(n<-1?-1:n>1?1:n),o=2*ha(e);return b=o*sa(i/3)-u/3,E=o*sa((i+da)/3)-u/3,y=o*sa((i+2*da)/3)-u/3,[b,E,y].filter(s)}if(0===m)return _=g<0?ha(-g):-ha(g),b=2*_-u/3,E=-_-u/3,[b,E].filter(s);{const t=ca(m);return _=ha(-g+t),v=ha(g+t),[_-v-u/3].filter(s)}},droots:function(t){if(3===t.length){const e=t[0],n=t[1],i=t[2],s=e-2*n+i;if(0!==s){const t=-ca(n*n-e*i),o=-e+n;return[-(t+o)/s,-(-t+o)/s]}return n!==i&&0===s?[(2*n-i)/(2*(n-i))]:[]}if(2===t.length){const e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(t,e,n,i,s){let o,r,a,c,u=0,h=0;const l=_a.compute(t,e),d=_a.compute(t,n),f=l.x*l.x+l.y*l.y;if(i?(o=ca(ua(l.y*d.z-d.y*l.z,2)+ua(l.z*d.x-d.z*l.x,2)+ua(l.x*d.y-d.x*l.y,2)),r=ua(f+l.z*l.z,1.5)):(o=l.x*d.y-l.y*d.x,r=ua(f,1.5)),0===o||0===r)return{k:0,r:0};if(u=o/r,h=r/o,!s){const s=_a.curvature(t-.001,e,n,i,!0).k,o=_a.curvature(t+.001,e,n,i,!0).k;c=(o-u+(u-s))/2,a=(ia(o-u)+ia(u-s))/2}return{k:u,r:h,dk:c,adk:a}},inflections:function(t){if(t.length<4)return[];const e=_a.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=18*(-3*n+2*i+3*s-e[3].x*e[2].y),r=18*(3*n-i-3*s),a=18*(s-n);if(_a.approximately(o,0)){if(!_a.approximately(r,0)){let t=-a/r;if(0<=t&&t<=1)return[t]}return[]}const c=r*r-4*o*a,u=Math.sqrt(c),h=2*o;return _a.approximately(h,0)?[]:[(u-r)/h,-(r+u)/h].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){const n=["x","y"],i=n.length;for(let s,o,r,a,c=0;c<i;c++)if(s=n[c],o=t[s].mid,r=e[s].mid,a=(t[s].size+e[s].size)/2,ia(o-r)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){const i=t.bbox(),s=e.bbox(),o=1e5,r=n||.5;if(i.x.size+i.y.size<r&&s.x.size+s.y.size<r)return[(o*(t._t1+t._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let a=t.split(.5),c=e.split(.5),u=[{left:a.left,right:c.left},{left:a.left,right:c.right},{left:a.right,right:c.right},{left:a.right,right:c.left}];u=u.filter((function(t){return _a.bboxoverlap(t.left.bbox(),t.right.bbox())}));let h=[];return 0===u.length||(u.forEach((function(t){h=h.concat(_a.pairiteration(t.left,t.right,r))})),h=h.filter((function(t,e){return h.indexOf(t)===e}))),h},getccenter:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,o=n.x-e.x,r=n.y-e.y,a=i*sa(fa)-s*oa(fa),c=i*oa(fa)+s*sa(fa),u=o*sa(fa)-r*oa(fa),h=o*oa(fa)+r*sa(fa),l=(t.x+e.x)/2,d=(t.y+e.y)/2,f=(e.x+n.x)/2,p=(e.y+n.y)/2,g=l+a,m=d+c,_=f+u,v=p+h,b=_a.lli8(l,d,g,m,f,p,_,v),E=_a.dist(b,t);let y,C=aa(t.y-b.y,t.x-b.x),w=aa(e.y-b.y,e.x-b.x),x=aa(n.y-b.y,n.x-b.x);return C<x?((C>w||w>x)&&(C+=da),C>x&&(y=x,x=C,C=y)):x<w&&w<C?(y=x,x=C,C=y):x+=da,b.s=C,b.e=x,b.r=E,b},numberSort:function(t,e){return t-e}};class va{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return _a.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var e=t[0].bbox(),n=1;n<t.length;n++)_a.expandbox(e,t[n].bbox());return e}offset(t){const e=[];return this.curves.forEach((function(n){e.push(...n.offset(t))})),new va(e)}}const{abs:ba,min:Ea,max:ya,cos:Ca,sin:wa,acos:xa,sqrt:Aa}=Math,ka=Math.PI;class Ba{constructor(t){let e=t&&t.forEach?t:Array.from(arguments).slice(),n=!1;if("object"==typeof e[0]){n=e.length;const t=[];e.forEach((function(e){["x","y","z"].forEach((function(n){void 0!==e[n]&&t.push(e[n])}))})),e=t}let i=!1;const s=e.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!i&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z,r=this.points=[];for(let t=0,n=o?3:2;t<s;t+=n){var a={x:e[t],y:e[t+1]};o&&(a.z=e[t+2]),r.push(a)}const c=this.order=r.length-1,u=this.dims=["x","y"];o&&u.push("z"),this.dimlen=u.length;const h=_a.align(r,{p1:r[0],p2:r[c]});this._linear=!h.some((t=>ba(t.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,e,n,i){if(void 0===i&&(i=.5),0===i)return new Ba(e,e,n);if(1===i)return new Ba(t,e,e);const s=Ba.getABC(2,t,e,n,i);return new Ba(t,s.A,n)}static cubicFromPoints(t,e,n,i,s){void 0===i&&(i=.5);const o=Ba.getABC(3,t,e,n,i);void 0===s&&(s=_a.dist(e,o.C));const r=s*(1-i)/i,a=_a.dist(t,n),c=(n.x-t.x)/a,u=(n.y-t.y)/a,h=s*c,l=s*u,d=r*c,f=r*u,p=e.x-h,g=e.y-l,m=e.x+d,_=e.y+f,v=o.A,b=v.x+(p-v.x)/(1-i),E=v.y+(g-v.y)/(1-i),y=v.x+(m-v.x)/i,C=v.y+(_-v.y)/i,w={x:t.x+(b-t.x)/i,y:t.y+(E-t.y)/i},x={x:n.x+(y-n.x)/(1-i),y:n.y+(C-n.y)/(1-i)};return new Ba(t,w,x,n)}static getUtils(){return _a}getUtils(){return Ba.getUtils()}static get PolyBezier(){return va}valueOf(){return this.toString()}toString(){return _a.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,e=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let n=1,i=t.length;n<i;n++)e.push(t[n].x),e.push(t[n].y);return e.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=_a.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,e=_a.angle(t[0],t[this.order],t[1]);this.clockwise=e>0}length(){return _a.length(this.derivative.bind(this))}static getABC(t=2,e,n,i,s=.5){const o=_a.projectionratio(s,t),r=1-o,a={x:o*e.x+r*i.x,y:o*e.y+r*i.y},c=_a.abcratio(s,t);return{A:{x:n.x+(n.x-a.x)/c,y:n.y+(n.y-a.y)/c},B:n,C:a,S:e,E:i}}getABC(t,e){e=e||this.get(t);let n=this.points[0],i=this.points[this.order];return Ba.getABC(this.order,n,e,i,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(let e,n,i=0;i<t;i++)n=i/(t-1),e=this.compute(n),e.t=n,this._lut.push(e);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),s=[];for(let t,o=0,r=0;o<i.length;o++)t=i[o],_a.dist(t,e)<n&&(s.push(t),r+=o/i.length);return!!s.length&&(t/=s.length)}project(t){const e=this.getLUT(),n=e.length-1,i=_a.closest(e,t),s=i.mpos,o=(s-1)/n,r=(s+1)/n,a=.1/n;let c,u=i.mdist,h=o,l=h;u+=1;for(let e;h<r+a;h+=a)c=this.compute(h),e=_a.dist(t,c),e<u&&(u=e,l=h);return l=l<0?0:l>1?1:l,c=this.compute(l),c.t=l,c.d=u,c}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?_a.computeWithRatios(t,this.points,this.ratios,this._3d):_a.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,e=[t[0]],n=t.length;for(let i,s,o=1;o<n;o++)i=t[o],s=t[o-1],e[o]={x:(n-o)/n*i.x+o/n*s.x,y:(n-o)/n*i.y+o/n*s.y};return e[n]=t[n-1],new Ba(e)}derivative(t){return _a.compute(t,this.dpoints[0],this._3d)}dderivative(t){return _a.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new Ba(_a.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return _a.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _a.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const e=this.derivative(t),n=Aa(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}}__normal3(t){const e=this.derivative(t),n=this.derivative(t+.01),i=Aa(e.x*e.x+e.y*e.y+e.z*e.z),s=Aa(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=i,e.y/=i,e.z/=i,n.x/=s,n.y/=s,n.z/=s;const o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},r=Aa(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=r,o.y/=r,o.z/=r;const a=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z}}hull(t){let e=this.points,n=[],i=[],s=0;for(i[s++]=e[0],i[s++]=e[1],i[s++]=e[2],3===this.order&&(i[s++]=e[3]);e.length>1;){n=[];for(let o,r=0,a=e.length-1;r<a;r++)o=_a.lerp(t,e[r],e[r+1]),i[s++]=o,n.push(o);e=n}return i}split(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;const n=this.hull(t),i={left:2===this.order?new Ba([n[0],n[3],n[5]]):new Ba([n[0],n[4],n[7],n[9]]),right:2===this.order?new Ba([n[5],n[4],n[2]]):new Ba([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=_a.map(0,0,1,this._t1,this._t2),i.left._t2=_a.map(t,0,1,this._t1,this._t2),i.right._t1=_a.map(t,0,1,this._t1,this._t2),i.right._t2=_a.map(1,0,1,this._t1,this._t2),e?(e=_a.map(e,t,1,0,1),i.right.split(e).left):i}extrema(){const t={};let e=[];return this.dims.forEach(function(n){let i=function(t){return t[n]},s=this.dpoints[0].map(i);t[n]=_a.droots(s),3===this.order&&(s=this.dpoints[1].map(i),t[n]=t[n].concat(_a.droots(s))),t[n]=t[n].filter((function(t){return t>=0&&t<=1})),e=e.concat(t[n].sort(_a.numberSort))}.bind(this)),t.values=e.sort(_a.numberSort).filter((function(t,n){return e.indexOf(t)===n})),t}bbox(){const t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=_a.getminmax(this,n,t[n])}.bind(this)),e}overlaps(t){const e=this.bbox(),n=t.bbox();return _a.bboxoverlap(e,n)}offset(t,e){if(void 0!==e){const n=this.get(t),i=this.normal(t),s={c:n,n:i,x:n.x+i.x*e,y:n.y+i.y*e};return this._3d&&(s.z=n.z+i.z*e),s}if(this._linear){const e=this.normal(0),n=this.points.map((function(n){const i={x:n.x+t*e.x,y:n.y+t*e.y};return n.z&&e.z&&(i.z=n.z+t*e.z),i}));return[new Ba(n)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}simple(){if(3===this.order){const t=_a.angle(this.points[0],this.points[3],this.points[1]),e=_a.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&e<0||t<0&&e>0)return!1}const t=this.normal(0),e=this.normal(1);let n=t.x*e.x+t.y*e.y;return this._3d&&(n+=t.z*e.z),ba(xa(n))<ka/3}reduce(){let t,e,n=0,i=0,s=.01,o=[],r=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],t=1;t<a.length;t++)i=a[t],e=this.split(n,i),e._t1=n,e._t2=i,o.push(e),n=i;return o.forEach((function(t){for(n=0,i=0;i<=1;)for(i=n+s;i<=1.01;i+=s)if(e=t.split(n,i),!e.simple()){if(i-=s,ba(n-i)<s)return[];e=t.split(n,i),e._t1=_a.map(n,0,1,t._t1,t._t2),e._t2=_a.map(i,0,1,t._t1,t._t2),r.push(e),n=i;break}n<1&&(e=t.split(n,1),e._t1=_a.map(n,0,1,t._t1,t._t2),e._t2=t._t2,r.push(e))})),r}scale(t){const e=this.order;let n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);const i=this.clockwise,s=n?n(0):t,o=n?n(1):t,r=[this.offset(0,10),this.offset(1,10)],a=this.points,c=[],u=_a.lli4(r[0],r[0].c,r[1],r[1].c);if(!u)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const n=c[t*e]=_a.copy(a[t*e]);n.x+=(t?o:s)*r[t].n.x,n.y+=(t?o:s)*r[t].n.y})),n?([0,1].forEach((function(s){if(2!==e||!s){var o=a[s+1],r={x:o.x-u.x,y:o.y-u.y},h=n?n((s+1)/e):t;n&&!i&&(h=-h);var l=Aa(r.x*r.x+r.y*r.y);r.x/=l,r.y/=l,c[s+1]={x:o.x+h*r.x,y:o.y+h*r.y}}})),new Ba(c)):([0,1].forEach((t=>{if(2===e&&t)return;const n=c[t*e],i=this.derivative(t),s={x:n.x+i.x,y:n.y+i.y};c[t+1]=_a.lli4(n,s,u,a[t+1])})),new Ba(c))}outline(t,e,n,i){e=void 0===e?t:e;const s=this.reduce(),o=s.length,r=[];let a,c=[],u=0,h=this.length();const l=void 0!==n&&void 0!==i;function d(t,e,n,i,s){return function(o){const r=i/n,a=(i+s)/n,c=e-t;return _a.map(o,0,1,t+r*c,t+a*c)}}s.forEach((function(s){const o=s.length();l?(r.push(s.scale(d(t,n,h,u,o))),c.push(s.scale(d(-e,-i,h,u,o)))):(r.push(s.scale(t)),c.push(s.scale(-e))),u+=o})),c=c.map((function(t){return a=t.points,a[3]?t.points=[a[3],a[2],a[1],a[0]]:t.points=[a[2],a[1],a[0]],t})).reverse();const f=r[0].points[0],p=r[o-1].points[r[o-1].points.length-1],g=c[o-1].points[c[o-1].points.length-1],m=c[0].points[0],_=_a.makeline(g,f),v=_a.makeline(p,m),b=[_].concat(r).concat([v]).concat(c);return b.length,new va(b)}outlineshapes(t,e,n){e=e||t;const i=this.outline(t,e).curves,s=[];for(let t=1,e=i.length;t<e/2;t++){const o=_a.makeshape(i[t],i[e-t],n);o.startcap.virtual=t>1,o.endcap.virtual=t<e/2-1,s.push(o)}return s}intersects(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof Ba&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)}lineIntersects(t){const e=Ea(t.p1.x,t.p2.x),n=Ea(t.p1.y,t.p2.y),i=ya(t.p1.x,t.p2.x),s=ya(t.p1.y,t.p2.y);return _a.roots(this.points,t).filter((t=>{var o=this.get(t);return _a.between(o.x,e,i)&&_a.between(o.y,n,s)}))}selfintersects(t){const e=this.reduce(),n=e.length-2,i=[];for(let s,o,r,a=0;a<n;a++)o=e.slice(a,a+1),r=e.slice(a+2),s=this.curveintersects(o,r,t),i.push(...s);return i}curveintersects(t,e,n){const i=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&i.push({left:t,right:e})}))}));let s=[];return i.forEach((function(t){const e=_a.pairiteration(t.left,t.right,n);e.length>0&&(s=s.concat(e))})),s}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,e,n,i){const s=(i-n)/4,o=this.get(n+s),r=this.get(i-s),a=_a.dist(t,e),c=_a.dist(t,o),u=_a.dist(t,r);return ba(c-a)+ba(u-a)}_iterate(t,e){let n,i=0,s=1;do{n=0,s=1;let o,r,a,c,u,h=this.get(i),l=!1,d=!1,f=s,p=1,g=0;do{if(d=l,c=a,f=(i+s)/2,g++,o=this.get(f),r=this.get(s),a=_a.getccenter(h,o,r),a.interval={start:i,end:s},l=this._error(a,h,i,s)<=t,u=d&&!l,u||(p=s),l){if(s>=1){if(a.interval.end=p=1,c=a,s>1){let t={x:a.x+a.r*Ca(a.e),y:a.y+a.r*wa(a.e)};a.e+=_a.angle({x:a.x,y:a.y},t,this.get(1))}break}s+=(s-i)/2}else s=f}while(!u&&n++<100);if(n>=100)break;c=c||a,e.push(c),i=p}while(s<1);return e}}const Ta={RIGHT:0,BOTTOM:1,LEFT:2,TOP:3,SELF:100},Fa={DEFAULT:"DEFAULT",LINKING:"LINKING"};function Sa(t){if(0===t.length)return{width:1,height:1,x:0,y:0};let e=1/0,n=1/0,i=-1/0,s=-1/0;for(let o in t){const r=t[o];r[0]<e&&(e=r[0]),r[0]>i&&(i=r[0]),r[1]<n&&(n=r[1]),r[1]>s&&(s=r[1])}return{width:Math.max(i-e,10),height:Math.max(s-n,10),x:e,y:n}}function Da(t){return t*t}function Oa(t,e){return Da(t[0]-e[0])+Da(t[1]-e[1])}function Ia(t,e,n){const i=Oa(e,n);if(0===i)return Oa(t,e);let s=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/i;return s=Math.max(0,Math.min(1,s)),Oa(t,[e[0]+s*(n[0]-e[0]),e[1]+s*(n[1]-e[1])])}function Ma(t,e){const n={fromDir:null,fromP:null,toDir:null,toP:null,distMin:1/0};return Object.keys(t).forEach((i=>{if(+i===Ta.SELF)return;let s=t[i];Object.keys(e).forEach((t=>{if(+t===Ta.SELF)return;let o=e[t];const r=Oa(s,o);r<n.distMin&&Object.assign(n,{distMin:r,fromDir:+i,fromP:s,toDir:+t,toP:o})}))})),n}function Pa(t,e,n,i){return e===Ta.TOP?[t[0],t[1]-i]:e===Ta.BOTTOM?[t[0],t[1]+i]:e===Ta.LEFT?[t[0]-n,t[1]]:e===Ta.RIGHT?[t[0]+n,t[1]]:void 0}function La(t,e,n=Ta.TOP,i=Ta.TOP,s=0,o=0){const r=Math.max(Math.abs((t[0]-e[0])/2),s),a=Math.max(Math.abs((t[1]-e[1])/2),o),c=Pa(t,n,r,a),u=Pa(e,i,r,a),h=[Ta.TOP,Ta.LEFT].includes(i)?-5:5,l=[Ta.TOP,Ta.BOTTOM].includes(i);return[...c,...u,l?e[0]:e[0]+h,l?e[1]+h:e[1]]}function ja(t,e,n,i,s,o,r,a,c){var u=Math.pow(1-t,2)*(i-e)+2*t*(1-t)*(o-i)+t*t*(a-o),h=Math.pow(1-t,2)*(s-n)+2*t*(1-t)*(r-s)+t*t*(c-r);return-Math.atan2(u,h)+.5*Math.PI}function Ra(t,e,n,i=Ta.TOP,s=Ta.TOP,o=10,r=10,a){const c=Math.abs(i-s),u=i===Ta.TOP||i===Ta.BOTTOM;switch(t.length=0,c){case 0:if(i===Ta.TOP){const i=Math.min(e[1],n[1])-r;t.push([e[0],i]),t.push([n[0],i])}if(i===Ta.BOTTOM){const i=Math.max(e[1],n[1])+r;t.push([e[0],i]),t.push([n[0],i])}if(i===Ta.LEFT){const i=Math.min(e[0],n[0])-o;t.push([i,e[1]]),t.push([i,n[1]])}if(i===Ta.RIGHT){const i=Math.max(e[0],n[0])+o;t.push([i,e[1]]),t.push([i,n[1]])}break;case 1:case 3:if(a)u?(t.push([e[0],e[1]+r]),t.push([n[0]+o,e[1]+r]),t.push([n[0]+o,n[1]])):(t.push([e[0]+o,e[1]]),t.push([e[0]+o,n[1]+r]),t.push([n[0],n[1]+r]));else{const i=u?[e[0],n[1]]:[n[0],e[1]];t.push(i)}break;case 2:const s=[(e[0]-n[0])/2+n[0],(e[1]-n[1])/2+n[1]];u?(t.push([e[0],s[1]]),t.push([n[0],s[1]])):(t.push([s[0],e[1]]),t.push([s[0],n[1]]))}t.unshift(e),t.push(n)}function Na(t,e){return[t[0]-e[0],t[1]-e[1]]}function $a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wa(t,e){return[t[0]*e,t[1]*e]}function za(t,e){return t[0]!=t[2]&&t[1]!=t[3]&&e[0]!=e[2]&&e[1]!=e[3]&&!(t[2]<=e[0]||t[3]<=e[1]||t[0]>=e[2]||t[1]>=e[3])}function Ha(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Xa(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]}const Ya=Symbol("ishit"),qa=Symbol("isInViewBox");class Va extends EventTarget{constructor(t={}){super(),Object.assign(this,t),this.visible=!0,this._belongs=void 0,this[Ya]=!1,this.borderWidth=t.borderWidth||0,this.borderColor=t.borderColor||"transparent",this.backgroundColor=t.backgroundColor||"transparent",this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur||5,this.shadowOffsetX=t.shadowOffsetX||0,this.shadowOffsetY=t.shadowOffsetY||0,this.opacity=t.opacity||1,this._boundingrect=[0,0,0,0]}get _isTargeting(){return this===(this._jflow._target.instance||this._jflow._target.link)}get _isMoving(){return this===this._jflow._getMovingTarget()&&this._jflow._target.status.movingState}get _isHit(){return this[Ya]}get _jflow(){return"jflow"===this._belongs.uniqueName?this._belongs:this._belongs._jflow}set _isHit(t){this[Ya]!==t&&this.dispatchEvent(new CustomEvent(t?"mouseenter":"mouseleave",{detail:{instance:this,jflow:this._jflow}})),this[Ya]=t}get isInViewBox(){return this[qa]}set _isInViewBox(t){t!==this[qa]&&(t?this.onEnterViewbox():this.onLeaveViewbox()),this[qa]=t}onEnterViewbox(){}onLeaveViewbox(){}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e])}))}render(t){throw"require render implement"}isHit(t){throw"require isHit implement"}getBoundingRect(){throw"require getBoundingRect implement"}calculateIntersection(){throw"require calculateIntersection implement"}getIntersectionsInFourDimension(){throw"require getIntersectionsInFourDimension implement"}getCenter(){return this.anchor}getBoundingDimension(){const t=instance.getBoundingRect();let e=1/0,n=-1/0,i=1/0,s=-1/0;return t.forEach((t=>{n=Math.max(n,t[1]),e=Math.min(e,t[1]),s=Math.max(s,t[0]),i=Math.min(i,t[0])})),{height:n-e,width:s-i}}bubbleEvent(t){t.detail.currentTarget=this,this.dispatchEvent(t),t.detail.bubbles&&(this._belongs.bubbleEvent?this._belongs.bubbleEvent(t):this._belongs.dispatchEvent(t))}calculateToRealWorld(t){return this._belongs&&this._belongs.calculateToRealWorld?this._belongs.calculateToRealWorld(t):t}calculateToRealWorldWithScalar(t){return this._jflow.scale*t}recalculateUp(){this.belongs&&this.belongs.recalculateUp()}destroy(){}}const Ua=Va,Ga=class extends Ua{constructor(t={}){super(t),this._rawConfigs=t,this.anchor=t.anchor||[0,0],this.absolutePosition=t.absolutePosition}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])}))}setAnchorX(t){this.anchor[0]=t}setAnchorY(t){this.anchor[1]=t}setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e}beforeRender(){return za(this._belongs._getViewBox(),this.getBoundingRect())}clone(){const t=new(0,this.constructor)(this._rawConfigs);return t.visible=this.visible,t}},Ja=class extends Ga{constructor(t){super(t)}render(t){}isHit(t){return!1}calculateIntersection(t){return this.anchor}getBoundingRect(){const[t,e]=this.anchor;return[t,e,t,e]}getBoundingDimension(){return{width:0,height:0}}getIntersectionsInFourDimension(){const[t,e]=this.anchor;return{[Ta.RIGHT]:[t+1,e],[Ta.LEFT]:[t-1,e],[Ta.BOTTOM]:[t,e+1],[Ta.TOP]:[t,e-1]}}};class Za{constructor(){this._map=new WeakMap}get(t){return this._map.get(t)}set(t){const e={layoutNode:void 0,jflowNode:void 0,jflowlinks:[],jflowFromLinks:[],jflowToLinks:[]};return this._map.set(t,e),e}has(t){return this._map.has(t)}delete(t){this._map.delete(t)}clear(){this._map.clear()}}const Ka={initNodeWeakMap(){this.source_Layout_Render_NodeMap=new Za},getRenderNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.jflowNode},getLayoutNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.layoutNode},getSourceRenderMeta(t){return this.source_Layout_Render_NodeMap.get(t)},_getMap(t){const e=this.source_Layout_Render_NodeMap;let n;return n=e.has(t)?e.get(t):e.set(t),n},setLayoutNodeBySource(t,e){this._getMap(t).layoutNode=e},setRenderNodeBySource(t,e){this._getMap(t).jflowNode=e},addLinkNodeBySource(t,e,n){let i=this._getMap(t);i.jflowFromLinks.push(n),i=this._getMap(e),i.jflowToLinks.push(n)},removeLinkNodeBySource(t,e,n){let i=this._getMap(t),s=i.jflowFromLinks.findIndex((t=>t===n));-1!==s&&i.jflowFromLinks.splice(s,1),i=this._getMap(e),s=i.jflowToLinks.findIndex((t=>t===n)),-1!==s&&i.jflowToLinks.splice(s,1)}},Qa=class extends Array{constructor(){super(),this._currentHit=null}render(t,e){let n;this.forEach((i=>{if(i._isMoving)n=i;else if(i.visible&&(!e||e(i))){if(i.beforeRender&&!i.beforeRender(t))return;t.save(),i.render(t),t.restore()}})),n&&(t.save(),n.render(t),t.restore())}resetHitStatus(){this._currentHit=null,this.forEach((t=>{t._stack&&t._stack.resetHitStatus(),t._isHit=!1}))}checkHit(t,e,n){let i=this.length-1;for(;i>=0;){const s=this[i];if(s.visible&&!s.ignoreHit){if(e&&e(s)){i--;continue}if(n&&!n(s)){i--;continue}const o=s.isHit(t,e);if(o)return this._currentHit!==s&&(this._currentHit&&(this._currentHit._isHit=!1),s._isHit=!0,this._currentHit=s),"boolean"!=typeof o?o:s;s._isHit=!1}i--}return this._currentHit=null,null}getBoundingRectPoints(){const t=[];return this.forEach((e=>{if(e.visible&&!e.absolutePosition){const n=e.getBoundingRect();t.push([n[0],n[1]]),t.push([n[2],n[3]])}})),t}getAnchorRectPoints(){const t=[];return this.forEach((e=>{e.visible&&!e.absolutePosition&&t.push(e.anchor)})),t}},tc={instances:[],links:[],_stack:null,_linkStack:null,initStack({data:t}){this._stack=new Qa,this._linkStack=new Qa,t&&(this.instances=t.instances,this.links=t.links,this.instances.forEach((t=>{this._stack.push(t),t._belongs=this})),this.links.forEach((t=>{this._linkStack.push(t),t._belongs=this})))},addToStack(t){t._belongs=this,this._stack.push(t)},replaceFromStack(t,e){const n=this._stack.findIndex((e=>e===t));this._stack.splice(n,1,e),t._belongs=null,e._belongs=this},addToLinkStack(t){t._belongs=this,this._linkStack.push(t)},removeFromStack(t){const e=this._stack.findIndex((e=>e===t));-1!==e&&this._stack.splice(e,1)},removeFromLinkStack(t){const e=this._linkStack.findIndex((e=>e===t));-1!==e&&this._linkStack.splice(e,1)},emptyLink(){this._linkStack=new Qa},resetChildrenPosition(){this._stack.forEach((t=>{t.anchor=[0,0]}))},addInstanceToLink(t,e){this.addToStack(e);const{from:n,to:i}=t,s=this._linkStack.findIndex((e=>e===t)),o=t.__proto__.constructor,r=new o({from:n,to:e});r._belongs=this;const a=new o({from:e,to:i});a._belongs=this,this._linkStack.splice(s,1,r,a)},interateNodeStack(t){this._stack.forEach((e=>{t(e)}))}},ec=tc,nc={_layout:null,initLayout(t){this._layout=t.layout},recalculateUp(){let t=!0;if(this.getBoundingDimension){const{width:e,height:n}=this.getBoundingDimension();this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const{width:i,height:s}=this.getBoundingDimension();t=e!==i||n!==s}else this.reflow();this._belongs&&t&&this._belongs.recalculateUp()},recalculate(){this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect()},staticCheck(t){return!!this._layout&&this._layout.staticCheck(t,this)},reflow(){this._layout&&this._layout.reflow(this)}},ic={_message:null,sendMessage(t){this._message=t},consumeMessage(){const t=this._message;return this._message=null,t},readMessage(){return this._message}},sc={initAnime(){this.anime_queue=[],this.__animeClock__=void 0},requestJFlowAnime(t){const e=this.enqueueAnime(t);return this._runAnime(),e},enqueueAnime(t){const e={start:void 0,callback:t,cancel:()=>{this._cancelAnime(e),this._render()}};return this.anime_queue.push(e),e},_cancelAnime(t){const e=this.anime_queue.findIndex((e=>e===t));~e&&this.anime_queue.splice(e,1)},runAnime(){this._runAnime()},_runAnime(){this.anime_queue.length&&requestAnimationFrame((()=>{this.scheduleRender(),this._runAnime()}))},runAnimeFrame(){this.anime_queue.forEach((t=>{const e=Date.now();t.start||(t.start=e);const n=e-t.start;t.callback(n)}))}},oc={captureMap(t,{padding:e=0,placement:n="normal"}){this._getBoundingGroupRect();const{width:i,height:s,x:o,y:r}=this.bounding_box;if(!this.miniMap){this.miniMap=Zr(t);const{width:e,height:n,raw_width:i,raw_height:s}=this.miniMap;this.addEventListener("zoompan",(()=>{this._renderMap&&this._renderMap()}));let o=!1;this.miniMap.canvas.addEventListener("pointerdown",(t=>{let{offsetX:e,offsetY:n,deltaX:i,deltaY:s}=t;o=!0,this._onMoveMap&&this._onMoveMap(e,n)})),this.miniMap.canvas.addEventListener("pointermove",(t=>{let{offsetX:i,offsetY:s,deltaX:r,deltaY:a}=t;o&&this._onMoveMap&&this._onMoveMap(i,s),(s<5||i<5||i>e-5||s>n-5)&&(o=!1)})),this.miniMap.canvas.addEventListener("pointerup",(()=>{o=!1}));const r=document.createElement("canvas");r.width=i,r.height=s,this.cacheMinimapCtx=r.getContext("2d")}const{width:a,height:c,raw_width:u,raw_height:h,left:l,top:d,scale:f,ctx:p}=this.miniMap,g=2*e,m=e,_=(a-g)/i,v=(c-g)/s,b=Math.min(_,v);let E=0,y=0;"center"===n?(y=(c-s*b)/2-r*b,E=(a-i*b)/2-o*b):_<v?(y=(c-s*b)/2-r*b,E=m):(E=(a-i*b)/2-o*b,y=m);const C=this.cacheMinimapCtx;C.setTransform(),C.clearRect(0,0,u,h),C.scale(f,f),C.transform(b,0,0,b,E,y);const w=[0,0,0,0];this.NodeRenderTop?(this._linkStack.render(C,(t=>(t.isInViewBox(w),!0))),this._stack.render(C)):(this._stack.render(C),this._linkStack.render(C,(t=>(t.isInViewBox(w),!0))));const x=C.getImageData(0,0,u,h);this._renderMap=()=>{p.save(),p.setTransform(),p.clearRect(0,0,u,h),p.scale(f,f),p.putImageData(x,0,0),p.transform(b,0,0,b,E,y);const[t,e,n,i]=this._getViewBox();p.beginPath(),p.rect(t,e,n-t,i-e),p.setTransform(),p.rect(0,0,u,h),p.clip("evenodd"),p.fillStyle="rgba(0,0,0,0.4)",p.fillRect(0,0,u,h),p.restore()},this._renderMap(),this._onMoveMap=(t,e)=>{const[n,i,s,o]=this._getViewBox(),r=[((s-n)/2+n)*b+E,((o-i)/2+i)*b+y];this._recalculatePosition((r[0]-t)/b*this.scale,(r[1]-e)/b*this.scale),this._render(),this._renderMap()}}};class rc{constructor(t,e={}){this.anchor=[0,0],this.width=e.barWidth||4,this.height=e.barWidth||4,this.barMarginX=0,this.barMarginY=0,this.dir=t,this.plainColor=e.plainColor||"rgba(0, 0, 0, 0.15)",this.focusColor=e.focusColor||"rgba(0, 0, 0, 0.25)",this.isFocus=!1}render(t){const[e,n]=this.anchor;if(t.save(),t.beginPath(),"x"===this.dir){const i=this.height/2,s=n+i,o=n+this.height,r=e+this.width-2*this.barMarginX-i,a=e+this.barMarginX+i;t.moveTo(a,o),t.arc(a,s,i,Math.PI/2,Math.PI/2*3),t.lineTo(r,n),t.arc(r,s,i,-Math.PI/2,Math.PI/2),t.closePath()}else{const i=this.width/2,s=n+this.barMarginY+i,o=n+this.height-2*this.barMarginY-i,r=e+i,a=e+this.width;t.moveTo(e,s),t.arc(r,s,i,-Math.PI,0),t.lineTo(a,o),t.arc(r,o,i,0,Math.PI),t.closePath()}t.fillStyle=this.isFocus?this.focusColor:this.plainColor,t.fill(),t.restore()}isHit(t){const e=this.anchor,n=this.width,i=this.height;return t[0]>e[0]-5&&t[0]<e[0]+n+5&&t[1]>e[1]-5&&t[1]<e[1]+i+5}}const ac={initScrollBar(t={}){const{barColor:e,barFocusColor:n,barMarginX:i,barMarginY:s,barWidth:o}=t;this._scrollbarEnable=!0,this._scrollbarX=new rc("x",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarX.barMarginX=i||5,this._scrollbarY=new rc("y",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarY.barMarginY=s||5,this._scrollBarStatus={dragging:!1,target:null,xscale:void 0,yscale:void 0,barInitX:0,barInitY:0},this.addEventListener("zoompan",(()=>{this.scrollBarOnPanAndZoom()})),this.scrollBarOnPanAndZoom(),this.canvas.addEventListener("pointerdown",(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onScrollbarPressStart(e,n,i,s)}))},checkScrollDragging(){return this._scrollBarStatus&&this._scrollBarStatus.dragging},onScrollbarPressStart(t,e,n,i){this._scrollbarX.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarX,barStartX:this._scrollbarX.anchor[0],barInitX:n}),this._scrollbarY.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarY,barStartY:this._scrollbarY.anchor[1],barInitY:i});const s=(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onDraggingScrollbar(e,n,i,s)}).bind(this);document.addEventListener("pointermove",s);const o=(t=>{Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0}),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",o),this.canvas.removeEventListener("pointerup",o)}).bind(this);this.canvas.addEventListener("pointerup",o,{once:!0}),document.addEventListener("pointerup",o,{once:!0})},onDraggingScrollbar(t,e,n,i){if(this._scrollbarEnable&&this._scrollBarStatus.dragging){const{target:t,barInitX:e,barStartX:s,barInitY:o,barStartY:r,xscale:a,yscale:c,scollbarHeight:u,scollbarWidth:h,realR:l,realL:d,realT:f,realB:p}=this._scrollBarStatus,{actual_width:g,actual_height:m}=this.canvasMeta,{x:_,y:v}=this.bounding_box;if("x"===t.dir){const i=s+(n-e),o=(_-((l-d)*((t.anchor[0]=Math.max(Math.min(i,g-h),0))/g)+d))*this.scale;Object.assign(this.position,{offsetX:o-_*this.scale,x:o})}if("y"===t.dir){const e=r+(i-o),n=(v-((p-f)*((t.anchor[1]=Math.max(Math.min(e,m-u),0))/m)+f))*this.scale;Object.assign(this.position,{offsetY:n-v*this.scale,y:n})}return this.scheduleRender(),!0}return!1},checkScrollBarHover(t,e){if(this._scrollbarEnable){if(this._scrollbarX.isHit([t,e]))return this._scrollbarX.isFocus||(this._scrollbarX.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0;if(this._scrollbarY.isHit([t,e]))return this._scrollbarY.isFocus||(this._scrollbarY.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0}return!1},resetScrollBarHover(){this._scrollbarEnable&&(this._scrollbarY.isFocus||this._scrollbarX.isFocus)&&(this._scrollbarY.isFocus=!1,this._scrollbarX.isFocus=!1,this.scheduleRender())},_getScrollViewBoundingbox(){const{width:t,height:e,x:n,y:i}=this.bounding_box;return{width:t+240,height:e+240,x:n-120,y:i-120}},scrollBarOnPanAndZoom(){if(!this._scrollbarEnable||this._scrollBarStatus.dragging)return;const{width:t,height:e,x:n,y:i}=this._getScrollViewBoundingbox();let[s,o,r,a]=this._getViewBox();const c=Math.max(r,n+t),u=Math.min(s,n),h=Math.min(o,i),l=Math.max(a,i+e),d=r-s,f=a-o,{actual_width:p,actual_height:g}=this.canvasMeta,m=d/(c-u);if(m<1){const t=p*m,e=(s-u)*m*this.scale;this._scrollbarX.anchor=[e,g-10],this._scrollbarX.width=t,this._scrollBarStatus.scollbarWidth=t}const _=f/(l-h);if(_<1){const t=g*_,e=(o-h)*_*this.scale;this._scrollbarY.anchor=[p-10,e],this._scrollbarY.height=t,this._scrollBarStatus.scollbarHeight=t}Object.assign(this._scrollBarStatus,{yscale:_,xscale:m,realR:c,realL:u,realT:h,realB:l})},resetScollBarStatus(){this._scrollbarEnable&&Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0})},renderScrollBar(t){if(this._scrollbarEnable){t.setTransform(),t.scale(this.dpr,this.dpr);const{xscale:e,yscale:n}=this._scrollBarStatus;e<1&&this._scrollbarX.render(t),n<1&&this._scrollbarY.render(t)}}},cc={initSchedule(){this.__clock__=void 0},scheduleRender(t){requestAnimationFrame((e=>{this.__clock__!==e&&this.__render(),t&&t(e),this.__clock__=e}))}};class uc extends CustomEvent{constructor(t,e={}){super(t,{detail:{...e,originEvent:e.event,target:e.target,jflow:e.jflow,bubbles:e.bubbles||!1}})}}const hc=uc,lc={...ec,...nc,_setPadding(t){this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0}},_setMargin(t){this.margin={top:t.marginTop||t.margin||0,right:t.marginRight||t.margin||0,bottom:t.marginBottom||t.margin||0,left:t.marginLeft||t.margin||0}},_getCenter(){const t=this.anchor,e=this.padding,n=this.margin,i=(n.left-n.right)/2,s=(n.top-n.bottom)/2,o=(e.left-e.right)/2+i,r=(e.top-e.bottom)/2+s;return this._shape.anchor=[t[0]+i,t[1]+s],[t[0]+o,t[1]+r]},setAnchorX(t){this.anchor[0]=t,this._getCenter()},setAnchorY(t){this.anchor[1]=t,this._getCenter()},setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e,this._getCenter()},_calculatePointBack(t){const[e,n]=t,[i,s]=this._getCenter();return[e-i,n-s]},_calculatePointBackWithPoint(t,e,n,i,s){const o=this.anchor,r=this.padding,a=this.margin;n[i]=t-(o[0]+(r.left-r.right)/2+(a.left-a.right)/2),n[s]=e-(o[1]+(r.top-r.bottom)/2+(a.top-a.bottom)/2)},calculateToCoordination(t){const[e,n]=t,[i,s]=this._getCenter(),o=[e+i,n+s];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(o):o},calculateToRealWorld(t){const[e,n]=t,[i,s]=this._getCenter(),o=[e+i,n+s];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(o)},clone(){const t=new(0,this.constructor)(Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}));return this.interateNodeStack((e=>{t.addToStack(e.clone())})),t.recalculate(),t.visible=this.visible,t},getBoundingDimension(){return{width:this.width,height:this.height}},getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a},getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s],[Ta.SELF]:[e+.618*i,n+.618*s]}},calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=this.width/2,r=this.height/2,a=i-e,c=s-n,u=r/o,h=Math.abs(c/a),l=e>i,d=n>s;let f,p;return h<u?(f=i+(l?o:-o),p=o*(d?h:-h)+s):(p=s+(d?r:-r),f=r/(l?h:-h)+i),[f,p]},onEnterViewbox(){this.interateNodeStack((t=>{t.onEnterViewbox()}))},onLeaveViewbox(){this.interateNodeStack((t=>{t.onLeaveViewbox()}))},destroy(){this._shape.destroy(),this.interateNodeStack((t=>{t.destroy()}))}};function dc(t,e){return[t,e]}const fc=function(t,e={}){const n="function"==typeof e.shapeShift?e.shapeShift:dc;class i extends Ga{constructor(e){super(e),this.initStack(e),this.initLayout(e),this._shape=new t(e),this._shape.anchor=[0,0],this._shape._belongs=this,this._setPadding(e),this._setMargin(e),this.definedWidth=e.width,this.minWidth=e.minWidth,this.definedHeight=e.height,this.lock=e.lock??!0,this.display=e.display||"default",this.transparent=e.transparent??!1,this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect(),this._cacheViewBox=[]}}return Object.assign(i.prototype,lc),Object.assign(i.prototype,{reflow(){lc.reflow.call(this);const t=this.margin,[e,i]=n(this.width-t.left-t.right,this.height-t.top-t.bottom,this._shape);this._shape.width=e,this._shape.height=i},setConfig(t){this._shape.setConfig(t),this._setPadding(t),this._setMargin(t),"opacity"in t&&(this.opacity=t.opacity),t.layout&&this._layout!==t.layout&&(this._layout=t.layout)},_getBoundingGroupRect(){const t=Sa(this._stack.getBoundingRectPoints()),e=this.padding,i=this.minWidth,s=this.definedWidth,o=t.width+e.left+e.right,r=t.height+e.top+e.bottom,a=i?Math.max(i,o):s||o,c=this.definedHeight||r;this._paddingWidth=a,this._paddingHeight=c;const[u,h]=n(a,c,this._shape);this._shape.width=u,this._shape.height=h;const l=this.margin;this.width=u+l.left+l.right,this.height=h+l.top+l.bottom},_getViewBox(){const t=this._belongs.getCacheViewBox(),e=this._cacheViewBox;return this._calculatePointBackWithPoint(t[0],t[1],e,0,1),this._calculatePointBackWithPoint(t[2],t[3],e,2,3),this._cacheViewBox},getCacheViewBox(){return this._cacheViewBox},render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this._getCenter();this._shape.render(t),t.translate(e,n),this._stack.render(t),t.translate(-e,-n),t.restore()},isHit(t,e){const n=this._calculatePointBack(t);this._currentp=n;return this._stack.checkHit(n,e)||!this.transparent&&this._shape.isHit(t)}}),i},pc=class extends Ga{constructor(t){super(t),this.type="Point",this.radius=t.radius||10,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.width=2*this.radius,this.height=2*this.radius}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath(),t.arc(this.anchor[0],this.anchor[1],this.radius,0,2*Math.PI),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor;return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)<this.radius*this.radius}getBoundingRect(){const t=this.anchor,e=this.radius,n=t[0]-e,i=t[1]-e,s=t[0]+e,o=t[1]+e,r=this._boundingrect;return r[0]=n,r[1]=i,r[2]=s,r[3]=o,r}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=i-e,r=s-n,a=Math.sqrt(o*o+r*r),c=this.radius/a;return[i-c*o,s-c*r]}getIntersectionsInFourDimension(){const[t,e]=this.anchor,n=this.radius;return{[Ta.RIGHT]:[t+n,e],[Ta.LEFT]:[t-n,e],[Ta.BOTTOM]:[t,e+n],[Ta.TOP]:[t,e-n]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t,[s,o]=this.anchor,r=this.radius,a=s-n,c=o-i,u={[Ta.RIGHT]:[s+r,o],[Ta.LEFT]:[s-r,o],[Ta.BOTTOM]:[s,o+r],[Ta.TOP]:[s,o-r]};let h=Math.abs(c)>Math.abs(a)?c<0?Ta.BOTTOM:Ta.TOP:a<0?Ta.RIGHT:Ta.LEFT;return{p:u[h],dir:h}}getBoundingDimension(){return{width:this.width,height:this.height}}},gc=class extends Ga{constructor(t={}){super(t),this.type="Rectangle",this.width=t.width||10,this.height=t.height||10,this.borderRadius=t.borderRadius||0,this._setBorder(t)}_setBorder(t){this.border={top:{color:t.border?.top?.borderColor||t.borderColor||"transparent",width:t.border?.top?.borderWidth||t.borderWidth||0,enable:t.border?.top?.borderWidth},right:{color:t.border?.right?.borderColor||t.borderColor||"transparent",width:t.border?.right?.borderWidth||t.borderWidth||0,enable:t.border?.right?.borderWidth},bottom:{color:t.border?.bottom?.borderColor||t.borderColor||"transparent",width:t.border?.bottom?.borderWidth||t.borderWidth||0,enable:t.border?.bottom?.borderWidth},left:{color:t.border?.left?.borderColor||t.borderColor||"transparent",width:t.border?.left?.borderWidth||t.borderWidth||0,enable:t.border?.left?.borderWidth}},this.borderColor=t.borderColor||"transparent",this.borderWidth=t.borderWidth||0}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._setBorder(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const{borderRadius:e,anchor:n,width:i,height:s}=this,o=this.anchor[0]-this.width/2,r=this.anchor[1]-this.height/2,a=this.anchor[0]+this.width/2,c=this.anchor[1]+this.height/2;if(this.borderRadius?(t.beginPath(),t.moveTo(o+e,r),t.lineTo(o+i-e,r),t.quadraticCurveTo(o+i,r,o+i,r+e),t.lineTo(o+i,r+s-e),t.quadraticCurveTo(o+i,r+s,o+i-e,r+s),t.lineTo(o+e,r+s),t.quadraticCurveTo(o,r+s,o,r+s-e),t.lineTo(o,r+e),t.quadraticCurveTo(o,r,o+e,r),t.closePath()):(t.beginPath(),t.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height)),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const n=this._jflow.scale;t.shadowBlur=this.shadowBlur*n,t.shadowOffsetX=this.shadowOffsetX*n,t.shadowOffsetY=this.shadowOffsetY*n;let a=new Path2D;this.borderRadius?(a.moveTo(o+e,r),a.lineTo(o+i-e,r),a.quadraticCurveTo(o+i,r,o+i,r+e),a.lineTo(o+i,r+s-e),a.quadraticCurveTo(o+i,r+s,o+i-e,r+s),a.lineTo(o+e,r+s),a.quadraticCurveTo(o,r+s,o,r+s-e),a.lineTo(o,r+e),a.quadraticCurveTo(o,r,o+e,r),a.closePath()):a.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height),a.rect(o-10,r-10,this.width+20,this.height+20),t.save(),t.clip(a,"evenodd"),t.stroke(),t.restore()}if(t.fillStyle=this.backgroundColor,t.fill(),this.borderRadius&&this.borderWidth&&(t.shadowColor="transparent",t.stroke()),this.borderRadius){if(this.border.top.enable){const n=r-this.border.top.width/2;t.beginPath();let s=new Path2D;s.moveTo(o,n+e),s.quadraticCurveTo(o,n,o+e,n),s.lineTo(o+i-e,n),s.quadraticCurveTo(o+i,n,o+i,n+e),s.closePath(),t.clip(s),t.save(),t.shadowColor="transparent",t.fillStyle=this.border.top.color,t.rect(o,n,this.width,this.border.top.width),t.fill(),t.restore()}}else this.border.top.width&&(t.beginPath(),t.moveTo(o,r),t.lineTo(a,r),t.strokeStyle=this.border.top.color,t.lineWidth=this.border.top.width,t.stroke()),this.border.right.width&&(t.beginPath(),t.moveTo(a,r),t.lineTo(a,c),t.strokeStyle=this.border.right.color,t.lineWidth=this.border.right.width,t.stroke()),this.border.bottom.width&&(t.beginPath(),t.moveTo(a,c),t.lineTo(o,c),t.strokeStyle=this.border.bottom.color,t.lineWidth=this.border.bottom.width,t.stroke()),this.border.left.width&&(t.beginPath(),t.moveTo(o,c),t.lineTo(o,r),t.strokeStyle=this.border.left.color,t.lineWidth=this.border.left.width,t.stroke());t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2;return t[0]>e[0]-n&&t[0]<e[0]+n&&t[1]>e[1]-i&&t[1]<e[1]+i}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}getBoundingDimension(){return{height:this.height,width:this.width}}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=this.width/2,r=this.height/2,a=i-e,c=s-n,u=r/o,h=Math.abs(c/a),l=e>i,d=n>s;let f,p;return h<u?(f=i+(l?o:-o),p=o*(d?h:-h)+s):(p=s+(d?r:-r),f=r/(l?h:-h)+i),[f,p]}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t;let s=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(s=this._belongs.calculateToCoordination(s));const[o,r]=s,a=this.width/2,c=this.height/2,u={[Ta.RIGHT]:[o+a,r],[Ta.LEFT]:[o-a,r],[Ta.BOTTOM]:[o,r+c],[Ta.TOP]:[o,r-c]},h=o-n,l=r-i,d=c/a,f=n>o;let p=Math.abs(l/h)>d?i>r?Ta.BOTTOM:Ta.TOP:f?Ta.RIGHT:Ta.LEFT;return{p:u[p],dir:p}}},mc=class extends Ga{constructor(t={}){super(t),this.type="Capsule",this.width=t.width||20,this.height=t.height||10}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=e-i+s,r=e+i-s,a=n-s,c=n+s;t.moveTo(o,a),t.lineTo(r,a),t.arc(r,n,s,-Math.PI/2,Math.PI/2),t.lineTo(o,c),t.arc(o,n,s,Math.PI/2,Math.PI/2*3),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2,s=Math.abs(n-i),o=e[0]-n+i,r=e[0]+n-i,a=i*i;return t[0]>e[0]-s&&t[0]<e[0]+s&&t[1]>e[1]-i&&t[1]<e[1]+i||Math.pow(t[0]-o,2)+Math.pow(t[1]-e[1],2)<a||Math.pow(t[0]-r,2)+Math.pow(t[1]-e[1],2)<a}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s]}}},_c=class extends mc{render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=n-s+i,r=n+s-i,a=e-i,c=e+i;t.moveTo(a,o),t.arc(e,o,i,-Math.PI,0),t.lineTo(c,r),t.arc(e,r,i,0,Math.PI),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t,e){const[n,i]=this.anchor,s=this.width/2,o=this.height/2,r=Math.abs(o-s),a=i-o+s,c=i+o-s,u=s*s;return t[0]>n-s&&t[0]<n+s&&t[1]>i-r&&t[1]<i+r||Math.pow(t[0]-n,2)+Math.pow(t[1]-a,2)<u||Math.pow(t[0]-n,2)+Math.pow(t[1]-c,2)<u}},vc=class extends Ga{constructor(t={}){super(t),this.type="Rhombus",this.height=t.diagonalsV||10,this.width=t.diagonalsH||20}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const e=this.width/2,n=this.height/2,i=this.anchor;if(t.translate(i[0],i[1]),t.beginPath(),t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor){t.shadowColor=this.shadowColor;const i=this._jflow.scale;t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i;let s=new Path2D;s.moveTo(0,-n),s.lineTo(e,0),s.lineTo(0,n),s.lineTo(-e,0),s.closePath(),s.rect(-e-10,-n-10,this.width+20,this.height+20),t.save(),t.clip(s,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.shadowColor="transparent",t.stroke()),t.translate(-i[0],-i[1]),t.restore()}isHit(t){const e=this.height/2,n=this.width/2,i=this.anchor;return Math.abs(t[0]-i[0])/n+Math.abs(t[1]-i[1])/e<=1}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s],[Ta.SELF]:[e+.618*i,n+.618*s]}}},bc=class extends Ga{constructor(t={}){super(t),this.type="Diamond",this.width=t.width||20,this.height=t.height||10,this.side=t.side||6,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.sinSIDE=Math.sin(Math.PI/3)*this.side,this.cosSIDE=Math.cos(Math.PI/3)*this.side}render(t){const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=s/1.732,r=e-i+o,a=e+i-o,c=e+i,u=e-i,h=n-s,l=n+s;this._cachePoints=[[a,h],[c,n],[a,l],[r,l],[u,n],[r,h]],t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const{side:d,sinSIDE:f,cosSIDE:p}=this;t.moveTo(e,h),t.lineTo(a-d,h),t.quadraticCurveTo(a,h,a+p,h+f),t.lineTo(c-p,n-f),t.quadraticCurveTo(c,n,c-p,n+f),t.lineTo(a+p,l-f),t.quadraticCurveTo(a,l,a-d,l),t.lineTo(r+d,l),t.quadraticCurveTo(r,l,r-p,l-f),t.lineTo(u+p,n+f),t.quadraticCurveTo(u,n,u+p,n-f),t.lineTo(r-p,h+f),t.quadraticCurveTo(r,h,r+d,h),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){if(!this._cachePoints)return!1;const e=this._cachePoints;let n=!1;for(let i=0,s=e.length-1;i<e.length;i++)e[i][1]>t[1]!=e[s][1]>t[1]&&t[0]<(e[s][0]-e[i][0])*(t[1]-e[i][1])/(e[s][1]-e[i][1])+e[i][0]&&(n=!n),s=i;return n}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s]}}};Math.sqrt(3);const Ec=Symbol("ishit");class yc extends rc{constructor(t,e={}){super(t,e),this.visible=!1}render(t){this.visible&&super.render(t)}setHit(t){this[Ec]!==t&&(this.isFocus=t,this.onHit()),this[Ec]=t}}class Cc extends Ga{constructor(t){super(t),this.type="ScrollGroup",this.initStack(t),this.initLayout(t),this.initScrollBar(t),this._shape=new gc(t),this._shape.anchor=[0,0],this._shape._belongs=this,this.maxWidth=t.maxWidth||1/0,this.definedWidth=t.definedWidth,this.maxHeight=t.maxHeight||1/0,this.definedHeight=t.definedHeight,this.lock=t.lock??!0,this._offset=[0,0],this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect(),this._resetOffset(),this._cacheViewBox=[]}initScrollBar(t){const{barColor:e,barFocusColor:n,barMarginX:i,barMarginY:s,barWidth:o}=t;this._scrollbarX=new yc("x",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarY=new yc("y",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarX.barMarginX=i||1,this._scrollbarY.barMarginY=s||1;const r=()=>{this._jflow.scheduleRender()};this._scrollbarX.onHit=r,this._scrollbarY.onHit=r,this._scrollBarStatus={dragging:!1,target:null,barInitX:0,barInitY:0,barStartX:0,barStartY:0,hitScrollX:!1,hitScrollY:!1},this.addEventListener("instancePressStart",(t=>{if(this._scrollBarStatus.hitScrollX){t.detail.preventDefault(),t.detail.bubbles=!1;const e=t.detail.event.clientX;Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarX,barStartX:this._scrollbarX.anchor[0],barInitX:e}),this.onScrollbarPressStart()}if(this._scrollBarStatus.hitScrollY){t.detail.preventDefault(),t.detail.bubbles=!1;const e=t.detail.event.clientY;Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarY,barStartY:this._scrollbarY.anchor[1],barInitY:e}),this.onScrollbarPressStart()}}))}onScrollbarPressStart(){const t=this._jflow.canvas,e=(t=>{const{clientX:e,clientY:n}=t;this.onDraggingScrollbar(e,n)}).bind(this);document.addEventListener("pointermove",e);const n=(i=>{Object.assign(this._scrollBarStatus,{dragging:!1,target:null,barInitX:0,barInitY:0,barStartX:0,barStartY:0,hitScrollX:!1,hitScrollY:!1}),document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",n),t.removeEventListener("pointerup",n)}).bind(this);t.addEventListener("pointerup",n,{once:!0}),document.addEventListener("pointerup",n,{once:!0})}onDraggingScrollbar(t,e){if(this._scrollbarX.visible&&this._scrollBarStatus.dragging){const n=this._jflow,i=n.scale,{target:s,barInitX:o,barStartX:r,barInitY:a,barStartY:c}=this._scrollBarStatus;if("x"===s.dir){const e=this._scrollbarX.width,a=this._outerWidth,c=r+(t-o)/i,u=(s.anchor[0]=Math.max(Math.min(c,a-e),0))/(a-e),h=(this._innerWidth-a)/2;this._offset[0]=h-(this._innerWidth-a)*u,n.scheduleRender()}if("y"===s.dir){const t=this._scrollbarY.height,o=this._outerHeight,r=c+(e-a)/i,u=(s.anchor[1]=Math.max(Math.min(r,o-t),0))/(o-t),h=(this._innerHeight-o)/2;this._offset[1]=h-(this._innerHeight-o)*u,n.scheduleRender()}}}setConfig(t){this._shape.setConfig(t)}_getBoundingGroupRect(){const t=Sa(this._stack.getBoundingRectPoints()),e=t.width,n=t.height,i=this.definedWidth||Math.min(e,this.maxWidth),s=this.definedHeight||Math.min(n,this.maxHeight);this._innerWidth=e,this._outerWidth=i,this._innerHeight=n,this._outerHeight=s,this._shape.width=i,this._shape.height=s,this.width=i,this.height=s}_calculatePointBack(t){const[e,n]=t,[i,s]=this._offset,[o,r]=this.anchor;return[e-o-i,n-r-s]}_calculatePointBackWithPoint(t,e,n,i,s){const o=this.anchor,r=this._offset;n[i]=t-o[0]-r[0],n[s]=e-o[1]-r[1]}calculateToCoordination(t){const[e,n]=t,[i,s]=this.anchor,[o,r]=this._offset,a=[e+i-o,n+s-r];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(a):a}calculateToRealWorld(t){const[e,n]=t,[i,s]=this.anchor,[o,r]=this._offset,a=[e+i-o,n+s-r];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(a)}_getViewBox(){const t=this._cacheViewBox;return this._calculatePointBackWithPoint(0,0,t,0,1),this._calculatePointBackWithPoint(this.width,this.height,t,2,3),t}getCacheViewBox(){return this._cacheViewBox}_resetOffset(){this._offset=[Math.max((this._innerWidth-this._outerWidth)/2,0),Math.max((this._innerHeight-this._outerHeight)/2,0)],this._innerWidth>this._outerWidth?(this._scrollbarX.visible=!0,this._scrollbarX.width=this._outerWidth*this._outerWidth/this._innerWidth,this._scrollbarX.anchor=[0,this._outerHeight-4]):this._scrollbarX.visible=!1,this._innerHeight>this._outerHeight?(this._scrollbarY.visible=!0,this._scrollbarY.height=this._outerHeight*this._outerHeight/this._innerHeight,this._scrollbarY.anchor=[this._outerWidth-4,0]):this._scrollbarY.visible=!1}render(t){this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this.anchor,i=this.width,s=this.height,o=i/2,r=s/2,[a,c]=this._offset;t.translate(e,n),this._shape.render(t),t.translate(-o,-r),this._scrollbarX.visible&&this._scrollbarX.render(t),this._scrollbarY.visible&&this._scrollbarY.render(t),t.translate(o,r),t.save(),t.beginPath(),t.rect(-o,-r,i,s),t.clip(),t.translate(a,c),this._stack.render(t),this._linkStack.render(t),t.translate(-e-a,-n-c),t.restore()}isHit(t,e){const[n,i]=t,[s,o]=this.anchor,r=[n-s+this.width/2,i-o+this.height/2];if(this._scrollBarStatus.hitScrollX=!1,this._scrollBarStatus.hitScrollY=!1,this._scrollbarX.visible&&this._scrollbarX.isHit(r))return this._scrollBarStatus.hitScrollX=!0,this._scrollbarX.setHit(!0),!0;if(this._scrollbarX.setHit(!1),this._scrollbarY.visible&&this._scrollbarY.isHit(r))return this._scrollBarStatus.hitScrollY=!0,this._scrollbarY.setHit(!0),!0;if(this._scrollbarY.setHit(!1),this._shape.isHit([n-s,i-o])){const[t,r]=this._offset,a=[n-s-t,i-o-r];this._currentp=a;const c=this._stack.checkHit(a,e);if(c)return c}else this._stack.resetHitStatus();return!1}getBoundingDimension(){return{width:this.width,height:this.height}}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Ta.RIGHT]:[e+i,n],[Ta.LEFT]:[e-i,n],[Ta.BOTTOM]:[e,n+s],[Ta.TOP]:[e,n-s],[Ta.SELF]:[e+.618*i,n+.618*s]}}onEnterViewbox(){this.interateNodeStack((t=>{t.onEnterViewbox()}))}onLeaveViewbox(){this.interateNodeStack((t=>{t.onLeaveViewbox()}))}destroy(){this._shape.destroy(),this.interateNodeStack((t=>{t.destroy()}))}clone(){const t=new(0,this.constructor)(Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}));return this.interateNodeStack((e=>{t.addToStack(e.clone())})),t.recalculate(),t.visible=this.visible,t}}Object.assign(Cc.prototype,ec),Object.assign(Cc.prototype,nc),Object.assign(Cc.prototype,{recalculateUp(){let t=!0;if(this.getBoundingDimension){const e=this._innerWidth,n=this._innerHeight;this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const i=this._innerWidth,s=this._innerHeight;t=e!==i||n!==s}else this.reflow();this._belongs&&t&&(this._resetOffset(),this._belongs.recalculateUp())},recalculate(){const{width:t,height:e}=this.getBoundingDimension();this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const{width:n,height:i}=this.getBoundingDimension();t===n&&e===i||this._resetOffset()}});const wc=Cc,xc={canvas:{wheel(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:o}=t;t.ctrlKey&&(o=-o),e.zoomHandler(n,i,s,o,t)}}},Ac=class extends Ua{constructor(t={}){super(),this.from=t.from,this.to=t.to,this.fromDir=t.fromDir,this.toDir=t.toDir,this._cachePoints=null,this.backgroundColor=t.backgroundColor||"#000",this.isSelf=!!t.isSelf}isInViewBox(t){return!0}bringToTop(){const t=this._jflow._linkStack,e=t.findIndex((t=>t===this));t.splice(e,1),t.push(this),this._jflow._render()}},kc=class extends Ga{constructor(t){super(t),this.width=t.width,this.height=t.height,this.imageBuffer=document.createElement("canvas"),this.imageBuffer.width=this.width+2,this.imageBuffer.height=this.height+2,t.cache(this.imageBuffer.getContext("2d"))}render(t){const[e,n]=this.anchor;t.save(),t.translate(e,n),t.beginPath(),t.drawImage(this.imageBuffer,-this.width/2,-this.height/2),t.translate(-e,-n),t.restore()}getBoundingDimension(){return{height:this.height,width:this.width}}recalculate(){}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}},Bc="left",Tc="right",Fc=class extends gc{constructor(t){super(t),this.type="Text",this.content=t.content||"",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"14px",this.fontWeight=t.fontWeight||"",this.textColor=t.textColor||"white",this.placeholderColor=t.placeholderColor||t.textColor||"white",this.textAlign=t.textAlign||"center",this.textBaseline=t.textBaseline||"middle",this.lineHeight=t.lineHeight,this.indent=t.indent||0,this.backgroundColor=t.backgroundColor,this.editable=t.editable,this.definedWidth=t.definedWidth,this.minWidth=t.minWidth||0,this.maxWidth=t.maxWidth,this.ellipsis=t.ellipsis,this.placeholder=t.placeholder||"",this.emptyWhenInput=t.emptyWhenInput||!1,this.editting=!1,this.disabled=t.disabled,this.cursorColor=t.cursorColor||"#60CFC4",this.textRangeColor=t.textRangeColor||"#4E75EC1A",this._status={editing:!1,cursorshow:!0,cursoranime:null,lastElapsed:0,refreshElapsed:!1,cursorDragging:!1,shiftOn:!1,oldVal:"",inputElement:null},this._cursorOffset=0,this._textRange={enable:!1,rangefrom:null,rangeTo:null,initialRange:null},this.editable&&this._makeFunctional(),this.preCalculateText(),this.shadowCache()}get currentContent(){return this.content||this.placeholder}get isEmpty(){return!this.content}preCalculateText(){ea((t=>{t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;const e=parseInt(this.fontSize),n=this.currentContent,{fontBoundingBoxAscent:i,fontBoundingBoxDescent:s,width:o}=t.measureText(n);if(this._textWidth=this.indent+o,this.definedWidth){if(this.ellipsis&&this._textWidth>this.definedWidth){const t=this._calculateOffset(this.definedWidth-12);this.ellipsisContent=n.substring(0,t)+"..."}else this.ellipsisContent=n;this.width=this.definedWidth}else if(this.maxWidth&&this.ellipsis){if(this._textWidth>this.maxWidth){const t=this.maxWidth/this._textWidth,e=Math.floor(n.length*t-3);this.ellipsisContent=n.substring(0,e)+"..."}else this.ellipsisContent=n;this.width=Math.min(this.maxWidth,this._textWidth)}else this.width=Math.max(this.minWidth,this._textWidth);const r=Math.abs(i)+Math.abs(s)||e;this._textHeight=r,this.lineHeight?this.height=this.lineHeight:this.height=r}))}shadowCache(){const t=window.devicePixelRatio,e=this.width*t,n=this.height*t,i=this.indent*t,s=parseInt(this.fontSize)*t;this._shadowCache=new kc({width:e,height:n,cache:t=>{t.translate(e/2,n/2);const o=`${this.fontWeight} ${s}px ${this.fontFamily}`;t.font=o,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.isEmpty?this.placeholderColor:this.textColor;let r=this.currentContent;if(this.ellipsisContent&&(r=this.ellipsisContent),r)if(this.textAlign===Bc){const n=e/2;t.fillText(r,i/2-n,0)}else if(this.textAlign===Tc){const n=e/2;t.fillText(r,n,0)}else t.fillText(r,i/2,0)}})}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this.preCalculateText(),this.shadowCache()}click(){if(!this._status.editing){let t=!0;if(this.dispatchEvent(new hc("edit",{target:this,preventDefault(){t=!1}})),!t)return;const e=this._belongs._currentp,n=this._jflow;this._cursorOffset=e?this._positionToCursorOffset(e):0;const i=function(t,e){const n=document.createElement("input");n.setAttribute("style","\n        width: 100px;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;"),n.setAttribute("tabindex",-1),n.setAttribute("aria-hidden",!0),n.setAttribute("spellcheck",!1),n.setAttribute("autocorrect","off");let i=!1,s={ctrlOn:!1};return n.addEventListener("beforeinput",(e=>{e.preventDefault(),e.data&&(i||t("Input",e.data))})),n.addEventListener("compositionstart",(e=>{t("compositionstart"),i=!0})),n.addEventListener("compositionupdate",(e=>{t("compositionupdate",e.data)})),n.addEventListener("compositionend",(e=>{t("compositionend",e.data),n.value="",i=!1})),n.addEventListener("keyup",(e=>{switch(e.key){case"Shift":t("Shift",!1);break;case"Meta":case"Control":s.ctrlOn=!1}})),n.addEventListener("keydown",(e=>{switch(e.code){case"Enter":t("Enter");break;case"Backspace":t("Backspace");break;case"ArrowLeft":t("ArrowLeft");break;case"ArrowRight":t("ArrowRight");break;case"ArrowDown":t("ArrowDown");break;case"ArrowUp":t("ArrowUp")}switch(e.key){case"Shift":t("Shift",!0);break;case"Meta":case"Control":s.ctrlOn=!0;break;case"a":s.ctrlOn&&t("CtrlA")}})),n.addEventListener("keyup",(t=>{e("KeyUp",t)})),n.addEventListener("keydown",(t=>{e("KeyDown",t)})),n.addEventListener("copy",(e=>{e.preventDefault(),e.stopPropagation(),t("COPY",null,e)})),n.addEventListener("cut",(e=>{e.preventDefault(),e.stopPropagation(),t("CUT",null,e)})),n.addEventListener("paste",(e=>{e.preventDefault(),e.stopPropagation(),t("PASTE",null,e)})),n}(this._controlCallback.bind(this),this._defaultCallback.bind(this));n.DOMwrapper.append(i),i.focus({preventScroll:!0}),n.setFocusInstance(this),Object.assign(this._status,{editing:!0,oldVal:this.content,inputElement:i,cursoranime:n.requestJFlowAnime((t=>{const e=this._status.lastElapsed;this._status.refreshElapsed&&(this._status.lastElapsed=t,this._status.refreshElapsed=!1),t-e>500&&(this._status.cursorshow=!this._status.cursorshow,this._status.lastElapsed=t)}))}),this.emptyWhenInput&&(this.content=""),this.syncShadowInputPosition()}}_makeFunctional(){const t=t=>{this._status.editing=!1,this._status.inputElement&&this._status.inputElement.remove(),this._belongs&&this._jflow.scheduleRender()};this.addEventListener("dblclick",(t=>{t.currentTarget===this&&this._status.editing&&this._selectFullRange()})),this.addEventListener("click",(t=>{if(t.currentTarget===this){if(this._status.editing){const t=this._belongs._currentp,e=this._positionToCursorOffset(t);if(this._status.shiftOn){const t=this._textRange.initialRange;Object.assign(this._textRange,{rangefrom:Math.min(e,t),rangeTo:Math.max(e,t),enable:!0}),this._cursorOffset=this._textRange.rangeTo,this._status.inputElement.focus({preventScroll:!0})}else this._cursorOffset=e,this._status.inputElement.focus({preventScroll:!0}),this._refreshCursor(),this.syncShadowInputPosition()}this.click()}})),this.addEventListener("blur",(e=>{t(),this.dispatchEvent(new hc("change",{target:this,oldVal:this._status.oldVal,val:this.content})),this._textRange.enable=!1,this._status.cursoranime.cancel(),Object.assign(this._status,{editing:!1,cursorshow:!0,cursoranime:null,lastElapsed:0,refreshElapsed:!1,cursorDragging:!1,shiftOn:!1,oldVal:"",inputElement:null})})),this.addEventListener("instancePressStart",(t=>{if(this._status.editing&&!this._status.shiftOn){t.detail.bubbles=!1,t.detail.preventDefault();const e=this._belongs._currentp,n=this._positionToCursorOffset(e);this._textRange.initialRange=n;const i=t.detail.jflow;let s=!1;const o=(t=>{s=!0;const{offsetX:e,offsetY:n}=t,o=i._calculatePointBack([e,n]);i._stack.checkHit(o);const r=this._belongs._currentp,a=this._positionToCursorOffset(r),c=this._textRange.initialRange;this._status.editing=!1,Object.assign(this._textRange,{rangefrom:Math.min(a,c),rangeTo:Math.max(a,c),enable:!0})}).bind(this);document.addEventListener("pointermove",o),document.addEventListener("pointerup",(t=>{if(document.removeEventListener("pointermove",o),!s)return void(this._textRange.initialRange=null);const e=this._textRange.rangeTo;this._cursorOffset=e,this._status.editing=!0,this._status.inputElement.focus({preventScroll:!0}),this._textRange.initialRange=null}),{once:!0})}}))}_positionToCursorOffset(t){const[e]=t,n=this.width/2,[i]=this.anchor,s=e-(i-n);let o=0;return o=s>=this._textWidth?this.content.length:this._calculateOffset(s),o}_calculateOffset(t){const e=this.content,n=e.length-1,i=this._textWidth;if(0===i)return 0;const s=i;let o=Math.floor(t/s*n);return ea((i=>{let r,a,c;i.font=`${this.fontSize} ${this.fontFamily}`;let u=e.substring(0,o),h=e.substring(o-1,o),l=e.substring(o,o+1),d=i.measureText(u).width,f=i.measureText(h).width,p=i.measureText(l).width;r=d-f/2,a=d+p/2;do{if(r<=t&&a>=t)break;if(r>t){const n=a-t;c=o,o-=n<100?1:Math.floor(n/a*c),u=e.substring(o,c),d-=i.measureText(u).width}else if(a<t){const a=t-r;c=o,o+=a<100?1:Math.floor(a/(s-r)*(n-c)),u=e.substring(c,o),d+=i.measureText(u).width}h=e.substring(o-1,o),l=e.substring(o,o+1),f=i.measureText(h).width,p=i.measureText(l).width,r=d-f/2,a=d+p/2}while(o>=0&&o<=n)})),o}_refreshCursor(){this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),this._textRange.enable&&(this._textRange.enable=!1)}render(t){if(this._isMoving&&(t.globalAlpha=.6),!t.disableCache&&!this._status.editing&&this._jflow.scale*parseInt(this.fontSize)<8){const[e,n]=this.anchor;return t.save(),t.translate(e,n),t.beginPath(),t.drawImage(this._shadowCache.imageBuffer,-this.width/2,-this.height/2,this.width,this.height),t.translate(-e,-n),void t.restore()}const e=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`;t.font!==e&&(t.font=e),t.textAlign!==this.textAlign&&(t.textAlign=this.textAlign),t.textBaseline!==this.textBaseline&&(t.textBaseline=this.textBaseline),t.fillStyle=this.isEmpty?this.placeholderColor:this.textColor;let n=this.currentContent;if(this.ellipsisContent&&(n=this.ellipsisContent),n)if(this.textAlign===Bc){const e=this.width/2;t.fillText(n,this.anchor[0]-e+this.indent/2,this.anchor[1])}else if(this.textAlign===Tc){const e=this.width/2;t.fillText(n,this.anchor[0]+e,this.anchor[1])}else t.fillText(n,this.anchor[0]+this.indent/2,this.anchor[1]);const i=this.width/2,s=this._textHeight,[o,r]=this.anchor,a=o-i,c=r-s/2;if(this._status.cursorshow&&this._status.editing){const e=this._cursorOffset,n=this.content.substring(0,e),i=a+t.measureText(n).width,s=this._textHeight/2;t.beginPath(),t.moveTo(i,r-s),t.lineTo(i,r+s),t.lineWidth=2,t.strokeStyle=this.cursorColor,t.stroke()}if(this._textRange.enable){const{rangefrom:e,rangeTo:n}=this._textRange,i=this.content.substring(0,e),o=this.content.substring(e,n),r=a+t.measureText(i).width,u=t.measureText(o).width;t.beginPath(),t.rect(r,c,u,s),t.fillStyle=this.textRangeColor,t.fill()}}_inputControl(t,e){if(this._textRange.enable&&(this._clearTextRange(),"Backspace"===t))return this.dispatchEvent(new hc("input",{target:this,oldVal:this._status.oldVal,val:this.content})),this.refresh(),void this.syncShadowInputPosition();const n=this._cursorOffset,i=this.content;let s,o=i.substring(0,n);s=this.cacheIdx?i.substring(this.cacheIdx[1]):i.substring(n);let r=!1;switch(t){case"Input":o+=e,this._cursorOffset+=e.length,this.content=o+s;break;case"compositionstart":this.cacheIdx=[o.length,o.length];break;case"compositionupdate":o=o.substring(0,this.cacheIdx[0]),o+=e,this.content=o+s,this._cursorOffset=this.cacheIdx[0]+e.length,this.cacheIdx[1]=this.cacheIdx[0]+e.length;break;case"compositionend":o=o.substring(0,this.cacheIdx[0]),this._cursorOffset=this.cacheIdx[0]+e.length,this.cacheIdx=null,o+=e,this.content=o+s;break;case"Enter":if(this.cacheIdx)return;let t=!0;this.dispatchEvent(new hc("enterkeypressed",{target:this,handler:e=>{t=e},stopInput(){r=!0}})),t&&this._jflow.blur();break;case"Backspace":o=o.substring(0,o.length-1),this._cursorOffset=Math.max(0,this._cursorOffset-1),this.content=o+s}r||this.dispatchEvent(new hc("input",{target:this,oldVal:this._status.oldVal,val:this.content})),this.refresh(),this.syncShadowInputPosition()}refresh(){this.preCalculateText(),this._belongs.recalculateUp(),this._jflow.scheduleRender()}syncShadowInputPosition(){if(this._status.editing){const t=this.width/2,e=this.height/2;let n=this.anchor[0]-t;const i=this._cursorOffset;ea((t=>{t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`;const e=this.content.substring(0,i);n+=t.measureText(e).width}));const s=this.calculateToRealWorld([n,e]),o=this._jflow.canvasMeta,r=Math.min(o.actual_width-120,s[0]);this._status.inputElement.style.transform=`translate(${r}px, ${s[1]}px)`}}_controlCallback(t,e,n){switch(this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),t){case"Input":case"compositionstart":case"compositionupdate":case"compositionend":case"Enter":case"Backspace":this._inputControl(t,e);break;case"ArrowLeft":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowLeft();break;case"ArrowRight":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowRight();break;case"Shift":this._onShiftToggle(e);break;case"CtrlA":this._selectFullRange();break;case"COPY":this._copy(n);break;case"CUT":this._cut(n);break;case"PASTE":this._paste(n)}}_onArrowLeft(){this._cursorOffset=Math.max(0,this._cursorOffset-1),this._jflow.scheduleRender(),this.syncShadowInputPosition()}_onArrowRight(){this._cursorOffset=Math.min(this.content.length,this._cursorOffset+1),this._jflow.scheduleRender(),this.syncShadowInputPosition()}_onShiftToggle(t){this._status.shiftOn=t,this._textRange.initialRange=t?this._cursorOffset:null}_selectFullRange(){this._textRange={enable:!0,rangefrom:0,rangeTo:this.content.length},this._cursorOffset=this.content.length}_clearTextRange(){if(this._textRange.enable){const{rangefrom:t,rangeTo:e}=this._textRange,n=this.content,i=n.substring(0,t),s=n.substring(e);this.content=i+s,this._cursorOffset=i.length,this._textRange.enable=!1}}_getSelection(){if(this._textRange.enable){const{rangefrom:t,rangeTo:e}=this._textRange;return this.content.substring(t,e)}return null}_copy(t){const e=this._getSelection();e&&t.clipboardData.setData("text/plain",e)}_cut(t){const e=this._getSelection();e&&(t.clipboardData.setData("text/plain",e),this._clearTextRange(),this.refresh())}_paste(t){let e=(t.clipboardData||window.clipboardData).getData("text"),n=!1;if(this.dispatchEvent(new hc("paste",{target:this,content:e,preventDefault(){n=!0},resolvePasteContent(t){e=t(e)}})),n)return;this._clearTextRange();const i=this._cursorOffset,s=this.content,o=s.substring(0,i),r=s.substring(i);this.content=o+e+r,this._cursorOffset=(o+e).length,this.refresh()}_defaultCallback(t,e){switch(t){case"KeyDown":this.dispatchEvent(new hc("keydown",{target:this,key:e.key,code:e.code,rawEvent:e}));break;case"KeyUp":this.dispatchEvent(new hc("keyup",{target:this,key:e.key,code:e.code,rawEvent:e}))}}destroy(){this._jflow._focus.instance===this&&this._jflow.blur()}},Sc=class extends gc{constructor(t){super(t),this.image=t.image,this.image.onload=()=>{this._jflow._render()},this.imageBounding={width:t.imageWidth||t.width,height:t.imageHeight||t.height}}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),t.image&&!t.image.complete&&(this.image.onload=()=>{this._jflow._render()}),this.imageBounding={width:t.imageWidth||t.width||this.imageBounding.width,height:t.imageHeight||t.height||this.imageBounding.height}}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),gc.prototype.render.call(this,t);const e=this.anchor[0]-this.width/2,n=this.anchor[1]-this.height/2;this.opacity<1&&(t.globalAlpha=this.opacity),this.image.complete&&t.drawImage(this.image,e,n,this.imageBounding.width,this.imageBounding.height),t.restore()}},Dc=class extends gc{constructor(t){super(t),this.domFactory=t.createDocument,this._dom=null}getRealWorldPosition(){const t=this.getBoundingRect();return this.calculateToRealWorld(t.slice(0,2))}render(t){if(!this._dom&&this.domFactory)requestAnimationFrame((()=>{if(!this._dom){const t=document.createElement("div"),e=this.getRealWorldPosition(),n=this._jflow.scale;t.setAttribute("style",`\n                        position: absolute;\n                        width: ${this.width}px;\n                        height: ${this.height}px;\n                        transform-origin: left top;\n                        top: 0;\n                        left: 0;\n                        transform: translate(${e[0]}px, ${e[1]}px) scale(${n});`),this._dom=t,this._jflow.DOMwrapper.appendChild(t),this.domFactory(t)}}));else{const t=this.getRealWorldPosition(),e=this._jflow.scale;this._dom.style.transform=`translate(${t[0]}px, ${t[1]}px) scale(${e})`}super.render(t)}onEnterViewbox(){this._dom&&(this._dom.style.display="block")}onLeaveViewbox(){this._dom&&(this._dom.style.display="none")}destroy(){this._dom&&this._jflow.DOMwrapper.removeChild(this._dom),super.destroy()}},Oc=class extends Ac{constructor(t){super(t),this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.lineDash=t.lineDash,this.approximate=t.approximate||6,this._cacheAngle=void 0,this._cachePoints=[],this._cacheBoundingbox={from:[],to:[]}}_calculateAnchorPoints(){const t=this.from.calculateIntersection(this.to.getCenter()),e=this.to.calculateIntersection(this.from.getCenter());this._cachePoints[0]=t,this._cachePoints[1]=e;const n=e[0]-t[0],i=e[1]-t[1],s=Math.atan2(i,n);this._cacheAngle=s}isInViewBox(t){const e=this.from.getBoundingRect(),n=this.to.getBoundingRect(),i=this._cacheBoundingbox;return Ha(i.from,e)&&!Ha(i.to,n)||(Xa(i.from,e),Xa(i.to,n),this._calculateAnchorPoints()),!0}render(t){const[e,n]=this._cachePoints,i=this._cacheAngle,s=n[0]-e[0],o=n[1]-e[1];if(t.fillStyle=t.strokeStyle=this.backgroundColor,t.beginPath(),this.content){t.textAlign="center",t.font=`${this.fontSize} ${this.fontFamily}`,t.textBaseline="middle";const{actualBoundingBoxLeft:i,actualBoundingBoxRight:r,fontBoundingBoxAscent:a,fontBoundingBoxDescent:c}=t.measureText(this.content),u=s/2+e[0],h=o/2+e[1];t.fillText(this.content,u,h);const l=Math.abs(i)+Math.abs(r)+20,d=1.5*(Math.abs(a)+Math.abs(c));t.beginPath();let f=new Path2D;f.rect(u-l/2,h-d/2,l,d);const p=Math.min(n[0],e[0])-10,g=Math.min(n[1],e[1])-10,m=Math.abs(s)+20,_=Math.abs(o)+20;f.rect(p,g,m,_),t.clip(f,"evenodd")}t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.translate(n[0],n[1]),t.rotate(i),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-i),t.translate(-n[0],-n[1])}isHit(t){if(!this._cachePoints)return!1;const[e,n]=this._cachePoints;return Ia(t,e,n)<this.approximate}},Ic=Math.PI/180;class Mc extends Ac{constructor(t){super(t),this.approximate=t.approximate||6,this.radius=t.radius||0,this.minSpanX=t.minSpanX||10,this.minSpanY=t.minSpanY||10,this.lineDash=t.lineDash,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf,this.noArrow=!!t.noArrow,this._cacheAngle=[],this._cachePoints=[],this._cacheBoundingbox={from:[],to:[]}}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension(),n=this._cacheAngle;if(this.isSelf)Ra(this._cachePoints,t[this.fromDir],e[Ta.SELF],this.fromDir,this.toDir,this.minSpanX,this.minSpanY,!0),n[0]=this.fromDir,n[1]=this.toDir;else if(void 0!==this.fromDir&&void 0!==this.toDir)Ra(this._cachePoints,t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY),n[0]=this.fromDir,n[1]=this.toDir;else{const i=Ma(t,e);Ra(this._cachePoints,i.fromP,i.toP,i.fromDir,i.toDir,this.minSpanX,this.minSpanY),n[0]=i.fromDir,n[1]=i.toDir}}isInViewBox(t){return!!this._static||(this._calculateAnchorPoints(),function(t,e){let n=t[0],i=t.length,s=1;const[o,r,a,c]=e;for(;s<i;){const e=t[s];if(n[0]===e[0]){if(n[0]<a&&n[0]>o&&!(n[1]>c&&e[1]>c||n[1]<r&&e[1]<r))return!0}else if(n[1]<c&&n[1]>r&&!(n[0]>a&&e[0]>a||n[0]<o&&e[0]<o))return!0;n=e,s++}return!1}(this._cachePoints,t))}render(t){const e=this.radius,n=this._cachePoints,i=n[0],s=n[n.length-1],o=(this._cacheAngle[1]+2)%4*90*Ic;if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){const e=(this._cacheAngle[0]+2)%4*90*Ic;t.beginPath(),t.translate(i[0],i[1]),t.rotate(e),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-e),t.translate(-i[0],-i[1])}if(t.beginPath(),t.moveTo(i[0],i[1]),n.slice(1,n.length-1).forEach(((i,s)=>{if(this.radius){const o=n[s],r=n[s+2],{p1:a,p2:c}=function(t,e,n,i){const s=Na(e,t),o=Na(e,n),r=$a(s),a=$a(o);if(!r||!a)return{p1:null,p2:null};const c=Wa(s,i/r),u=Wa(o,i/a);return{p1:Na(e,c),p2:Na(e,u)}}(o,i,r,e);a&&c?(t.lineTo(a[0],a[1]),t.quadraticCurveTo(i[0],i[1],c[0],c[1])):t.lineTo(i[0],i[1])}else t.lineTo(i[0],i[1])})),t.lineTo(s[0],s[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),this.noArrow||(t.beginPath(),t.translate(s[0],s[1]),t.rotate(o),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-o),t.translate(-s[0],-s[1])),this.content)switch(t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,this.fromDir){case Ta.BOTTOM:t.textAlign="left",t.fillText(this.content,i[0]+2,i[1]+10);break;case Ta.RIGHT:t.textAlign="left",t.fillText(this.content,i[0]+10,i[1]-2)}}isHit(t){if(this._static)return!1;if(!this._cachePoints)return!1;const e=this._cachePoints;let n=e[0];const i=e.slice(1);do{const e=i.shift();if(e&&Ia(t,n,e)<this.approximate)return!0;n=e}while(n);return!1}cloneStatic(){const t=new Mc({});return Object.assign(t,{radius:this.radius,_cachePoints:this._cachePoints,_cacheAngle:this._cacheAngle,backgroundColor:this.backgroundColor,doubleLink:this.doubleLink,radius:this.radius,lineDash:this.lineDash,noArrow:this.noArrow,content:this.content,fontSize:this.fontSize,fontFamily:this.fontFamily,fromDir:this.fromDir,_static:!0}),t}}const Pc=Mc,Lc=Math.PI/180,jc=class extends Ac{constructor(t){super(t),this.approximate=t.approximate||6,this.minSpanX=t.minSpanX||0,this.minSpanY=t.minSpanY||0,this.lineDash=t.lineDash,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){const n=La(t[this.fromDir],e[Ta.SELF],this.fromDir,Ta.BOTTOM,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,Ta.BOTTOM]}else if(void 0!==this.fromDir&&void 0!==this.toDir){const n=La(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,this.toDir]}else{const n=Ma(t,e),i=La(n.fromP,n.toP,n.fromDir,n.toDir);this._cachePoints=[...n.fromP,...i],this._cacheAngle=[n.fromDir,n.toDir]}}render(t){this._calculateAnchorPoints();const e=this._cachePoints,n=ja.apply(null,[1,...e]);if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){const n=(this._cacheAngle[0]+2)%4*90*Lc;t.beginPath(),t.translate(e[0],e[1]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[0],-e[1])}if(t.beginPath(),t.moveTo(e[0],e[1]),t.bezierCurveTo(...e.slice(2)),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.beginPath(),t.translate(e[6],e[7]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[6],-e[7]),this.content){t.beginPath();const n=e[0]>e[6];let[i,s,o]=function(t,e){const n=.5,i=.125*e[0]+.375*e[2]+.375*e[4]+.125*e[6],s=.125*e[1]+.375*e[3]+.375*e[5]+.125*e[7],o=n*n*(e[2]-e[0])+.5*(e[4]-e[2])+t*t*(e[6]-e[4]),r=n*n*(e[3]-e[1])+.5*(e[5]-e[3])+t*t*(e[7]-e[5]);return[i,s,Math.atan2(r,o)]}(.5,e);t.translate(i,s),t.rotate(o),n&&t.rotate(Math.PI),t.font=`${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.fillText(this.content,0,-(parseInt(this.fontSize)||12)/4),n&&t.rotate(Math.PI),t.rotate(-o),t.translate(-i,-s)}}isHit(t){if(!this._cachePoints)return!1;const e=function(t,e){const n=new Ba(...e).project({x:t[0],y:t[1]});return Oa(t,[n.x,n.y])}(t,this._cachePoints);return e<this.approximate}};class Rc{constructor(t={}){this.direction=t.direction||"vertical",this.gap=t.gap??5,this.alignment=t.alignment||"center",this.justify=t.justify||"center",this._rawConfigs=t}reflow(t){const e=t._stack.filter((t=>t.visible&&!t.absolutePosition)),n=t._stack.filter((t=>t.visible&&t.absolutePosition)),i=t.width-t.padding.left-t.padding.right;if("vertical"===this.direction){let s=0,o=0,r=0,a=0;const c=e.concat(n);c.forEach(((t,e)=>{"block"===t.display&&(t.width=0,t.resetChildrenPosition(),t.reflow(),t._getBoundingGroupRect())})),e.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension(),c=e>0?this.gap:0;"outstretch"!==t.display&&(r=Math.max(n,r)),a+=i+c,s+=i/2+c+o,o=i/2,t.anchor=[0,s]})),c.forEach(((e,n)=>{if("block"===e.display)e.resetChildrenPosition(),e.width=r,e.reflow();else if("outstretch"===e.display){const n=t._belongs.width-t._belongs.padding.left-t._belongs.padding.right;e.resetChildrenPosition(),e.width=Math.max(n,r),e.reflow()}})),r=Math.max(i,r),a/=2,"start"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=-(r-n)/2,t.anchor[1]-=a})),"end"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=(r-n)/2,t.anchor[1]-=a})),"center"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[1]-=a}))}if("horizontal"===this.direction){let t=0,n=0,s=0,o=0,r=0;if(e.forEach(((e,i)=>{const{width:a,height:c}=e.getBoundingDimension(),u=i>0?this.gap:0;s=Math.max(c,s),o+=a+u,r+=a,t+=a/2+u+n,n=a/2,e.anchor=[t,0]})),"start"===this.justify){const t=i/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("end"===this.justify){const t=i/2-o;e.forEach(((e,n)=>{e.anchor[0]+=t}))}if("center"===this.justify){const t=o/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("space-between"===this.justify&&e.length>1){const t=Math.max(i,o),n=(t-o)/(e.length-1),s=t/2;e.forEach(((t,e)=>{t.anchor[0]+=n*e-s}))}"start"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=-(s-n)/2})),"end"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=(s-n)/2}))}if(n.length){"block"===t.display?t.getBoundingDimension():t._getBoundingGroupRect();const e=t.width/2,i=t.height/2,s=(t.padding.top-t.padding.bottom)/2,o=(t.padding.left-t.padding.right)/2;n.forEach((t=>{t.anchor=this._resolveAbsoluteAnchor(t.absolutePosition,t,e,i,o,s)}))}}_resolveAbsoluteAnchor(t,e,n,i,s,o){const{top:r,right:a,bottom:c,left:u,centerX:h,centerY:l}=t,{width:d,height:f}=e.getBoundingDimension(),p=d/2,g=f/2;let m=0,_=0;return"number"==typeof r&&(m=r+g-i-o),"number"==typeof a&&(_=n-a-p-s),"number"==typeof c&&(m=i-c-g-o),"number"==typeof u&&(_=u+p-n-s),"number"==typeof h&&(_=h),"number"==typeof l&&(m=l),[_,m]}clone(){return new Rc(this._rawConfigs)}}const Nc=Rc;class $c{constructor(t){this.source=t,this.id=t.id,this.type=t.type,this.level=void 0,this.sequence=void 0,this.isFree=!1,this.parent=void 0,this.idx=void 0,this.parentIterateType=void 0,this.hasEndPoint=!1}reflowPreCalculate(t=0,e=0,n){return this.level=t,this.sequence=e,this.spanX=1,this.spanY=1,n&&n(t,e,this),{spanX:this.spanX,spanY:this.spanY,level:t,sequence:e}}makeLink(t){return this}makeEndpoint(){}traverse(t){t(this)}getNodes(t){const e=[];return this.traverse((n=>{const i=t.getRenderNodeBySource(n.source);i&&e.push(i)})),e}linkSource(t){this.parent.source[this.parentIterateType].splice(this.idx+1,0,t)}remove(){this.parent.source[this.parentIterateType].splice(this.idx,1)}}const Wc={IfStatement:class extends $c{constructor(t){super(t),this.consequent=(t.consequent||[]).map(zc("consequent").bind(this)),this.alternate=(t.alternate||[]).map(zc("alternate").bind(this)),this.isLocked=!0,this.hasEndPoint=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=1,r=0,a=0,c=0;this.consequent.forEach(((i,s)=>{const{spanX:a,spanY:c}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,a),r+=c,t+=c}));const u=e+o;t=this.level,this.alternate.forEach(((e,i)=>{const{spanX:s,spanY:o}=e.reflowPreCalculate(t+1,u,n);a=Math.max(a,s),c+=o,t+=o})),i=Math.max(1,o+a),s+=Math.max(r,c),t=this.level+s-1;const{spanY:h}=this.Endpoint.reflowPreCalculate(t+1,e,n);return s+=h,this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;this.consequent.forEach((n=>{t({from:e,to:n,part:"consequent",fromDir:Ta.BOTTOM,toDir:Ta.TOP}),n=n.makeLink(t),e=n})),t({from:e,to:this.Endpoint,fromDir:Ta.BOTTOM,toDir:Ta.TOP,part:"consequent"});let n=this;return this.alternate.forEach((e=>{t({from:n,to:e,fromDir:n===this?Ta.RIGHT:Ta.BOTTOM,toDir:Ta.TOP,part:"alternate"}),e=e.makeLink(t),n=e})),t({from:n,to:this.Endpoint,fromDir:n===this?Ta.RIGHT:Ta.BOTTOM,toDir:Ta.RIGHT,part:"alternate"}),this.Endpoint}traverse(t){t(this),this.consequent.forEach((e=>{e.traverse(t)})),this.alternate.forEach((e=>{e.traverse(t)})),console.log(this.Endpoint),t(this.Endpoint)}linkSource(t,e){this.source[e.part].unshift(t)}},SwitchStatement:class extends $c{constructor(t){super(t),this.cases=(t.cases||[]).map(zc("case").bind(this)),this.cases.length&&(this.cases[this.cases.length-1].lastCase=!0),this.isLocked=!0,this.hasEndPoint=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=1,r=0;if(this.cases.length){const i=this.cases[this.cases.length-1].consequent;t=this.level,i.forEach((i=>{const{spanX:s,spanY:a}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,s),r+=a,t+=a}))}let a=o,c=0;this.cases.forEach(((i,s)=>{const o=e+a;let r=0,u=0;t=this.level,i.alternate.forEach((e=>{const{spanX:i,spanY:s}=e.reflowPreCalculate(t+1,o,n);r=Math.max(r,i),u+=s,t+=s})),a+=r,c=Math.max(c,u)})),i=Math.max(1,a),s=Math.max(r,c),t=this.level+s;const{spanY:u}=this.Endpoint.reflowPreCalculate(t+1,e,n);return s+=u,s+=1,this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;return this.cases.length&&this.cases[this.cases.length-1].consequent.forEach(((n,i)=>{t({from:e,to:n,fromDir:Ta.BOTTOM,toDir:Ta.TOP,part:"consequent"}),e=n.makeLink(t)})),console.log(e),t({from:e,to:this.Endpoint,fromDir:Ta.BOTTOM,toDir:Ta.TOP,part:"consequent"}),this.cases.forEach(((e,n)=>{let i=e;e.alternate.forEach((n=>{t({from:i,to:n,fromDir:i===e?Ta.RIGHT:Ta.BOTTOM,toDir:Ta.TOP,part:"alternate"}),i=n.makeLink(t)})),t({from:i,to:this.Endpoint,fromDir:i===e?Ta.RIGHT:Ta.BOTTOM,toDir:Ta.RIGHT,part:"alternate",minSpanX:32*(n+1)})})),this.Endpoint}traverse(t){t(this),this.cases.forEach((e=>{e.traverse(t)})),t(this.Endpoint)}getNodes(t){const e=[];return this.traverse((n=>{if("SwitchCase"===n.type)return;const i=t.getRenderNodeBySource(n.source);i&&e.push(i)})),e}linkSource(t,e){const n=this.source.cases;n[n.length-1].consequent.unshift(t)}},SwitchCase:class extends $c{constructor(t){super(t),this.consequent=(t.consequent||[]).map(zc("consequent").bind(this)),this.alternate=(t.alternate||[]).map(zc("alternate").bind(this)),this.lastCase=!1}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=0,r=0,a=0,c=0;this.lastCase&&this.consequent.forEach(((i,s)=>{const{spanX:a,spanY:c}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,a),r+=c,t+=c}));const u=e+Math.max(o,1);return t=this.level,this.alternate.forEach(((e,i)=>{const{spanX:s,spanY:o}=e.reflowPreCalculate(t+1,u,n);a=Math.max(a,s),c+=o,t+=o})),i=Math.max(1,o+a),s+=Math.max(r,c),this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}traverse(t){t(this),this.consequent.forEach((e=>{e.traverse(t)})),this.alternate.forEach((e=>{e.traverse(t)}))}linkSource(t,e){this.source[e.part].unshift(t)}},ForEachStatement:class extends $c{},WhileStatement:class extends $c{constructor(t){super(t),this.body=(t.body||[]).map(zc("body").bind(this)),this.isLocked=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);const o=e+1;return this.body.forEach((e=>{const{spanX:r,spanY:a}=e.reflowPreCalculate(t+1,o,n);i=Math.max(r,i),s+=a,t+=a})),this.spanX=i+1,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;return this.body.forEach(((n,i)=>{t({from:e,to:n,part:"body",fromDir:e===this?Ta.RIGHT:Ta.BOTTOM,toDir:Ta.TOP}),n=n.makeLink(t),e=n})),t({from:e,to:this,part:"body",fromDir:e===this?Ta.RIGHT:Ta.BOTTOM,anticlock:e===this,toDir:Ta.BOTTOM,isSelf:!0,minSpanX:20,minSpanY:20}),this}traverse(t){t(this),this.body.forEach((e=>{e.traverse(t)}))}linkSource(t,e){this.source[e.part].unshift(t)}},Root:class extends $c{constructor(t){super(t),this.isroot=!0,this.body=(t.body||[]).map(zc("body").bind(this));const e=zc("playground").bind(this);this.playground=(t.playground||[]).map(((t,n)=>{const i=e(t,n);return i.isFree=!0,i}))}reflowBodyPreCalculate(t=0,e=0,n){let i=1,s=1;return this.level=t,this.sequence=e,n&&n(t,e,this),this.body.forEach((o=>{const{spanX:r,spanY:a}=o.reflowPreCalculate(t+1,e,n);i=Math.max(r,i),s+=a,t+=a})),this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}reflowPlaygroundPreCalculate(t,e){this.playground.forEach((n=>{t(n),n.reflowPreCalculate(0,0,e)}))}makeLink(t){let e;return this.body.forEach((n=>{e?(t({from:e,to:n,part:"body",fromDir:Ta.BOTTOM,toDir:Ta.TOP}),n=n.makeLink(t),e=n):e=n})),this.playground.forEach((e=>{e.makeLink(t)})),this}traverse(t){this.body.forEach((e=>{e.traverse(t)})),this.playground.forEach((e=>{e.traverse(t)}))}},other:$c};function zc(t){return function(e,n){const i=Hc(e);if(i.parent=this,i.idx=n,i.parentIterateType=t,i.hasEndPoint){e.__endpoint__||(e.__endpoint__={type:"endpoint",id:`${i.id}-endpoint`});const s=Hc(e.__endpoint__);s.parent=this,s.idx=n,s.parentIterateType=t,i.Endpoint=s}return i}}function Hc(t){const e=t.type;return new(Wc[e]||Wc.other)(t)}function Xc(t){return t*t}const Yc=class{constructor(t){this.linkLength=t.linkLength||18,this.gap=t.gap||30,this.treeItemDraggable=t.treeItemDraggable??!0,this.reOrder(t.ast),this.static=!0}reOrder(t){this.ast=t,this.flowStack=[],this.flowLinkStack=[],this.root=Hc(this.ast),this.root.traverse((t=>{"playground"!==t.parentIterateType&&(t.isDraggable=this.treeItemDraggable),this.flowStack.push({type:t.type,source:t.source,layoutNode:t})}));const e={vertical:{},horizontal:{}},n={};let i;this.root.reflowBodyPreCalculate(0,0,((t,n,i)=>{i.isroot||(e.vertical[t]||(e.vertical[t]={}),e.vertical[t][n]=i,e.horizontal[n]||(e.horizontal[n]={}),e.horizontal[n][t]=i)})),this.root.reflowPlaygroundPreCalculate((t=>{i=t.id,n[t.id]={vertical:{},horizontal:{},node:t}}),((t,e,s)=>{const o=n[i];o.vertical[t]||(o.vertical[t]={}),o.vertical[t][e]=s,o.horizontal[e]||(o.horizontal[e]={}),o.horizontal[e][t]=s})),this.layoutMapping=e,this.playgroundLayoutMapping=n,this.root.makeLink((t=>{this.flowLinkStack.push(t)}))}staticCheck(t,e){if(t._layoutNode&&t._layoutNode.isFree)return!1;if(!e._linkStack.find((e=>e.from===t||e.to===t)))return!1;const n=t.anchor.slice();if(e.reflow(),e._linkStack.length<2)return;var i,s;return s=t.anchor,Xc((i=n)[0]-s[0])+Xc(i[1]-s[1])>1e3&&(t.dispatchEvent(new hc("outOfFlow",{anchor:n,instance:t,jflow:e,point:n})),!0)}reflowByMapping(t,e,n=0,i=0){const s=this.linkLength,o=this.gap,{vertical:r,horizontal:a}=e;let c=n;Object.keys(a).forEach(((e,n)=>{const i=a[e];let s=0;const r=Object.keys(i);r.forEach((e=>{const n=i[e],o=t.getRenderNodeBySource(n.source),{width:r}=o.getBoundingDimension();s=Math.max(r,s)})),c+=0===n?0:s/2,r.forEach((e=>{const n=i[e];t.getRenderNodeBySource(n.source).anchor[0]=c})),c+=s/2+o}));let u=i;Object.keys(r).forEach(((e,n)=>{const i=r[e];let o=0;const a=Object.keys(i);a.forEach((e=>{const n=i[e],s=t.getRenderNodeBySource(n.source),{height:r,width:a}=s.getBoundingDimension();o=Math.max(r,o)})),u+=0===n?0:o/2,a.forEach((e=>{const n=i[e];t.getRenderNodeBySource(n.source).anchor[1]=u})),u+=o/2+s}))}findLayoutNode(t){const e=this.flowStack.find((e=>e.configs===t));return e?e.layoutMeta:null}reflow(t){this.reflowByMapping(t,this.layoutMapping),Object.values(this.playgroundLayoutMapping).forEach((e=>{const n=t.getRenderNodeBySource(e.node.source);this.reflowByMapping(t,e,n.anchor[0],n.anchor[1])}))}};class qc{constructor(t,e,n){this.type="ERProperty",this.source=t,this.node=e,this.ref=t.ref,this.type=t.type,this.association=t.association,this.id=n?`${e.id}-${t.name}-navigation`:`${e.id}-${t.name}`,this._selfLink=!1,this.parentPropertyRef=void 0,this.getJflowInstance=void 0,this.doubleRef=void 0}}class Vc{constructor(t){this.type="ERNode",this.source=t,this.id=t.name,this.isDraggable=!0,this.getJflowInstance=void 0,this.propertyList=t.propertyList.map((t=>new qc(t,this))),this.navigationPropertyList=t.navigationPropertyList.map((t=>new qc(t,this,!0))),this.idProperty=this.propertyList.find((t=>"id"===t.source.name))}_traverseProperty(t){this.propertyList.forEach((e=>{const n=e.source.idRef;if(e.source.isParentRef,n&&"Array"!==e.source.type&&t[n]){const i=t[n];e.source.isParentRef&&(this.parentRef=i),i===this&&(e._selfLink=!0),e.parentPropertyRef=i.idProperty}})),this.navigationPropertyList.forEach((e=>{const n=e.source.objectRef;if(n&&t[n]){const i=t[n],s=i.navigationPropertyList.find((t=>t.source.objectRef===this.id));i===this&&(e._selfLink=!0),e.doubleRef=s}}))}traverse(t){t(this),this.propertyList.forEach((e=>{e.ref instanceof Vc&&t(e)}))}makeLink(t){this.propertyList.forEach((e=>{if(e.parentPropertyRef instanceof qc){const n=e.parentPropertyRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:Ta.LEFT,toDir:Ta.LEFT,content:e.association,minSpanX:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",content:e.association,meta:{from:e,to:n}})}})),this.navigationPropertyList.forEach((e=>{if(e.doubleRef instanceof qc){const n=e.doubleRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:Ta.LEFT,toDir:Ta.TOP,lineDash:[10,5],doubleLink:!0,content:e.association,minSpanX:80,minSpanY:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",lineDash:[10,5],doubleLink:!0,content:e.association,meta:{from:e,to:n,isObjectRef:!0}})}}))}}const Uc=class{constructor(t){this.static=!1,this.flowStack=[],this.flowLinkStack=[],this.erNodes=[],this.reOrder(t.entityRelationship)}reOrder(t){this.er=t,this.flowStack=[],this.flowLinkStack=[];const e=function(t){const e={},n=t.map((t=>{const n=new Vc(t);return e[t.name]=n,n}));return n.forEach((t=>{t._traverseProperty(e)})),n}(this.er),n=[];e.forEach((t=>{t.traverse((t=>{this.flowStack.push({type:t.type,configs:t.source,layoutMeta:t})})),t.makeLink((t=>{const{from:e,to:i,meta:s}=t;if(s.isObjectRef){const o=`${e}-${i}`,r=`${i}-${e}`,a=s.from;if(n.includes(o)||n.includes(r))return;a.source.isParentRef||(n.push(o),n.push(r),this.flowLinkStack.push(t))}else this.flowLinkStack.push(t)}))})),this.erNodes=e}staticCheck(t,e){return!1}reflow(t){this.flowLinkStack,this.erNodes;let e=0;const n={};function i(t,e=[]){let n=[0,0];return t.parentRef?e.includes(t.parentRef)?[n[0]-500+1e3*t.source.diagramWeight,n[1]]:(e.push(t.parentRef),n=i(t.parentRef,e),[n[0]-500+1e3*t.source.diagramWeight,n[1]+600]):n}this.erNodes.forEach((t=>{const s=t.getJflowInstance(),[o,r]=i(t);n[r]||(n[r]=[]),n[r].push(t),s.anchor=[o+500*n[r].length,r],e+=300}))}},Gc="input",Jc="control",Zc="input",Kc="compositionstart",Qc="compositionupdate",tu="compositionend",eu="enter",nu="delete",iu="backspace",su="arrowLeft",ou="arrowRight",ru="arrowUp",au="arrowDown",cu="undo",uu="redo",hu="shift_down",lu="shift_up",du="ctrla",fu="ctrlc",pu="ctrlv",gu="ctrlx",mu="startedit",_u="editclick",vu="shiftonclick",bu="doubleclick";class Eu extends EventTarget{_inputElement=null;constructor(t){super(),this._inputElement=function(t){const e=document.createElement("input");e.setAttribute("style","\n        width: 100px;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;"),e.setAttribute("tabindex",-1),e.setAttribute("aria-hidden",!0),e.setAttribute("spellcheck",!1),e.setAttribute("autocorrect","off");let n=!1,i={ctrlOn:!1,shiftOn:!1};return e.addEventListener("beforeinput",(e=>{e.preventDefault(),e.data&&(n||t(Zc,e.data))})),e.addEventListener("compositionstart",(e=>{t(Kc),n=!0})),e.addEventListener("compositionupdate",(e=>{t(Qc,e.data)})),e.addEventListener("compositionend",(i=>{t(tu,i.data),e.value="",n=!1})),e.addEventListener("keyup",(e=>{if(!n)switch(e.key){case"Shift":t(lu),i.shiftOn=!1;break;case"Meta":case"Control":i.ctrlOn=!1}})),e.addEventListener("keydown",(e=>{if(!n){switch(e.code){case"Enter":t(eu);break;case"Backspace":t(iu);break;case"Delete":t(nu);break;case"ArrowLeft":t(su);break;case"ArrowRight":t(ou);break;case"ArrowDown":t(au);break;case"ArrowUp":t(ru)}switch(e.key){case"Shift":t(hu),i.shiftOn=!0;break;case"Meta":case"Control":i.ctrlOn=!0;break;case"a":i.ctrlOn&&t(du);break;case"c":i.ctrlOn&&t(fu);break;case"v":i.ctrlOn&&t(pu);break;case"x":i.ctrlOn&&t(gu);break;case"y":i.ctrlOn&&(e.preventDefault(),t(uu));break;case"z":i.ctrlOn&&i.shiftOn?t(uu):i.ctrlOn&&t(cu)}}})),e}(this.controlCallback.bind(this)),t.append(this._inputElement),this._inputElement.focus()}controlCallback(t,e){switch(t){case Zc:case Kc:case Qc:case tu:case eu:case iu:case nu:this.dispatchEvent(new CustomEvent(Gc,{detail:{kind:t,data:e}}));break;case su:case ou:case ru:case au:case du:case hu:case lu:case cu:case uu:this.dispatchEvent(new CustomEvent(Jc,{detail:{kind:t}}))}}focus(){this._inputElement.focus({preventScroll:!0})}syncPosition(t,e){this._inputElement.style.transform=`translate(${t}px, ${e}px)`}destroy(){this._inputElement.remove()}}const yu=Eu;class Cu{_lines=[];get(t){return this._lines[t]}getLineAbove(t){let e=0;const n=this._lines;for(;e<n.length&&!(n[e].reduceHeight>t);)e++;return Math.min(e,n.length-1)}truncate(t){const e=wu.create(t);return this._lines=[e],e}push(t){this._lines.push(t)}forEach(t){this._lines.forEach(t)}length(){return this._lines.length}}class wu{width=0;anchorY=0;height=0;reduceHeight=0;_elements=[];static create(t){return new wu(t)}constructor(t={}){Object.assign(this,t)}_elements=[];get(t){return this._elements[t]}length(){return this._elements.length}insert(t,e){this._elements.splice(t,0,e)}push(t){this._elements.push(t)}tail(){return this._elements[this._elements.length-1]}copy(){return this._elements.slice()}getColumnNearest(t,e,n,i){const s=this._elements;if(t>=this.width){const t=s.length-1,e=s[t];let n=0;return"text"===e.type&&(n=e.source.length),[t,n]}{let o=0,r=0,a=0,c=null;for(;o<s.length-1;){r=a;const n=s[o];if("text"!==n.type){const t=c&&"text"===c.type?2*e:e;a+=n.width+t}else a+=n.width;if(a>t){c=n;break}c=n,o++}a<=t&&(r=a);const u=s[o];if("text"===u.type){const e=function(t,e,n,i){const s=e.source,o=s.length-1;if(0===e.width)return 0;const r=e.width;let a=Math.floor(t/r*o);return ea((e=>{let c,u,h;e.font=`${n} ${i}`;let l=s.substring(0,a),d=s.substring(a-1,a),f=s.substring(a,a+1),p=e.measureText(l).width,g=e.measureText(d).width,m=e.measureText(f).width;c=p-g/2,u=p+m/2;do{if(c<=t&&u>=t)break;if(c>t){const n=u-t;h=a,a-=n<100?1:Math.floor(n/u*h),l=s.substring(a,h),p-=e.measureText(l).width}else if(u<t){const n=t-c;h=a,a+=n<100?1:Math.floor(n/(r-c)*(o-h)),l=s.substring(h,a),p+=e.measureText(l).width}d=s.substring(a-1,a),f=s.substring(a,a+1),g=e.measureText(d).width,m=e.measureText(f).width,c=p-g/2,u=p+m/2}while(a>=0&&a<=o)})),a}(t-r,u,n,i);return[o,e]}return t-r>c.width/2?[o+1,0]:[o,0]}}forEach(t){this._elements.forEach(t)}}class xu{static create(t){const e=new xu;return e.from(t),e}_textElements=[];_records=[];_caretRecord=null;insertBefore(t,e){const n=this.findIndex(t);this.inersetAt(n,e)}insertAfter(t,e){const n=this.findIndex(t);this.get(n+1)&&e.setNeedWrap(t.needWrap||t.isTail),this.inersetAt(n+1,e)}findIndex(t){return this._textElements.findIndex((e=>e===t))}get(t){return this._textElements[t]}from(t){this._textElements=t}inersetAt(t,e){this.splice(t,0,e)}push(t){this.splice(this.length(),0,t)}remove(t){this.splice(t,1)}splice(){const t=this._textElements.splice(...arguments);this._records.push({op:"splice",args:arguments,removed:t})}copy(){return this._textElements.slice()}isEmpty(){return 1===this._textElements.length&&""===this._textElements[0].source}forEach(t){this._textElements.forEach(t)}tail(){return this._textElements[this._textElements.length-1]}filter(t){return this._textElements.filter(t)}length(){return this._textElements.length}startRecord(){return this._caretRecord={before:null,after:null},this._records=[],this._records}getRecord(){return this._records}recordBeforeCaret(t){this._caretRecord.before=t.toRange()}recordAfterCaret(t){this._caretRecord.after=t.toRange()}getCaretRecord(){return this._caretRecord}collectRecords(){return this._records}}class Au{needWrap=!1;width=0;reduceWidth=0;height=0;anchorX=0;anchorY=0;dirty=!0;isTail=!1;constructor(t,e){this.type=t,this.source=e}setSource(t,e){const n=this.source;this.source=t,this.dirty=!0,e&&e.push({op:"setSource",args:[this,t,n]})}setNeedWrap(t,e){const n=this.needWrap;this.needWrap=t,n!==t&&e&&e.push({op:"setNeedWrap",args:[this,t,n]})}shift(t,e){if("text"===this.type){const n=this.source.length,i=t+e;return i<0?"prev":i>n?"next":"self"}return e>0?"next":e<0?"prev":void 0}tailOffset(){return"text"===this.type?this.needWrap||this.isTail?this.source.length:Math.max(0,this.source.length-1):0}headOffset(){return 0}}function ku(t){return 1===t.length&&"setSource"===t[0].op}class Bu{static length=50;_undo=[];_redo=[];_editor=null;write(t,e){if(0===t.length)return;if(ku(t)){const n=t[0],i=this.getLastUndo();if(i&&ku(i._batch)){const t=i._batch[0];if(t.args[0]===n.args[0])return t.args[1]=n.args[1],void(i._caretMetaTo=e.after)}}const n=new Tu(t);n._caretMetaFrom=e.before,n._caretMetaTo=e.after,this._undo.push(n),this._undo.length>Bu.length&&this._undo.splice(0,1),this._redo.length&&(this._redo=[])}getLastUndo(){return this._undo[this._undo.length-1]}undo(){const t=this._undo.pop();return t&&(t.undo(this._editor),this._redo.push(t)),t}redo(){let t=this._redo.pop();for(;t&&t.SKIP_REDO;)t=this._redo.pop();return t&&(t.redo(this._editor),this._undo.push(t)),t}}class Tu{_batch=[];_caretMetaFrom=null;_caretMetaTo=null;constructor(t){this._batch=t}updateCaretMetaTo(t){this._caretMetaTo=t}undo(t){this._batch.slice().reverse().forEach((e=>{switch(e.op){case"range":const[n,i]=e.args,s=t._range;s.setInitialRange(n),s.setRange(i),s.enable();break;case"setSource":const[o,r,a]=e.args;o.source=a,o.dirty=!0;break;case"setNeedWrap":const[c,u,h]=e.args;c.needWrap=h,c.dirty=!0;break;case"splice":const l=t._flattenTxtElem,[d,f,...p]=e.args,g=e.removed;let m=0;p&&(m=p.length),l.splice(d,m,...g)}})),t._caret.fromRange(this._caretMetaFrom)}redo(t){this._batch.forEach((e=>{switch(e.op){case"setSource":const[n,i,s]=e.args;n.source=i,n.dirty=!0;break;case"setNeedWrap":const[o,r,a]=e.args;o.needWrap=r,o.dirty=!0;break;case"splice":t._flattenTxtElem.splice(...e.args)}})),t._caret.fromRange(this._caretMetaTo)}}const Fu=class{static create(t){return new this(t)}constructor(t){this._editor=t}exec(){}};class Su extends Fu{static name=su;exec(){const t=this._editor;t._range.disable();const e=t._flattenTxtElem,n=t._caret,i=n.getRow(),s=n.getColumn(),[o,r]=s,a=t._area.get(i),c=a.get(o),u=e.findIndex(c);switch(c.shift(r,-1)){case"prev":if(o>0){const t=a.get(o-1);n.setColumn([o-1,t.tailOffset()])}else if(u>0){const s=i-1,o=t._area.get(s).length()-1,r=e.get(u-1).tailOffset();n.setRow(s),n.setColumn([o,r])}break;case"self":n.setColumn(1,r-1)}n.refresh(),t.syncShadowInputPosition(),t._jflow._render()}}class Du extends Fu{static name=ou;exec(){const t=this._editor;t._range.disable();const e=t._flattenTxtElem,n=t._caret,i=n.getRow(),s=n.getColumn(),[o,r]=s,a=t._area.get(i),c=a.get(o),u=e.findIndex(c);switch(c.shift(r,1,u===e.length()-1)){case"next":if(o<a.length()-1){const t=a.get(o+1);"text"===c.type&&"text"!==t.type?n.setColumn([o+2,t.headOffset()]):n.setColumn([o+1,t.headOffset()])}else if(u<e.length()-1){const t=i+1,s=e.get(u+1).headOffset();n.setRow(t),n.setColumn([0,s])}break;case"self":n.setColumn(1,r+1)}n.refresh(),t.syncShadowInputPosition(),t._jflow._render()}}class Ou extends Fu{static name=ru;exec(){this._editor._range.disable();const t=this._editor._caret.getRow()-1;t>-1&&this._handler(t)}}class Iu extends Fu{static name=au;exec(){this._editor._range.disable();const t=this._editor._caret.getRow()+1;t<this._editor._area.length()&&this._handler(t)}}const Mu={_handler(t){const e=this._editor,n=e._caret,i=n.getRow(),s=n.getColumn(),[o,r]=s,a=e._area;let c=a.get(i).get(o),u=c.reduceWidth;r>0&&(u+=e.measureTextWidth(c.source.substring(0,r)));const h=a.get(t).getColumnNearest(u,e.elementSpace,e.fontSize,e.fontFamily);n.setRow(t),n.setColumn(h),n.refresh(),e.syncShadowInputPosition(),e._jflow._render()}};function Pu(t,e,n,i){if(!t)return[n,!1];if("text"===t.type&&"text"===e.type){const n=t.source.length;return t.setSource(t.source+e.source,i),t.setNeedWrap(e.needWrap,i),[n,!0]}return[n,!1]}Object.assign(Ou.prototype,Mu),Object.assign(Iu.prototype,Mu);class Lu extends Fu{static name=Gc;cacheIdx=null;exec(t,e){const n=this._editor,i=n._range,s=n._caret,o=n._flattenTxtElem,r=n._undoredo,a=o.startRecord();if(o.recordBeforeCaret(s),i.isEnable()&&(i.delete(n,a),t===iu||t===nu))return o.collectRecords(),o.recordAfterCaret(s),this._editor.refresh(),void r.write(a,o.getCaretRecord());const c=s.getRow();let[u,h]=s.getColumn();const l=n._area,d=l.get(c);let f=d.get(u),p=d.get(u-1),g="";if("text"===f.type)g=f.source;else if("text"===p?.type)g=p.source,f=p,h=g.length,s.setColumn([u-1,g.length]);else{const t=new Au("text","");o.insertBefore(f,t),f=t}let m,_=g.substring(0,h);switch(m=this.cacheIdx?g.substring(this.cacheIdx[1]):g.substring(h),t){case Zc:if(/\r?\n/.test(e)){let t=e.split(/\r?\n/);t=t.replace(/\t/,"");let n=o.findIndex(f),i=t.shift();f.setSource(_+i,a);let r=c+1;for(n++;t.length>1;){const e=new Au("text",t.shift());e.setNeedWrap(!0,a),r++,o.inersetAt(n,e),n++}i=t.shift();const u=o.get(n);if(u&&"text"===u.type)u.setSource(i+u.source,a);else{const t=new Au("text",i);o.inersetAt(n,t)}s.setRow(r),s.setColumn([0,i.length])}else _+=e,s.setColumn(1,s.getColumn(1)+e.length),f.setSource(_+m,a);break;case Kc:this.cacheIdx=[_.length,_.length];break;case Qc:_=_.substring(0,this.cacheIdx[0]),_+=e,f.setSource(_+m,a);const t=this.cacheIdx[0]+e.length;s.setColumn(1,t),this.cacheIdx[1]=t;break;case tu:_=_.substring(0,this.cacheIdx[0]),s.setColumn(1,this.cacheIdx[0]+e.length),this.cacheIdx=null,_+=e,f.setSource(_+m,a);break;case eu:f.setSource(_,a),f.setNeedWrap(!0,a);const n=new Au("text",m);o.insertAfter(f,n),s.setRow(c+1),s.setColumn([0,0]);break;case iu:switch(f.shift(h,-1)){case"prev":let t=o.findIndex(f);if(u>0){o.splice(t-1,1),t-=1;const[e,n]=Pu(o.get(t-1),f,0,a);n&&o.remove(t),s.setColumn([u-(e>0?2:1),e])}else if(t>0){const e=c-1,n=l.get(e).length()-1,[i,r]=Pu(o.get(t-1),f,0,a);r&&o.remove(t),s.setRow(e),s.setColumn([n,i])}break;case"self":_=_.substring(0,_.length-1),s.setColumn(1,s.getColumn(1)-1),f.setSource(_+m,a)}break;case nu:switch(f.shift(h,1)){case"next":let t=o.findIndex(f);if(u<d.length()-1){o.splice(t+1,1);const e=o.get(t+1),[n,i]=Pu(f,e,f.source.length,a);i&&o.remove(t+1),s.setColumn([u,n])}else if(t<o.length()-1){const e=o.get(t+1),[n,i]=Pu(f,e,f.source.length,a);i&&o.remove(t+1),s.setColumn([u,n])}break;case"self":m=m.substring(1),f.setSource(_+m,a)}}o.collectRecords(),o.recordAfterCaret(s),r.write(a,o.getCaretRecord()),this._editor.refresh()}}class ju extends Fu{static name=mu;exec(){const t=this._editor;if(!this._startEdit())return;const e=t._jflow;t.moveCaretByHitPoint(),t.createShadowInput(),t._caret.animate(e),t.syncShadowInputPosition()}_startEdit(){let t=!0;const e=this._editor;return e.dispatchEvent(new hc("edit",{target:e,preventDefault(){t=!1}})),t}}class Ru extends Fu{static name=_u;exec(){const t=this._editor;t.moveCaretByHitPoint(),t._caret.refresh(),t.syncShadowInputPosition(),t._range.disable()}}class Nu extends Fu{static name=bu;exec(){const t=this._editor;t.moveCaretByHitPoint();const e=t._caret,n=t._range,i=t._area,s=e.getRow(),o=i.get(s),r=o.length()-1;n.setInitialRange([s,0,0]),n.setRange([s,r,o.tail().tailOffset()]),n.handleCaret(e),n.enable(),t.syncShadowInputPosition()}}class $u extends Fu{static name=lu;exec(){this._editor._range.setInitialRange(null),this._editor.toggleShift(!1)}}class Wu extends Fu{static name=hu;exec(){const t=this._editor._range,e=this._editor._caret;t.setInitialRange(e.toRange()),this._editor.toggleShift(!0)}}class zu extends Fu{static name=vu;exec(){const t=this._editor;t.moveCaretByHitPoint();const e=this._editor._caret,n=this._editor._range;n.setRange(e.toRange()),n.enable(),n.handleCaret(e),e.refresh(),t.syncShadowInputPosition()}}class Hu extends Fu{static name=du;exec(){const t=this._editor,e=t._caret,n=t._range,i=t._area,s=i.length()-1,o=i.get(s),r=o.length()-1;n.setInitialRange([0,0,0]),n.setRange([s,r,o.tail().tailOffset()]),n.handleCaret(e),n.enable(),t.syncShadowInputPosition()}}class Xu extends Fu{static name=cu;exec(){this._editor._range.disable(),this._editor._undoredo.undo(),this._editor.refresh()}}class Yu extends Fu{static name=uu;exec(){this._editor._range.disable(),this._editor._undoredo.redo(),this._editor.refresh()}}class qu extends Ga{get currentLineHeight(){return this.lineHeight||parseInt(this.fontSize)}constructor(t){super(t),this.initStack(t),this.initLayout(t),this._undoredo=new Bu,this._undoredo._editor=this,this._caret=new class{_row=0;_column=[0,0];_status={show:!0,anime:null,lastElapsed:0,refreshElapsed:!1};setRow(t){this._row=t}setColumn(t,e){void 0!==e?this._column[t]=e:this._column=t}getRow(){return this._row}getColumn(t){return void 0!==t?this._column[t]:this._column}animate(t){this._status.anime=t.requestJFlowAnime((t=>{const e=this._status.lastElapsed;this._status.refreshElapsed&&(this._status.lastElapsed=t,this._status.refreshElapsed=!1),t-e>500&&(this._status.show=!this._status.show,this._status.lastElapsed=t)}))}cancelAnimate(){this._status.anime.cancel(),Object.assign(this._status,{show:!0,anime:null,lastElapsed:0})}isShow(){return this._status.show}refresh(){Object.assign(this._status,{show:!0,refreshElapsed:!0})}toRange(){return[this._row,...this._column]}fromRange(t){this._row=t[0],this._column=t.slice(1)}},this._range=new class{_enable=!1;_rangeFrom=null;_rangeTo=null;_initialRange=null;setInitialRange(t){this._initialRange=t}getRangeFrom(){return this._rangeFrom}getRangeTo(){return this._rangeTo}isEnable(){return this._enable}enable(){this._enable=!0}disable(){this._enable=!1}handleCaret(t){const[e,n,i]=this._rangeTo;t.setRow(e),t.setColumn([n,i])}setRange(t){const e=this._initialRange;this._compareRange(e,t)?(this._rangeFrom=e,this._rangeTo=t):(this._rangeFrom=t,this._rangeTo=e)}_compareRange(t,e){return!(t[0]>e[0]||t[0]===e[0]&&t[1]>e[1]||t[0]===e[0]&&t[1]===e[1]&&t[2]>e[2])}delete(t,e){if(this._enable){const n=t._area,i=t._caret,s=this._rangeFrom,o=this._rangeTo,r=n.get(s[0]).get(s[1]),a=n.get(o[0]).get(o[1]);let[c,u,h]=s;if(e.push({op:"range",args:[s.slice(),o.slice()]}),r===a){const t=r.source;r.setSource(t.substring(0,s[2])+t.substring(o[2]),e),r.dirty=!0}else{const n=t._flattenTxtElem;let i,l,d="",f="";const p=n.findIndex(r),g=n.findIndex(a);let m=!1;if("text"===r.type?d=r.source.substring(0,s[2]):i=n.get(p-1),"text"===a.type?(f=a.source.substring(o[2]),m=a.needWrap):l=n.get(g-1),i)if(n.splice(p,g-p+1),"text"===i.type)i.needWrap?c-=1:u-=1,h=i.source.length,i.setSource(i.source+f,e),i.dirty=!0,i.setNeedWrap(m,e);else{const t=new Au("text",d+f);t.setNeedWrap(m,e),n.splice(p,0,t)}else if(n.splice(p,g-p),l){const t=new Au("text",d);n.splice(p,0,t)}else a.setSource(d+f,e),a.dirty=!0;0===n.length()&&n.push(new Au("text",""))}this.disable(),i.setRow(c),i.setColumn([u,h])}}},this._shadowInput=void 0,this.textColor=t.textColor||"transparent",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"28px",this.fontWeight=t.fontWeight||"",this.elementSpace=t.elementSpace||5,this.lineSpace=t.lineSpace||5,this.placeholder=t.placeholder||"请输入",this.placeholderColor=t.placeholderColor||"#eee",this.cursorColor=t.cursorColor||"#60CFC4",this.textRangeColor=t.textRangeColor||"#4E75EC1A",this.minWidth=t.minWidth||0,this.resolver=()=>{const e=t.resolver();return 0!==e.length&&"text"===e[e.length-1].type||e.push(new Au("text","")),e},this._area=new Cu,this._flattenTxtElem=xu.create(this.resolver()),this._status={editing:!1,dragover:!1},this.commands=new Map,this.registCommand(ju),this.registCommand(Ru),this.registCommand($u),this.registCommand(Wu),this.registCommand(zu),this.registCommand(Lu),this.registCommand(Su),this.registCommand(Du),this.registCommand(Ou),this.registCommand(Iu),this.registCommand(Hu),this.registCommand(Nu),this.registCommand(Xu),this.registCommand(Yu),this._makeFunctional(),this._cacheViewBox=[]}registCommand(t){this.commands.has(t.name)||this.commands.set(t.name,t.create(this))}_makeFunctional(){this.addEventListener("dblclick",(t=>{t.currentTarget===this&&(t.detail.bubbles=!1,this._status.editing&&this.execCommand(bu))})),this.addEventListener("click",(t=>{if(t.currentTarget!==this)return;let e;t.detail.bubbles=!1,e=this._status.editing?this._status.shiftOn?vu:_u:mu,this.execCommand(e)})),this.addEventListener("blur",(t=>{this._status.editing=!1,this._shadowInput&&this._shadowInput.destroy(),this._belongs&&this._jflow._render(),this.dispatchEvent(new hc("change",{target:this,textElements:this._flattenTxtElem.copy()})),this._range.disable(),this._caret.cancelAnimate()})),this.addEventListener("instancePressStart",(t=>{if(this._status.editing&&!this._status.shiftOn){t.detail.bubbles=!1,t.detail.preventDefault();const e=this._currentp,n=this._positionToCursorOffset(e),i=this._range;i.setInitialRange([n.row,...n.column]);const s=t.detail.jflow;let o=!1;const r=(t=>{this._status.editing=!1,o=!0;const{offsetX:e,offsetY:n}=t,r=s._calculatePointBack([e,n]);s._stack.checkHit(r);const a=this._currentp,c=this._positionToCursorOffset(a);i.setRange([c.row,...c.column]),i.enable()}).bind(this);document.addEventListener("pointermove",r),document.addEventListener("pointerup",(t=>{document.removeEventListener("pointermove",r),i.setInitialRange(null),o&&(i.handleCaret(this._caret),this._status.editing=!0,this._shadowInput.focus())}),{once:!0})}})),this.addEventListener("dragenter",(()=>{this.moveCaretByHitPoint(),this._status.dragover=!0})),this.addEventListener("dragover",(()=>{this.moveCaretByHitPoint()})),this.addEventListener("dragleave",(()=>{this._status.dragover=!1}));const t=(t=>{if(!this._status.dragover)return;t.detail.bubbles=!1,this._status.dragover=!1;const e=this._caret,n=e.getRow(),i=e.getColumn(),s=this._area.get(n);let[o,r]=i;const a=s.get(o),c=s.get(o-1);let u=this._flattenTxtElem,h=u.findIndex(a);"text"!==a.type&&"text"===c?.type&&(r=c.source.length,h=u.findIndex(c));const l=u.length();this.dispatchEvent(new hc("insert",{...t.detail,type:t.type,textElements:u.copy(),idx:h,offset:r})),u=this._flattenTxtElem,this._status.editing&&(u.length()>l&&e.setColumn([o+u.length()-l,0]),this._shadowInput.focus()),this._status.editing&&this._caret.refresh(),this.syncShadowInputPosition(),this._range.disable()}).bind(this);this.addEventListener("pressEnd",t),this.addEventListener("drop",t)}toggleShift(t){this._status.shiftOn=t}execCommand(t){this.commands.get(t).exec()}createShadowInput(){const t=this._jflow;this._shadowInput=new yu(t.DOMwrapper),this._shadowInput.addEventListener(Jc,(t=>{const e=t.detail.kind;this.execCommand(e)})),this._shadowInput.addEventListener(Gc,(t=>{const e=t.detail.kind,n=t.detail.data;this.commands.get(Gc).exec(e,n)})),this._status.editing=!0,t.setFocusInstance(this)}moveCaretByHitPoint(){const t=this._currentp,e=this._caret,{row:n,column:i}=this._positionToCursorOffset(t);e.setRow(n),e.setColumn(i)}refresh(){this.recalculateUp(),this.syncShadowInputPosition(),this._jflow._render()}refreshTextElements(){this._flattenTxtElem=xu.create(this.resolver())}_positionToCursorOffset(t){const[e,n]=t,i=this._area,s=e+this.width/2,o=n+this.height/2,r=i.getLineAbove(o);return{row:r,column:i.get(r).getColumnNearest(s,this.elementSpace,this.fontSize,this.fontFamily)}}_caretToPosition(){const t=this._caret.getRow(),e=this._caret.getColumn(),n=this._area.get(t),[i,s]=e,o=n.get(i),r=this._flattenTxtElem.findIndex(o),a=this._flattenTxtElem.get(r-1);let c,u=this.currentLineHeight/2;if("text"===o.type){const t=o.source.substring(0,s);ea((e=>{e.beginPath(),e.font=`${this.fontSize} ${this.fontFamily}`,c=o.anchorX-o.width/2+e.measureText(t).width}))}else c=o.anchorX-o.width/2,u=Math.max(u,o.height/2);return 0===s&&a&&"text"!==a.type&&(u=Math.max(u,a.height/2)),[c,u,n.anchorY,a,o]}syncShadowInputPosition(){if(this._status.editing){const[t,e,n]=this._caretToPosition(),i=this.calculateToRealWorld([t,n+e]),s=this._jflow.canvasMeta,o=Math.min(s.actual_width-120,i[0]);this._shadowInput.syncPosition(o,i[1]),this._shadowInput.focus()}}render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this.anchor,i=this._jflow,s=this._area;t.translate(e,n);const o=this._flattenTxtElem;if(o.isEmpty())return t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.placeholderColor,t.fillText(this.placeholder,0,0),this._randerCursor(t),t.translate(-e,-n),void t.restore();t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.textColor,s.forEach((e=>{e.forEach((e=>{"text"===e.type&&t.fillText(e.source,e.anchorX,e.anchorY)}))})),o.forEach((e=>{if("text"!==e.type){const n=i.getRenderNodeBySource(e.source);n.visible&&(t.save(),n.render(t),t.restore())}})),this._randerCursor(t),this._renderRange(t),t.translate(-e,-n),t.restore()}_randerCursor(t){if(this._caret.isShow()&&(this._status.editing||this._status.dragover)){const[e,n,i]=this._caretToPosition();t.beginPath(),t.moveTo(e,i-n),t.lineTo(e,i+n),t.lineWidth=2,t.strokeStyle=this.cursorColor,t.stroke()}}_renderRange(t){const e=this._range;if(e.isEnable()){const n=this._area,i=this.textRangeColor,s=this.height,o=this.width,r=this.lineSpace,[a,c,u]=e.getRangeFrom(),[h,l,d]=e.getRangeTo();if(a===h){if(c===l&&u==d)return;const e=n.get(a);let o=a===n.length()-1?0:r;const h=e.reduceHeight-o-e.height-s/2,f=e.height,p=this._measureElementOffsetX(e.get(c),u,t),g=this._measureElementOffsetX(e.get(l),d,t);t.beginPath(),t.rect(p,h,g-p,f),t.fillStyle=i,t.fill()}else{let e=a,f=!0;for(;e<=h;){const a=n.get(e);let p=e===n.length()-1?0:r;const g=a.reduceHeight-p-a.height-s/2,m=a.height;if(f){const e=a.get(c),n=this._measureElementOffsetX(e,u,t),s=a.tail(),o=s.anchorX+s.width/2;t.beginPath(),t.rect(n,g,o-n,m),t.fillStyle=i,t.fill()}else if(e===h){const e=a.get(l),n=this._measureElementOffsetX(e,d,t);t.beginPath(),t.rect(-o/2,g,e.reduceWidth+(n-e.anchorX+e.width/2),m),t.fillStyle=i,t.fill()}else t.beginPath(),t.rect(-o/2,g,a.width,m),t.fillStyle=i,t.fill();f=!1,e++}}}}_measureElementOffsetX(t,e,n){return"text"!==t.type||0===e?t.anchorX-t.width/2:t.anchorX-t.width/2+n.measureText(t.source.substring(0,e)).width}measureTextWidth(t){let e;return ea((n=>{n.font=`${this.fontSize} ${this.fontFamily}`,e=n.measureText(t).width})),e}getBoundingDimension(){return{width:this.width,height:this.height}}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,o=t[0]+e,r=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=o,a[3]=r,a}_getViewBox(){const t=this._belongs.getCacheViewBox(),e=this._cacheViewBox;return this._calculatePointBackWithPoint(t[0],t[1],e,0,1),this._calculatePointBackWithPoint(t[2],t[3],e,2,3),this._cacheViewBox}getCacheViewBox(){return this._cacheViewBox}calculateToCoordination(t){const[e,n]=t,[i,s]=this.anchor,o=[e+i,n+s];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(o):o}calculateToRealWorld(t){const[e,n]=t,[i,s]=this.anchor,o=[e+i,n+s];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(o)}_calculatePointBack(t){const[e,n]=t,[i,s]=this.anchor;return[e-i,n-s]}_calculatePointBackWithPoint(t,e,n,i,s){n[i]=t-this.anchor[0],n[s]=e-this.anchor[1]}isHit(t,e){const n=this._calculatePointBack(t),i=this._jflow;this._currentp=n;let s=[];this._flattenTxtElem.forEach((t=>{if("text"!==t.type){const e=i.getRenderNodeBySource(t.source);e.visible&&s.push(e)}}));const o=this._stack.checkHit(n,e,(t=>s.includes(t)));if(o)return o;const r=this.anchor,a=this.width/2,c=this.height/2;return t[0]>r[0]-a&&t[0]<r[0]+a&&t[1]>r[1]-c&&t[1]<r[1]+c}clone(){return new kc({width:this.width,height:this.height,cache:t=>{const[e,n]=this.anchor;t.translate(-e+this.width/2,-n+this.height/2),this.render(t)}})}destroy(){this._jflow._focus.instance===this&&this._jflow.blur()}}Object.assign(qu.prototype,ec),Object.assign(qu.prototype,nc),Object.assign(qu.prototype,{_getBoundingGroupRect(){},resetChildrenPosition(){},reflow(){let t=this.currentLineHeight;const e=this._flattenTxtElem,n=this._area;if(e.isEmpty()){let i=0;const s=e.get(0);return ea((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,i=t.measureText(this.placeholder).width})),n.truncate({height:t,reduceHeight:t}).insert(0,s),Object.assign(s,{anchorX:-i/2,height:t,isTail:!0}),this.width=i,void(this.height=t)}const i=this._jflow;ea((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,e.forEach((e=>{"text"===e.type&&e.dirty&&(e.width=t.measureText(e.source).width,e.dirty=!1)}))}));const s=new Cu;s.truncate({height:t});let o=s.get(0),r=0,a=0,c=null;const u=this.lineSpace,h=this.elementSpace;e.forEach((e=>{if(o.push(e),e.reduceWidth=o.width,"text"===e.type)e.height=t,o.width+=e.width,e.needWrap&&(r+=o.height+u,o.reduceHeight=r,a=Math.max(o.width,a),o=wu.create({height:t}),s.push(o));else{const t=i.getRenderNodeBySource(e.source);e.height=t.height,o.height=Math.max(o.height,t.height);const n=c&&"text"!==c.type?h:2*h;o.width+=t.width+n}c=e})),e.tail().isTail=!0,r+=o.height,o.reduceHeight=r,a=Math.max(this.minWidth,Math.max(o.width,a));const l=a/2;let d=-r/2,f=0;s.forEach((t=>{const{height:e,reduceHeight:n}=t,s=d+f+e/2;t.anchorY=s;let o=-l,r=null;t.forEach((t=>{if("text"===t.type)t.anchorY=s,t.anchorX=o+t.width/2,o+=t.width;else{const e=i.getRenderNodeBySource(t.source),n=!r||"text"===r.type,a=n?2*h:h;t.width=e.width,t.anchorY=s,t.anchorX=o+t.width/2+(n?a/2:0),e.anchor=[t.anchorX,t.anchorY],o+=t.width+a}r=t})),f=n})),this._area=s,this.width=a,this.height=r}});const Vu=qu;!function(){const t=".jfloweditablespan[contenteditable=true]:empty:before{\n        content: attr(placeholder);\n        opacity: 0.5;\n        pointer-events: none;\n        display: block; \n      }",e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");e.appendChild(n),n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}();const Uu=fc(gc),Gu=fc(mc),Ju=fc(vc),Zu=fc(bc,{shapeShift:(t,e)=>[t+.28865*e,e]}),Ku=fc(class extends bc{constructor(t){super(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=i/1.732,r=n-s,a=n+s,c=n-s+o,u=n+s-o,h=e-i,l=e+i;t.moveTo(e,r),t.lineTo(l,c),t.lineTo(l,u),t.lineTo(e,a),t.lineTo(h,u),t.lineTo(h,c),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore(),this._cachePoints=[[e,r],[l,c],[l,u],[e,a],[h,u],[h,c]]}},{shapeShift:(t,e)=>[t,e+.5773*t]}),Qu=fc(_c),th=fc(pc,{shapeShift(t,e,n){const i=Math.ceil(Math.sqrt(t*t+e*e)/2);n.radius=i;const s=2*i;return[s,s]}});class eh extends EventTarget{constructor(t){super(),this.uniqueName="jflow",this.eventAdapter=new class{constructor(t={}){this.plugin=function(){let t={pointerDown:!1,dirty:!1};return{canvas:{wheel:function(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:o}=t;t.ctrlKey?(o=-o,e.zoomHandler(n,i,s,o,t)):e.panHandler(-s,-o,t)},pointerdown:function(e,n){const{offsetX:i,offsetY:s,deltaY:o,button:r}=e;0===r&&(t.pointerDown=!0,n.pressStartHandler(i,s,e))},pointermove:function(e,n){const{offsetX:i,offsetY:s}=e;t.pointerDown&&(t.dirty=!0),n.pressMoveHandler(i,s,e)},pointerup:function(e,n){e.preventDefault();const{offsetX:i,offsetY:s,button:o}=e;0===o&&t.pointerDown&&t.dirty&&(t.pointerDown=!1,t.dirty=!1,n.pressUpHanlder(!1,e))},contextmenu:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.contextMenuHanlder(n,i,t)},dblclick:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.dblclickHandler(n,i,t)},click:function(e,n){e.preventDefault(),e.stopPropagation();const{offsetX:i,offsetY:s}=e;t.dirty||(t.pointerDown=!1,t.dirty=!1,n.clickHanlder(i,s,e))}},document:{pointerup:function(t,e){e.pressUpHanlder(!0,t)}}}}(),this.use(t),this.canvasHandlers=[],this.documentHandlers=[]}use(t={}){const{canvas:e,document:n}=t;if(e)for(let t in e)e.hasOwnProperty(t)&&(this.plugin.canvas[t]=e[t]);if(n)for(let t in n)n.hasOwnProperty(t)&&(this.plugin.document[t]=n[t])}apply(t){const{canvas:e,document:n}=this.plugin,i=t.canvas;for(let s in e){const o=e[s];function r(e){o(e,t)}i.addEventListener(s,r),this.canvasHandlers.push({eventName:s,handlerWrapperd:r})}for(let a in n){let c,u={};function h(e){c(e,t)}"function"==typeof n[a]?c=n[a]:(c=n[a].handler,Object.assign(u,n[a].options)),document.addEventListener(a,h,u),this.documentHandlers.push({eventName:a,handlerWrapperd:h,options:u})}}unload(t){const e=t.canvas;this.canvasHandlers.forEach((({eventName:t,handlerWrapperd:n})=>{e.removeEventListener(t,n)})),this.documentHandlers.forEach((({eventName:t,handlerWrapperd:e,options:n})=>{console.log("unload",t),document.removeEventListener(t,e,n)}))}}(t.eventAdapter),this.initNodeWeakMap(),this.initAnime(),this.initStack(t),this.initLayout(t),this.ctx=null,this.canvas=null,this.dpr=1,this.padding=20,this.position=null,this.scale=null,this.initialZoom=t.initialZoom,this.initialPosition=t.setInitialPosition,this.maxZoom=t.maxZoom||3,this.minZoom=t.minZoom||.5,this.NodeRenderTop=!!t.NodeRenderTop,this.worldMargin=t.worldMargin,this.draggingbehavior=Object.assign({panInBorder:{enable:!0,padding:20,deltamovement:8,allowMovingTargetInPan:!0}},t.draggingbehavior||{}),this.scrollBarBehavior=Object.assign({enable:!0},t.scrollBarBehavior||{}),this.offeset=null,this._lastState={x:null,y:null,dragging:!1,processing:!1},this._lastDragState={target:null,targetLink:null,processing:!1},this._target={instance:null,link:null,moving:null,isInstanceDirty:!1,isLinkDirty:!1,cache:{stack:null,belongs:null,point:null},meta:{x:void 0,y:void 0,initialX:void 0,initialY:void 0},status:{dragovering:!1,dragging:!1,processing:!1,movingState:!1}},this._focus={instance:null},this._dragOverTarget=null,this.allowDrop=t.allowDrop,this._tempNode=null,this._tempLink=null,this.mode=Fa.DEFAULT,this._allowMovingTarget=!0,this.canvasMeta={},this._cacheViewBox=[]}setMovingTargets(t){Object.assign(this._target,{moving:t})}setTempDraggingInstance(t){t._belongs=this,this._tempNode=t,Object.assign(this._target,{moving:[this._tempNode],dragging:!0})}removeTempDraggingInstance(){if(this._tempNode){const t=this._tempNode.anchor;return this._tempNode=null,t}}preventDefaultDragging(){this._allowMovingTarget=!1}allowDefaultDragging(){this._allowMovingTarget=!0}$mount(t){const{canvas:e,ctx:n,scale:i,width:s,height:o,raw_width:r,raw_height:a,left:c,top:u}=Zr(t);this.reflow(),this.ctx=n,this.DOMwrapper=t,this.canvas=e,this.canvas.setAttribute("data-jflow",!0),this.canvas.$jflow=this,this.canvasMeta={width:r,height:a,actual_width:s,actual_height:o},this.dpr=i,this._getBoundingGroupRect();const h=this.padding,{width:l,height:d,x:f,y:p}=this.bounding_box,g={x:h,y:h,width:s-2*h,height:o-2*h},m={x:0,y:0,offsetX:0,offsetY:0},_=g.width/l,v=g.height/d,b=_<=v?"x":"y";let E;E=this.initialZoom?this.initialZoom:Math.min(_,v),this.scale=E,E>this.maxZoom&&(this.maxZoom=E),E<this.minZoom&&(this.minZoom=E);const y=f*E,C=p*E,w=g.width,x=g.height;if(this.initialPosition){const{x:t,y:e}=this.initialPosition(y,C,w,x,g.x,g.y,s,o,f,p,l,d);m.x=t,m.y=e}else m.x="x"===b?g.x:(w-l*E)/2+h,m.y="y"===b?g.y:(x-d*E)/2+h;m.offsetX=m.x-y,m.offsetY=m.y-C,this.position=m,this._readyToRender=!0,this.scrollBarBehavior.enable&&this.initScrollBar(this.scrollBarBehavior),this.__render(),this._createEventHandler(),na((t=>{this.dpr=t,this.resizeCanvas(),this.scheduleRender()}),(t=>{this.destroyDprListener=t}))}setLinkingMode(t,e,n){const i=this.getRenderNodeBySource(t);this._tempNode=new Ja,this._tempLink=e(n?{from:this._tempNode,to:i}:{from:i,to:this._tempNode}),this.sendMessage({instance:t}),this.mode=Fa.LINKING}isInLinkingMode(){return this.mode===Fa.LINKING}setLinkingLink(t){this.mode===Fa.LINKING&&this._tempLink.setConfig(t)}resetLinkingLink(){this.mode===Fa.LINKING&&this._tempLink.setConfig({to:this._tempNode})}clearTemp(){this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null),this._render()}preventClearTemp(){this._preventClearTemp=!0}resizeCanvas(){if(this.canvas&&this.DOMwrapper){const{width:t,height:e,raw_width:n,raw_height:i}=function(t,e){const{width:n,height:i,left:s,top:o}=e.getBoundingClientRect();t.style.width=n+"px",t.style.height=i+"px";const r=window.devicePixelRatio;return t.width=Math.floor(n*r),t.height=Math.floor(i*r),{width:n,height:i,raw_width:t.width,raw_height:t.height}}(this.canvas,this.DOMwrapper);this.canvasMeta={width:n,height:i,actual_width:t,actual_height:e}}}setFocusInstance(t){this._focus.instance=t}focusOn(t){const e=this._calculatePointBack([this.canvasMeta.actual_width/2,this.canvasMeta.actual_height/2]);let n=t.anchor;t._belongs.calculateToCoordination&&(n=t._belongs.calculateToCoordination(n));const i=(e[0]-n[0])*this.scale,s=(e[1]-n[1])*this.scale;this._recalculatePosition(i,s),this._render()}_getBoundingGroupRect(){const t=this._stack.getBoundingRectPoints();if(this.bounding_box){this.bounding_box=Sa(t);const{x:e,y:n}=this.bounding_box,i=this.scale;this.position.x=this.position.offsetX+e*i,this.position.y=this.position.offsetY+n*i}else this.bounding_box=Sa(t)}_createEventHandler(){const t=this.canvas;let e;this.eventAdapter.apply(this);const n=()=>{this.eventAdapter.unload(this),this.destroyDprListener()};if(e=n,this.allowDrop){const i=this._onDragover.bind(this),s=this._onDrop.bind(this),o=this._onDragLeave.bind(this);t.addEventListener("dragstart",(t=>{t.preventDefault()})),t.addEventListener("dragover",i),t.addEventListener("drop",s),t.addEventListener("dragleave",o),e=()=>{n(),t.removeEventListener("dragover",i),t.removeEventListener("drop",s),t.removeEventListener("dragleave",o)}}this.destroy=e}_targetLockOn(t,e){let n=this._calculatePointBack(t);const i=n;this._currentp=n;let s=this._stack;const o=this._getViewBox(),r=s.checkHit(n,(t=>this._target.status.dragging&&t===this._getMovingTarget()),(t=>za(o,t.getBoundingRect())));let a,c=this._linkStack;if(r&&r._belongs!==this||(a=c.checkHit(n,(t=>{if(!this._target.status.dragging)return!1;const e=this._getMovingTarget();return t.from===e||t.to===e}))),a||(a=c.checkHit(n,(t=>!t.ON_TOP))),Object.assign(this._target,{instance:r,link:a,isInstanceDirty:r===this._target.instance,isLinkDirty:a===this._target.link}),Object.assign(this._target.cache,{stack:s,belongs:this,point:n,topLayerPoint:i}),Object.assign(this._target.meta,{x:t[0],y:t[1]}),"pressStart"===e&&!this._target.status.dragging&&!this._target.status.dragovering){let t=r;for(;t&&t._belongs.lock&&t!==this;)t=t._belongs;this.setMovingTargets(t&&[t]),t&&r.bubbleEvent(new hc("afterResolveMovingTarget",{event:e,target:t,jflow:this,bubbles:!0}))}return["pressStart","click","dblclick","contextclick"].includes(e)&&this._focus.instance&&this._focus.instance!==r&&(this._focus.instance.dispatchEvent(new hc("blur",{relatedTarget:r})),this._focus.instance=null),this._target}blur(){this._focus.instance&&(this._focus.instance.dispatchEvent(new hc("blur",{relatedTarget:null})),this._focus.instance=null)}_getMovingTarget(){return this._target.moving&&this._target.moving[0]}_processDragOver(t,e){if(this._dragOverTarget!==t){const n=this.readMessage()?.instance;this._dragCurrentData=n;const{point:i}=this._target.cache;if(this._dragOverTarget){const t=this._dragOverTarget;t.dispatchEvent(new hc("dragleave",{event:e,instance:t,target:n,jflow:this,point:i}))}t&&t.dispatchEvent(new hc("dragenter",{event:e,instance:t,target:n,jflow:this,point:i})),this._dragOverTarget=t}else this._dragOverTarget&&this._dragOverTarget.dispatchEvent(new hc("dragover",{event:e,instance:t,jflow:this,target:this._dragCurrentData}));this._processPanInBorder()}_processPanInBorder(){if(this.draggingbehavior?.panInBorder?.enable&&(this.draggingbehavior.panInBorder.timer||(this.draggingbehavior.panInBorder.timer=Date.now()),Date.now()-this.draggingbehavior.panInBorder.timer>500)){const[t,e,n,i]=this._cacheViewBox,[s,o]=this._currentp,{padding:r,deltamovement:a}=this.draggingbehavior.panInBorder;let c=0,u=0;s<t+r&&(c=a),s>n-r&&(c=-a),o<e+r&&(u=a),o>i-r&&(u=-a),this.__processOverAnime&&this.__processOverAnime.cancel(),c||u?this.__processOverAnime=this.requestJFlowAnime((()=>{this.panHandler(c,u)})):this.draggingbehavior.panInBorder.timer=null}}_onDragover(t){if(t.preventDefault(),t.stopPropagation(),this._lastDragState.processing)return;this._lastDragState.processing=!0;const{offsetX:e,offsetY:n}=t;Object.assign(this._target.status,{dragovering:!0}),this._targetLockOn([e,n]);const i=this._target.instance||this._target.link;this._processDragOver(i,t),this._target.isLinkDirty||this._target.isInstanceDirty?Promise.resolve().then((()=>{this._render(),this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._lastDragState.processing=!1})):this._lastDragState.processing=!1}_cancelPanInBorder(){this.__processOverAnime&&this.__processOverAnime.cancel(),this.draggingbehavior?.panInBorder&&(this.draggingbehavior.panInBorder.timer=null)}_onDragLeave(){this._cancelPanInBorder()}_onDrop(t){this._cancelPanInBorder();const e=this.consumeMessage(),n=e?.instance;if(this._dragOverTarget){const e=this._dragOverTarget;e.dispatchEvent(new hc("dragoverend",{event:t,instance:e})),this._dragOverTarget=null}const{link:i,instance:s}=this._target,{point:o,belongs:r}=this._target.cache;i?i.dispatchEvent(new hc("drop",{event:t,instance:n,link:i,jflow:this,belongs:r,point:o})):s?s.bubbleEvent(new hc("drop",{event:t,instance:n,jflow:this,target:s,point:o,bubbles:!0})):this.dispatchEvent(new hc("drop",{event:t,instance:n,jflow:this,target:s,point:o})),requestAnimationFrame((()=>{this.cancelDrop()}))}cancelDrop(){this._target.instance=null,this._target.link=null,Object.assign(this._target.status,{dragovering:!1})}zoomHandler(t,e,n,i,s){if(this._zooming)return;this._zooming=!0;const{width:o,height:r,x:a,y:c}=this.bounding_box,{actual_width:u,actual_height:h}=this.canvasMeta;let l=this.minZoom;if(this.worldMargin){const t=this.worldMargin,e=o+2*t,n=r+2*t;l=Math.max(l,Math.max(u/e,h/n))}let d=this.scale;d*=i>0?1.05:1/1.05,d=Math.min(this.maxZoom,Math.max(l,d));var f=d-this.scale,p=o*this.scale,g=r*this.scale,m=o*f,_=r*f,v=-(t-this.position.x)/p,b=-(e-this.position.y)/g;this.scale=d,this._recalculatePosition(v*m,b*_),this.dispatchEvent(new hc("zoompan",{deltaX:0,deltaY:0})),this.scheduleRender((()=>{this._zooming=!1}))}panHandler(t,e,n){if(this._panning)return;this._panning=!0;const{dragging:i}=this._target.status;if(i){const n=this._target.moving;n&&this.draggingbehavior.panInBorder.allowMovingTargetInPan&&n.forEach((n=>{n.anchor[0]+=-t/this.scale,n.anchor[1]+=-e/this.scale}))}this._recalculatePosition(t,e),this.dispatchEvent(new hc("zoompan",{deltaX:t,deltaY:e})),this.scheduleRender((()=>{this._panning=!1}))}pressStartHandler(t,e,n){if(this.checkScrollDragging())return;Object.assign(this._target.meta,{initialX:t,initialY:e});const{link:i,instance:s}=this._targetLockOn([t,e],"pressStart");if(this.mode===Fa.LINKING)return;if(Object.assign(this._target.status,{dragging:!0,processing:!1}),this._target.moving){const t=this._getMovingTarget();t.dispatchEvent(new hc("pressStart",{event:n,instance:t,jflow:this}))}const o=this._resolveLockOnTarget(i,s);o&&o.bubbleEvent(new hc("instancePressStart",{event:n,target:o,jflow:this,bubbles:!0,preventDefault:()=>{this._preventPressSequeence=!0,this._clearTarget(),document.addEventListener("pointerup",(t=>{t.preventDefault(),t.stopPropagation(),this._preventPressSequeence=!1}),{once:!0})}})),this._preventPressSequeence||this.dispatchEvent(new hc("jflowPressStart",{event:n,jflow:this}))}pressMoveHandler(t,e,n){if(this._preventPressSequeence)return;if(this.checkScrollDragging())return;const{dragging:i,processing:s}=this._target.status,{x:o,y:r}=this._target.meta;if(!i){if(this.checkScrollBarHover(t,e))return;this.resetScrollBarHover()}if(!i&&!s){const{link:i,instance:s}=this._targetLockOn([t,e]),o=this._resolveLockOnTarget(i,s);if(o?o.bubbleEvent(new hc("instancemousemove",{event:n,instance:o,jflow:this,bubbles:!0})):this.dispatchEvent(new hc("instancemousemove",{event:n,instance:null,jflow:this})),this.mode===Fa.LINKING)return this._tempNode.anchor=this._currentp,this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1})),void this._processPanInBorder()}if(this.dispatchEvent(new hc("canvasmousemove",{event:n,jflow:this})),!i)return;if(s)return;const a=this._target.moving;this._target.status.movingState=!0,this._target.status.processing=!0;const c=t-o,u=e-r;a?this._allowMovingTarget&&a.forEach((t=>{t.anchor[0]+=c/this.scale,t.anchor[1]+=u/this.scale})):(this._recalculatePosition(c,u),this.dispatchEvent(new hc("zoompan",{deltaX:c,deltaY:u})));const{instance:h,link:l}=this._targetLockOn([t,e]);this._processDragOver(h||l,n),this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1}))}pressUpHanlder(t,e){if(!this._preventPressSequeence){if(this.__processOverAnime&&this.__processOverAnime.cancel(),this._cancelPanInBorder(),this._target.meta,this.mode===Fa.LINKING){const t=this._target.instance,n=this.consumeMessage();let i=!1;const s=()=>{i=!0};if(t)t.bubbleEvent(new hc("link",{event:e,target:t,jflow:this,payload:n,bubbles:!0,link:this._tempLink,preventDefault:s}));else{const{offsetX:t,offsetY:i}=e;this.dispatchEvent(new hc("link",{event:e,jflow:this,payload:n,anchor:this._calculatePointBack([t,i]),link:this._tempLink,preventDefault:s}))}if(i)return;return this._clearTarget(),this._preventClearTemp||(this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null)),this._preventClearTemp=!1,this.mode=Fa.DEFAULT,void this._render()}if(this._target.moving){let t=!1;if(this._layout.static&&(t=this.staticCheck(this._getMovingTarget())),!t&&this._target.link){const{point:t,belongs:n}=this._target.cache,i=this._target.link,s=this._getMovingTarget();i.dispatchEvent(new hc("drop",{event:e,instance:s,link:i,jflow:this,belongs:n})),this._target.link=null,this._target.instance=null}this._target.moving&&(this._target.instance?this._target.instance.bubbleEvent(new hc("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this,target:this._target.instance,bubbles:!0})):this.dispatchEvent(new hc("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this}))),this._target.moving=null,this.removeTempDraggingInstance(),this._render()}this._clearTarget()}}clickHanlder(t,e,n){const{link:i,instance:s,meta:o}=this._targetLockOn([t,e],"click");if(Math.abs(o.initialX-o.x)<1&&Math.abs(o.initialY-o.y)<1){if(n.target!==this.canvas)return this._clearTarget(),void Object.assign(this._target.meta,{initialX:void 0,initialY:void 0});const{topLayerPoint:t}=this._target.cache,e=this._resolveLockOnTarget(i,s);if(e){const i=e;i.bubbleEvent(new hc("click",{event:n,jflow:this,target:i,topLayerPoint:t,bubbles:!0}))}else this.dispatchEvent(new hc("click",{event:n,jflow:this,topLayerPoint:t}));this._clearTarget(),Object.assign(this._target.meta,{initialX:void 0,initialY:void 0})}}contextMenuHanlder(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"contextclick"),{topLayerPoint:o}=this._target.cache,r=this._resolveLockOnTarget(i,s);if(r){const t=r;t.bubbleEvent(new hc("contextclick",{event:n,jflow:this,target:t,topLayerPoint:o,bubbles:!0}))}else this.dispatchEvent(new hc("contextclick",{event:n,jflow:this,topLayerPoint:o}))}dblclickHandler(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"dblclick"),{topLayerPoint:o}=this._target.cache,r=this._resolveLockOnTarget(i,s);if(r){const t=r;t.bubbleEvent(new hc("dblclick",{event:n,jflow:this,target:t,topLayerPoint:o,bubbles:!0}))}else this.dispatchEvent(new hc("dblclick",{event:n,jflow:this,topLayerPoint:o}))}_resolveLockOnTarget(t,e){return t?.ON_TOP?t:e||t}_clearTarget(){Object.assign(this._target.meta,{x:void 0,y:void 0}),Object.assign(this._target.status,{dragging:!1,processing:!1,movingState:!1}),Object.assign(this._target,{instance:null,link:null,moving:null})}_recalculatePosition(t,e,n){const{x:i,y:s,width:o,height:r}=this.bounding_box,{actual_width:a,actual_height:c}=this.canvasMeta;if(void 0===n&&(n=this.scale),this.worldMargin){const u=this.worldMargin,h=(i+o+u)*n-a,l=(i-u)*n,d=i*n,f=this.position.x+t-d;this.position.offsetX=Math.min(Math.max(-h,f),-l),this.position.x=this.position.offsetX+d;const p=(s+r+u)*n-c,g=(s-u)*n,m=s*n,_=this.position.y+e-m;this.position.offsetY=Math.min(Math.max(-p,_),-g),this.position.y=this.position.offsetY+m}else this.position.x+=t,this.position.y+=e,this.position.offsetX=this.position.x-i*n,this.position.offsetY=this.position.y-s*n}calculateToRealWorld(t){const e=this.scale,n=this.position;return[t[0]*e+n.offsetX,t[1]*e+n.offsetY]}_calculatePointBack(t){const e=this.scale,n=this.position;return[(t[0]-n.offsetX)/e,(t[1]-n.offsetY)/e]}_calculatePointBackWithPoint(t,e,n,i,s){const o=this.scale,r=this.position;n[i]=(t-r.offsetX)/o,n[s]=(e-r.offsetY)/o}_calculateDistance(t){return this.scale*t}_resetTransform(){const{width:t,height:e}=this.canvasMeta,n=this.position,i=this.scale,s=this.ctx;s.setTransform(),s.clearRect(0,0,t,e),s.scale(this.dpr,this.dpr),s.transform(i,0,0,i,n.offsetX,n.offsetY)}resetTransform(t){const e=this.position,n=this.scale;t.setTransform(),t.scale(this.dpr,this.dpr),t.transform(n,0,0,n,e.offsetX,e.offsetY)}_getViewBox(){const t=this._cacheViewBox;return this._calculatePointBackWithPoint(0,0,t,0,1),this._calculatePointBackWithPoint(this.canvasMeta.actual_width,this.canvasMeta.actual_height,t,2,3),t}setNodeToTopLayer(t){const e=this._stack.findIndex((e=>e===t));if(-1!==e){const[t]=this._stack.splice(e,1);this._stack.push(t)}}getCacheViewBox(){return this._cacheViewBox}_render(){this.scheduleRender()}__render(){if(!this._readyToRender)return;this.runAnimeFrame(),this._resetTransform();const t=this.ctx;this.dispatchEvent(new hc("beforeJflowRender",{ctx:t}));const e=this._getViewBox();this.NodeRenderTop?(this._linkStack.render(t,(t=>!t.ON_TOP&&t.isInViewBox(e))),this._stack.render(t,(t=>{const n=za(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.ON_TOP&&t.isInViewBox(e)))):(this._stack.render(t,(t=>{const n=za(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.isInViewBox(e)))),this._tempNode&&(t.save(),this._tempNode.render(t),t.restore()),this._tempLink&&(t.save(),this._tempLink.isInViewBox(e),this._tempLink.render(t),t.restore()),this.dispatchEvent(new hc("afterJflowRender",{ctx:t})),this.renderScrollBar(t)}}Object.assign(eh.prototype,ic),Object.assign(eh.prototype,ec),Object.assign(eh.prototype,nc),Object.assign(eh.prototype,Ka),Object.assign(eh.prototype,sc),Object.assign(eh.prototype,oc),Object.assign(eh.prototype,cc),Object.assign(eh.prototype,ac);const nh=eh,ih={provide(){return{addToStack:this.addToStack,removeFromStack:this.removeFromStack}},data:()=>({stack:[]}),methods:{addToStack(t,e){this._jflowInstance.addToStack(t),e&&t._jflow.setRenderNodeBySource(e,t)},removeFromStack(t){this._jflowInstance.removeFromStack(t)},onStackChangeHandler(){this._jflowInstance.recalculate(),this._jflowInstance.reflow()}}},sh={mixins:[ih],provide(){return{renderJFlow:this.renderJFlow,getJFlow:this.getInstance,addToLinkStack:this.addToLinkStack,removeFromLinkStack:this.removeFromLinkStack}},props:{configs:{type:Object,default:function(){return{}}},loading:Boolean,genVueComponentKey:{type:Function}},data:()=>({renderNodes:[],renderLinks:[]}),render:function(t){if(this.renderNodes.length){const e=this.renderNodes.map((({type:t,source:e,layoutNode:n})=>{if(!this.$scopedSlots[t]){if(!this.$scopedSlots.jflowcommon)return null;t="jflowcommon"}if(n.__vnode__)return n.__vnode__;const[i]=this.$scopedSlots[t]({source:e,layoutNode:n});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(e)),n.__vnode__=i,i})).filter((t=>!!t)),n=this.renderLinks.map((t=>{let e=t.type||"plainlink";if(!this.$scopedSlots[e])return null;if(t.__vnode__)return t.__vnode__;const[n]=this.$scopedSlots[e]({configs:t});if(this.genVueComponentKey){const e=this.genVueComponentKey(t.from.source),i=this.genVueComponentKey(t.to.source),s=t.part;n.key=`${e}-${i}-${s}`}return t.__vnode__=n,n}));return t("div",[...e,...n])}return t("div",this.$slots.default)},created(){this._jflowInstance=new nh(this.configs),this.$emit("update:loading",!0),this.genNodeLinkMeta(),this.syncNodeLink()},mounted(){this.mountJFlow()},beforeDestroy(){this._jflowInstance?.destroy()},methods:{mountJFlow(){this._jflowInstance.$mount(this.$el),Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.$emit("update:loading",!1)},genNodeLinkMeta(){this.nodes=this._jflowInstance._layout.flowStack.map((t=>{const{type:e,layoutNode:n,source:i}=t,s=this._jflowInstance.source_Layout_Render_NodeMap;let o;return o=s.has(i)?s.get(i):s.set(i),o.layoutNode=n,t})),this.links=this._jflowInstance._layout.flowLinkStack.slice()},syncNodeLink(){this.renderNodes=this.nodes.slice(),this.renderLinks=this.links.slice()},reflow(t,e){this.genNodeLinkMeta(),this.syncNodeLink(),this.$nextTick((()=>{t&&t(),this._jflowInstance.recalculate(),this._jflowInstance.scheduleRender((()=>{e&&e()}))}))},getInstance(){return this._jflowInstance},renderJFlow(){this.__renderInSchedule__||(this.__renderInSchedule__=!0,this.$nextTick((()=>{this._jflowInstance._render(),this.__renderInSchedule__=!1})))},addToLinkStack(t,e,n){this._jflowInstance.addToLinkStack(t),e&&n&&t._jflow.addLinkNodeBySource(e,n,t)},removeFromLinkStack(t,e,n){this._jflowInstance.removeFromLinkStack(t),e&&n&&t._jflow.removeLinkNodeBySource(e,n,t)}}};var oh=i(938),rh=i.n(oh);function ah(t){const n="string"==typeof t?e[t]:t;return{inject:["addToStack","removeFromStack"],props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){const n=rh()(t,e);0!==Object.keys(n).length&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},render:function(t){return null},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,this.bindListeners(),this.addToStack(this._jflowInstance,this.source)},destroyed(){this._jflowInstance.destroy(),this.removeFromStack(this._jflowInstance)},methods:{bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}}}}function ch(t,n){const i="string"==typeof t?e[t]:t;return{inject:["addToLinkStack","removeFromLinkStack","getJFlow"],props:{configs:{type:Object,default:function(){return{}}},from:Object,to:Object},render:function(t){return null},created(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this.createInstance(e,n)},mounted(){this.unwatch=this.$watch((()=>[this.from,this.to,this.configs]),(()=>{this.refreshConfig()}))},methods:{createInstance(t,e){t&&e&&(this._jflowInstance=new i({...this.configs,from:t,to:e}),this.bindListeners(),this.addToLinkStack(this._jflowInstance,this.from,this.to))},refreshConfig(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this._jflowInstance?this._jflowInstance.setConfig({...this.configs,from:e,to:n}):this.createInstance(e,n)},bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}},destroyed(){this.unwatch(),this._jflowInstance&&this.removeFromLinkStack(this._jflowInstance,this.from,this.to)}}}function uh(t){const n="string"==typeof t?e[t]:t;return{mixins:[ih],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},render:function(t){return t("jflow-group",this.$slots.default)},props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source)},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)}}}const hh={mixins:[ih],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},data:()=>({nodes:[]}),props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object},genVueComponentKey:{type:Function}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new Vu(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source),this.genTextElementMeta()},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)},render:function(t){return this.nodes.length?t("div",this.nodes.map((t=>{let{type:e,source:n}=t;if(!this.$scopedSlots[e]){if(!this.$scopedSlots.jflowcommon)return;e="jflowcommon"}if(t.__vnode__)return t.__vnode__;const[i]=this.$scopedSlots[e]({source:n,textElement:t});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(n)),t.__vnode__=i,i}))):t("jflow-group",this.$slots.default)},methods:{genTextElementMeta(){this.nodes=this._jflowInstance._flattenTxtElem.filter((t=>"text"!==t.type))},reflow(){this._jflowInstance.refreshTextElements(),this.genTextElementMeta(),this.$nextTick((()=>{this._jflowInstance.refresh()}))}}},lh=[{name:"Jflow",component:sh},{name:"Group",component:uh("Group")},...["CapsuleGroup","CapsuleVerticalGroup","DiamondGroup","DiamondVerticalGroup","RhombusGroup","PointGroup","ScrollGroup"].map((t=>({name:t,component:uh(t)}))),...["Point","Rectangle","Capsule","Diamond","Rhombus","Text","Icon","ShadowDom","TextEditor"].map((t=>({name:t,component:ah(t)}))),...["Link","PolyLink","BezierLink"].map((t=>({name:t,component:ch(t)}))),{name:"TextGroup",component:hh}];customElements.define("jflow-group",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}});const dh={install:(t,e={})=>{let n="j";e&&e.prefix&&(n=e.prefix),lh.forEach((e=>{t.component(`${n}${e.name}`,e.component)})),e.customInstance&&Object.keys(e.customInstance).forEach((i=>{t.component(`${n}${i}`,ah(e.customInstance[i]))})),e.customGroups&&Object.keys(e.customGroups).forEach((i=>{t.component(`${n}${i}`,uh(e.customGroups[i]))})),e.customLink&&Object.keys(e.customLink).forEach((i=>{t.component(`${n}${i}`,ch(e.customLink[i]))}))}};window.$jflow_version="0.1.0";var fh=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative"}},[e("j-jflow",{ref:"jflow",staticClass:"wrapper",attrs:{configs:t.configs,genVueComponentKey:t.genVueComponentKey},scopedSlots:t._u([{key:"Start",fn:function({source:t}){return[e("start",{attrs:{node:t}})]}},{key:"End",fn:function({source:t}){return[e("end",{attrs:{node:t}})]}},{key:"Assignment",fn:function({source:t}){return[e("assignment",{attrs:{node:t}})]}},{key:"IfStatement",fn:function({source:t}){return[e("if-statement",{attrs:{node:t}})]}},{key:"WhileStatement",fn:function({source:t}){return[e("while-comp",{attrs:{node:t}})]}},{key:"endpoint",fn:function({source:t}){return[e("j-endpoint",{attrs:{node:t}})]}},{key:"jflowcommon",fn:function({source:t}){return[e("j-logic-atom-node",{attrs:{node:t}})]}},{key:"plainlink",fn:function({configs:t}){return[e("instance-link",{attrs:{linkConfigs:t}})]}}])})],1)};fh._withStripped=!0;class ph{constructor(t){this.source=t,this.id=t.id,this.type=t.concept||t.type,this.anchor=t.anchor||[0,0],this.isFree=!1,this.parent=void 0,this.idx=void 0,this.parentIterateType=void 0,this.hasEndPoint=!1,this.__width__=0,this.__links_empty__=[]}preprareXCoord(t){const{width:e}=t(this.source);return this.__width__=e,this.__nodeWidth__=e,e}reflowXCoord(t,e){t(this.source,e,0)}reflowYCoord(t,e,n){const i=t(this.source),s=i.height;return e(i,n+s/2,this.source),this.__reducedHeight__=n+s,this.__reducedHeight__}makeLink(t){return this}makeEndpoint(){}traverse(t){t(this)}getNodes(t){const e=[];return this.traverse((n=>{const i=t.getRenderNodeBySource(n.source);i&&e.push(i)})),e}getNodeAndLinks(t){let e=[];const n=[],i=[];return this.traverse((i=>{const s=t.getSourceRenderMeta(i.source);s&&(n.push(s.jflowNode),e=e.concat(s.jflowlinks))})),e.forEach((t=>{n.includes(t.from)&&n.includes(t.to)&&i.push(t)})),{nodes:n,links:i}}getUpperAndBelowLinks(t){const e=t.getSourceRenderMeta(this.source),n=e.jflowToLinks.find((t=>3===t.toDir));if(this.Endpoint)return{upperLink:n,belowLink:t.getSourceRenderMeta(this.Endpoint.source).jflowFromLinks.find((t=>1===t.fromDir))};let i;return i=0===e.jflowFromLinks.length?e.jflowFromLinks[0]:e.jflowFromLinks.find((t=>1===t.fromDir)),{upperLink:n,belowLink:i}}getRootNode(){let t=this;do{if("playground"===t.parentIterateType)return t;if(t.parent.isroot)return"bodyroot";t=t.parent}while(t)}getPrevAndAfterNodes(){return this.Endpoint?{prev:this.prev,prevPart:this.prevPart,after:this.Endpoint.after}:{prev:this.prev,prevPart:this.prevPart,after:this.after}}linkSource(t,e,n,i){let s=this.idx+1;const o=i.getLayoutNodeBySource(t);o&&o.parent===this.parent&&o.parentIterateType===this.parentIterateType&&o.idx<this.idx&&(s=this.idx),this.parent.linkSource(t,e,s,i)}remove(){if(this.parent){const t=this.parent[this.parentIterateType];t.splice(this.idx,1),t.forEach(((t,e)=>{t.idx=e,t.Endpoint&&(t.Endpoint.idx=e)})),this.parent=null,this.parentIterateType="playground"}}linkLayoutNode(t,e){const n=this.idx+1;this.parent.linkLayoutNode(t,e,n)}}function gh(t){return"WhileStatement"===t?.type?"no":void 0}const mh={IfStatement:class extends ph{constructor(t){super(t),this.consequent=(t.consequent||[]).map(_h("consequent").bind(this)),this.alternate=(t.alternate||[]).map(_h("alternate").bind(this)),this.alternateVirtualOccupation={sequence:0},this.isLocked=!0,this.hasEndPoint=!0}preprareXCoord(t,e){const{width:n}=t(this.source);let i=n,s=0,o=n/2;this.consequent.forEach((n=>{i=Math.max(i,n.preprareXCoord(t,e)),o=Math.max(o,n.__width__-n.__nodeWidth__/2)}));let r=0;if(this.alternate.forEach((n=>{s=Math.max(s,n.preprareXCoord(t,e)),r=Math.max(r,n.__width__)})),this.__columns__=[o,s],this.__nodeWidth__=n,this.__width__=o+80+r+i/2,this.__consquentWidth__=i,this.__links_empty__[0]){const t=this.__links_empty__[0],i=o-n/2+80-10;t.minSpanX=i,e&&e(t,i)}return i}reflowXCoord(t,e){t(this.source,e);const[n,i]=this.__columns__;this.consequent.forEach((n=>{n.reflowXCoord(t,e)})),this.Endpoint.reflowXCoord(t,e),this.alternate.forEach((s=>{s.reflowXCoord(t,e+80+n+i/2)}))}reflowYCoord(t,e,n){const i=t(this.source),s=i.height;e(i,n+=s/2,this.source);let o=n+s,r=n+s/2;return this.consequent.forEach((n=>{o+=80,o=n.reflowYCoord(t,e,o)})),this.alternate.forEach((n=>{r+=80,r=n.reflowYCoord(t,e,r)})),n=Math.max(o,r),n+=80,this.Endpoint.reflowYCoord(t,e,n)}getConsequentPart(){return`consequent-${this.id}`}getAlternatePart(){return`alternate-${this.id}`}makeLink(t){let e;const n=this.getConsequentPart(),i=this.getAlternatePart();let s;this.consequent.forEach((i=>{t({from:e||this,to:i,part:n,fromDir:1,toDir:3,content:e?gh(e):"yes",linkPart:"consequent"}),e&&(e.after=i),i.prev=e||this,i.prevPart=n,i=i.makeLink(t),e=i})),e&&(e.after=this.Endpoint),t({from:e||this,to:this.Endpoint,bendLast:!1,fromDir:1,toDir:3,part:n,content:e?gh(e):"yes",noArrow:!0,linkPart:"consequent"}),this.alternate.forEach(((e,n)=>{const o={from:s||this,to:e,fromDir:s?1:0,toDir:3,minSpanX:0,part:i,content:s?gh(s):"no",linkPart:"alternate"};t(o),0===n&&this.__links_empty__.push(o),s&&(s.after=e),e.prev=s||this,e.prevPart=i,e=e.makeLink(t),s=e})),s&&(s.after=this.Endpoint);const o={from:s||this,to:this.Endpoint,bendLast:!1,fromDir:s?1:0,toDir:0,part:i,beginsequence:this.sequence,presequence:s?void 0:this.alternateVirtualOccupation.sequence,minSpanX:0,content:s?gh(s):"no",linkPart:"alternate"};return t(o),0===this.alternate.length&&this.__links_empty__.push(o),this.Endpoint}traverse(t){t(this),this.consequent.forEach((e=>{e.traverse(t)})),this.alternate.forEach((e=>{e.traverse(t)})),t(this.Endpoint)}linkSource(t,e,n=0,i){const s=this.getConsequentPart(),o=this.getAlternatePart();e.part===s&&this.source.insertItemInConsequentAt(t,n),e.part===o&&this.source.insertItemInAlternateAt(t,n)}linkLayoutNode(t,e,n){t.remove();const i=this.getConsequentPart(),s=this.getAlternatePart();e.part===i&&(this.consequent.splice(n,0,t),t.parentIterateType="consequent"),e.part===s&&(this.alternate.splice(n,0,t),t.parentIterateType="alternate"),t.parent=this,t.idx=n}},WhileStatement:class extends ph{constructor(t){super(t),this.body=(t.body||[]).map(_h("body").bind(this)),this.alternateVirtualOccupation={sequence:0},this.isLocked=!0}preprareXCoord(t,e){const{width:n}=t(this.source);let i=0,s=0;if(this.body.forEach((n=>{i=Math.max(i,n.preprareXCoord(t,e)),s=Math.max(s,n.__width__)})),this.__columns__=[n,i],this.__nodeWidth__=n,this.__width__=n+80+s,this.__links_empty__[0]){const t=this.__links_empty__[0],n=70;t.minSpanX=n,e&&e(t,n)}return n}reflowXCoord(t,e){t(this.source,e);const[n,i]=this.__columns__;this.body.forEach((s=>{s.reflowXCoord(t,e+80+n/2+i/2)}))}traverse(t){t(this),this.body.forEach((e=>{e.traverse(t)}))}getPartName(){return`whilebody-${this.id}`}reflowYCoord(t,e,n){const i=t(this.source),s=i.height;e(i,n+s/2,this.source);const o=(n+=s/2)+s;return this.body.forEach((i=>{n+=80,n=i.reflowYCoord(t,e,n)})),Math.max(o,n)}makeLink(t){let e;const n=this.getPartName();this.body.forEach(((i,s)=>{const o={from:e||this,to:i,part:n,fromDir:e?1:0,toDir:3,minSpanX:0,content:e?gh(e):"yes",linkPart:"body"};t(o),0===s&&this.__links_empty__.push(o),e&&(e.after=i),i.prev=e||this,i.prevPart=n,i=i.makeLink(t),e=i})),e&&(e.after=this);const i={from:e||this,to:this,part:n,fromDir:e?1:0,toDir:1,isSelf:!0,beginsequence:this.sequence,presequence:e?void 0:this.alternateVirtualOccupation.sequence,minSpanX:0,minSpanY:50,content:e?gh(e):"yes",linkPart:"body"};return t(i),0===this.body.length&&this.__links_empty__.push(i),this}},Root:class extends ph{constructor(t){super(t),this.isroot=!0,this.body=(t.body||[]).map(_h("body").bind(this));const e=_h("playground").bind(this);this.playground=(t.playground||[]).map(((t,n)=>{const i=e(t,n);return i.isFree=!0,i}))}preprareXCoord(t,e){this.body.forEach((n=>{n.preprareXCoord(t,e)}))}reflowXCoord(t,e){this.body.forEach((n=>{n.reflowXCoord(t,e)}))}reflowYCoord(t,e,n=0){return this.body.forEach(((i,s)=>{s>0&&(n+=80),n=i.reflowYCoord(t,e,n)})),n}makeLink(t){let e;return this.body.forEach((n=>{e?(t({from:e,to:n,part:"body",fromDir:1,toDir:3,rootNode:"bodyroot",content:gh(e),linkPart:"body"}),e.after=n,n.prev=e,n.prevPart="body",n=n.makeLink((e=>{e.rootNode="bodyroot",t(e)})),e=n):e=n})),this.playground.forEach((e=>{e.makeLink((n=>{n.rootNode=e,t(n)}))})),this}traverse(t){this.body.forEach((e=>{e.traverse(t)})),this.playground.forEach((e=>{e.traverse(t)}))}linkSource(t,e,n,i){this.source.insertItemInBodyAt(t,n)}linkLayoutNode(t,e,n){t.remove(),t.parent=this,t.idx=n,t.parentIterateType="body",this.body.splice(n,0,t)}},other:ph};function _h(t){return function(e,n){const i=vh(e);if(i.parent=this,i.idx=n,i.parentIterateType=t,i.hasEndPoint){e.__endpoint__||(e.__endpoint__={concept:"endpoint",id:`${i.id}-endpoint`,getAncestor:t=>t===e.concept?e:e.getAncestor(t)});const s=vh(e.__endpoint__);s.parent=this,s.idx=n,s.parentIterateType=t,i.Endpoint=s}return i}}function vh(t){const e=t.type;return new(mh[e]||mh.other)(t)}function bh(t,e){t.setAnchorX(e)}function Eh(t,e){t.setAnchorY(e)}let yh=vh;var Ch=function(){var t=this,e=t._self._c;return e("j-if-group",{ref:"root",attrs:{source:t.node,configs:t.groupConfig}},[e("j-text",{attrs:{configs:{fontSize:"12px",fontWeight:"bold",textColor:"#333",content:"是否满足条件",textAlign:"center"}}}),t._v(" "),e("j-group",[t.node.test?e("j-logic-atom-node",{attrs:{node:t.node.test}}):e("expression-slot",{attrs:{node:t.node,"parent-attr":"setTest","slot-config":{side:2,width:64,height:32,backgroundColor:"rgba(51, 136, 255, 0.1)"}}})],1)],1)};Ch._withStripped=!0;var wh=function(){var t=this,e=t._self._c;return e("j-group",{ref:"root",attrs:{configs:t.wrapperConfigs}},[e("j-input-slot",{attrs:{configs:t.configs}})],1)};wh._withStripped=!0;class xh{constructor(t={}){this.name="TextAlignTopLayout",this.lineHeight=24,this.gap=t.gap||4,this.alignment=t.alignment||"center"}reflow(t){const e=t._stack.filter((t=>t.visible)),n=t.width-t.padding.left-t.padding.right,{lineHeight:i,gap:s}=this;let o=0,r=0;const a=e.length-1;e.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension(),c=e<a?s:0;o+=n/2,r=Math.max(i,r),t.anchor=[o,0],o+=n/2+c}));const c=Math.max(r,i)/2;let u=o/2;"left"===this.alignment&&(u=Math.max(o,n)/2),e.forEach((t=>{const{height:e}=t.getBoundingDimension(),n=Math.max(e,i)/2;t.anchor[0]-=u,t.anchor[1]+=n-c}))}clone(){return new xh}}class Ah{constructor(t){this.name="ColumnLayout",this.wrapWidth=640,this.isIndexed=!!t}reflow(t){const e=t._stack.filter((t=>t.visible&&"lineblock"!==t.display)),n=t._stack.find((t=>"lineblock"===t.display)),i=t.width-t.padding.left-t.padding.right;let s=0,o=e;this.isIndexed&&(o=e.slice().sort(((t,e)=>t.indexed-e.indexed))),o.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension();s=Math.max(n,s)}));const r=(Math.max(this.wrapWidth,s)-20)/2;let a=!0;const c=[];let u,h=[],l=0,d=0,f=0,p=0,g=0;function m(){g+=f,c.push({row:h,rowHeight:f}),a=!0,f=0,h=[]}if(o.forEach((t=>{const{width:e,height:n}=t.getBoundingDimension();e<r?(f=Math.max(f,n),a&&(h=[],l=Math.max(l,e),a=!1),h.push(t)):(h.length&&m(),f=Math.max(f,n),p=Math.max(p,e),h.push(t),m()),2===h.length&&(d=Math.max(d,e),m())})),h.length&&m(),u=1===c.length&&1===c[0].row.length?Math.max(l,p,i):Math.max(l+d+20,p,i),g+=12*(c.length-1),n){const t=n.getBoundingDimension().height;g+=12+t,c.push({row:[n],rowHeight:t})}const _=g/2,v=u/2;let b=0;c.forEach((({row:t,rowHeight:e},n)=>{if(b+=e/2,2===t.length){const n=t[0],i=t[1];n.anchor=[n.width/2-v,b-_+(n.height-e)/2],i.anchor=[l-v+20+i.width/2,b-_+(i.height-e)/2]}else{const e=t[0];e.anchor=[e.width/2-v,b-_]}b+=e/2+12}))}clone(){return new Ah}}const kh={reflow(t){const e=t._stack.filter((t=>t.visible&&!t.absolutePosition)),n=t._stack.filter((t=>t.visible&&t.absolutePosition)),i=t.minWidth-t.padding.left-t.padding.right;let s=0,o=0,r=0,a=0;const c=e.concat(n);if(c.forEach(((t,e)=>{"block"===t.display&&(t.width=0,t.resetChildrenPosition(),t.reflow(),t._getBoundingGroupRect())})),e.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension(),c=e>0?6:0;"outstretch"!==t.display&&(r=Math.max(n,r)),a+=i+c,s+=i/2+c+o,o=i/2,t.anchor=[0,s]})),c.forEach(((e,n)=>{if("block"===e.display)e.resetChildrenPosition(),e.width=r,e.reflow();else if("outstretch"===e.display){const n=t._belongs.width-t._belongs.padding.left-t._belongs.padding.right;e.resetChildrenPosition(),e.width=Math.max(n,r),e.reflow()}})),a/=2,r=Math.max(i,r),e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=-(r-n)/2,t.anchor[1]-=a})),n.length){"block"===t.display?t.getBoundingDimension():t._getBoundingGroupRect();const e=t.width/2,i=t.height/2,s=(t.padding.top-t.padding.bottom)/2,o=(t.padding.left-t.padding.right)/2;n.forEach((t=>{t.anchor=_resolveAbsoluteAnchor(t.absolutePosition,t,e,i,o,s)}))}},clone:()=>kh},Bh=new Nc({direction:"horizontal",gap:4}),Th=new Nc({direction:"horizontal",gap:4}),Fh=({isHover:t,isFocus:e,isError:n,isWarning:i,isDragOver:s,hideBorder:o}={})=>{if(o)return{borderWidth:0,borderRadius:0};let r={shadowColor:"transparent"},a=1;(t||e)&&(r={shadowColor:"rgba(61, 75, 102, 0.2)",shadowBlur:12,shadowOffsetY:8});let c="#E4E4E6";return n?(c="#F24957",a=2):i?(c="#FFAF0F",a=2):(e||s)&&(c="#517CFF",a=2),{borderColor:c,borderWidth:a,...r}},Sh={ROOT:{layout:kh,paddingLeft:8,paddingRight:8,paddingTop:12,paddingBottom:12,borderWidth:1,borderRadius:4,backgroundColor:"#fff",minWidth:256},SLOT:()=>({hideSlot:!0}),HEADER:t=>({layout:Bh,height:24,paddingLeft:t?14:0}),BODY:{layout:new Ah,display:"block"},PARAM:{layout:new xh({gap:4}),display:"block"},TITLE_LEFT:{layout:new xh({gap:4,alignment:"left"}),display:"block"}},Dh=({isFull:t,isHover:e,isDisabled:n,isError:i,isWarning:s,opacity:o}={})=>{let r="#0055CC",a=`rgba(79, 144, 248, ${o})`,c=1;return e&&(c=2),i||!t?(c=2,r="#F24957"):s&&(c=2,r="#FFAF0F"),n&&(c=1,a="#E0E0E0",r="#E5E5E5"),{borderColor:r,backgroundColor:a,borderWidth:c}},Oh=({hideMore:t,isInput:e,isHover:n,isError:i,isWarning:s,isDisabled:o}={})=>{let r={shadowColor:"transparent"},a="#fff",c="#0055CC",u=1,h="transparent";return n&&(u=2,t||(r={shadowColor:"rgba(61, 75, 102, 0.2)",shadowBlur:12,shadowOffsetY:8})),e&&(u=2,h="#F2F7FE"),i?(u=2,c="#F24957"):s&&(u=2,c="#FFAF0F"),o&&(c="#E5E5E5",a="#F5F5F5"),{borderColor:c,borderWidth:u,backgroundColor:a,outlineColor:h,...r}},Ih=({isWhite:t,isError:e,isWarning:n,isActive:i,isDisabled:s}={})=>{let o=t?"#fff":"#F2F7FE",r="#CCE0FC",a=1,c={shadowColor:"transparent"};return e?(a=2,r="#F24957"):n&&(a=2,r="#FFAF0F"),i&&(a=2,r="#0055CC",o="#A9CCFE",c={shadowColor:"rgba(0, 106, 255, 0.6);",shadowBlur:6,shadowOffsetY:0}),s&&(o="#F5F5F5",r="#E5E5E5",a=1),{borderColor:r,borderWidth:a,backgroundColor:o,...c}},Mh=({isDisabled:t,isActive:e}={})=>{let n="#B0BCD2";return t&&(n="#CCCCCC"),e&&(n="#0055CC"),{textColor:n}},Ph=({isDisabled:t,isActive:e}={})=>{let n="#B0BCD2";return e&&(n="#0055CC"),t&&(n="#CCCCCC"),n},Lh=new Nc({direction:"horizontal",gap:0});function jh(t,e,n,i,s,o,r,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):s&&(c=a?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(u.functional){u._injectStyles=c;var h=u.render;u.render=function(t,e){return c.call(e),h(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}const Rh=jh({props:{textValue:String},computed:{configs(){return{borderRadius:4,height:24,...Ih(),...Mh(),iconColor:Ph(),fontSize:"12px",textAlign:"left",content:this.textValue,lineHeight:12,minWidth:24,maxWidth:300}},wrapperConfigs(){return this.inputState?{layout:Lh,borderColor:"#337EFF",backgroundColor:"#F2F7FE",borderWidth:2,borderRadius:4,paddingLeft:4,paddingRight:4,paddingTop:6,paddingBottom:6}:{layout:Lh,borderColor:"transparent",backgroundColor:"transparent",borderWidth:0,borderRadius:0,padding:0}}}},wh,[],!1,null,null,null).exports,Nh=new Nc({direction:"vertical"}),$h=new Nc({direction:"vertical",gap:2,alignment:"start"});new Nc({direction:"horizontal",gap:2});const Wh=jh({components:{"expression-slot":Rh},inject:["renderJFlow"],props:{node:Object,isHover:Boolean,isFocus:Boolean},data:()=>({shrinkConfigWrapper:{layout:Nh,marginTop:30,paddingBottom:10},logicIconConfig:{width:32,height:32},shrink:!1,isDragOver:!1,leftIconVisible:!1,rightIconVisible:!1}),computed:{groupConfig(){return{layout:$h,backgroundColor:"#fff",padding:8,borderRadius:5,surface:!0,...Fh({isHover:this.isHover,isFocus:this.isFocus,isError:this.isError||this.hasSubError,isWarning:this.isWarning,isDragOver:this.isDragOver})}}},updated(){this.renderJFlow()}},Ch,[],!1,null,null,null).exports;var zh=function(){var t=this,e=t._self._c;return e("j-group",{attrs:{source:t.node,configs:t.configs}},[e("j-text",{ref:"start",attrs:{configs:{fontSize:"12px",textColor:"#000",content:"Start"}}}),t._v(" "),e("j-point",{attrs:{configs:{backgroundColor:"#99DBC5",radius:20,borderColor:"#33B88C",borderWidth:2,shadowBlur:8,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetY:2,shadowOffsetX:0}}})],1)};zh._withStripped=!0;const Hh=jh({props:{node:Object},data:()=>({configs:{layout:new Nc({direction:"vertical",gap:10}),borderColor:"transparent",borderWidth:0}})},zh,[],!1,null,null,null).exports;var Xh=function(){var t=this,e=t._self._c;return e("j-group",{attrs:{source:t.node,configs:t.configs}},[e("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#000",content:"End"}}}),t._v(" "),e("j-rectangle",{attrs:{configs:{backgroundColor:"#FAAAAA",width:36,height:36,borderRadius:8,borderWidth:2,borderColor:"#F55656",shadowBlur:8,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetY:2,shadowOffsetX:0}}})],1)};Xh._withStripped=!0;const Yh=jh({props:{node:Object},data:()=>({configs:{layout:new Nc({direction:"vertical",gap:0}),borderColor:"transparent",borderWidth:0}})},Xh,[],!1,null,null,null).exports;var qh=function(){var t=this,e=t._self._c;return e("j-while-group",{attrs:{source:t.node,configs:t.groupConfig}},[e("j-text",{attrs:{configs:{fontSize:"12px",fontWeight:"bold",textColor:"#333",content:"满足条件时循环",textAlign:"center"}}}),t._v(" "),e("j-group",[t.node.test?e("j-logic-atom-node",{attrs:{node:t.node.test}}):e("expression-slot",{attrs:{node:t.node,"slot-config":{side:2,width:64,height:32,backgroundColor:"rgba(51, 136, 255, 0.1)"}}})],1)],1)};qh._withStripped=!0;const Vh=new Nc({direction:"vertical"}),Uh=new Nc({direction:"vertical",gap:2,alignment:"start"}),Gh=jh({components:{"expression-slot":Rh},inject:["renderJFlow"],props:{node:Object,isHover:Boolean,isFocus:Boolean},data:()=>({isDragOver:!1,shrinkConfigWrapper:{layout:Vh,marginTop:30,paddingBottom:10},logicIconConfig:{width:32,height:32}}),computed:{groupConfig:()=>({layout:Uh,backgroundColor:"#fff",borderRadius:5,padding:8,surface:!0,...Fh()})},updated(){this.renderJFlow()}},qh,[],!1,null,null,null).exports;var Jh=function(){var t=this,e=t._self._c;return e("j-logic-seq-wrapper",{attrs:{source:t.node,configs:t.rootConfig}},[e("j-group",{attrs:{configs:t.headerConfigs}},[e("j-text",{attrs:{configs:{fontSize:"12px",fontWeight:"bold",textColor:"#333333",content:"内置函数"}}}),t._v(" "),e("j-text",{attrs:{configs:{fontSize:"12px",fontWeight:"bold",textColor:"#333333",content:t.node.name}}})],1),t._v(" "),e("j-group",{attrs:{configs:t.bodyConfigs}},t._l(t.node.arguments,(function(n,i){return e("j-group",{key:n.id,attrs:{configs:t.paramsConfigs}},[e("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#333",content:n.name}}}),t._v(" "),e("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#333",content:"="}}}),t._v(" "),e("j-group",[n.expression?e("j-logic-atom-node",{attrs:{node:n.expression}}):e("expression-slot",{attrs:{node:n,"slot-config":{width:64,height:32,borderWidth:1,backgroundColor:"rgba(51, 136, 255, 0.1)"}}})],1)],1)})),1)],1)};Jh._withStripped=!0;const Zh=jh({components:{"expression-slot":Rh},props:{node:Object},data:()=>({rootConfig:{indicatorColor:"#F56CC7",...Sh.ROOT,...Fh()},bodyConfigs:Sh.BODY,paramsConfigs:Sh.PARAM}),computed:{headerConfigs:()=>Sh.HEADER()}},Jh,[],!1,null,null,null).exports;var Kh=function(){return(0,this._self._c)("j-point",{attrs:{source:this.node,configs:{backgroundColor:"#fff",borderColor:"#000",borderWidth:1,radius:5,ignoreHit:!0}}})};Kh._withStripped=!0;const Qh=jh({props:{node:Object}},Kh,[],!1,null,null,null).exports;var tl=function(){var t=this;return(0,t._self._c)("jPolyLink",{attrs:{configs:t.configs,from:t.linkConfigs.from.source,to:t.linkConfigs.to.source},on:{dragenter:t.onDragEnter,dragleave:t.onDragOverEnd,drop:t.onDropToLink}})};tl._withStripped=!0;const el=jh({inject:["renderJFlow"],props:{linkConfigs:Object},data:()=>({isDragOver:!1}),computed:{configs(){return{...this.linkConfigs,radius:5,approximate:400,backgroundColor:this.isDragOver?"rgba(81, 124, 255, 0.5)":"#000"}}},methods:{onDropToLink(t){this.$emit("drop",t),this.isDragOver=!1},onDragEnter(t){console.log("dragenter"),this.isDragOver=!0},onDragOverEnd(){console.log("onDragOverEnd"),this.isDragOver=!1}},updated(){this.renderJFlow()}},tl,[],!1,null,null,null).exports;var nl=function(){var t=this,e=t._self._c;return e("j-logic-seq-wrapper",{attrs:{source:t.node,configs:t.groupConfig}},[e("j-group",{attrs:{configs:t.contentConfig}},[t.node.left?e("j-logic-atom-node",{attrs:{node:t.node.left}}):e("expression-slot",{attrs:{node:t.node,"parent-attr":"setRight","slot-config":{side:2,width:64,height:32,backgroundColor:"rgba(51, 136, 255, 0.1)",borderWidth:1}}}),t._v(" "),e("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#536995",content:"赋值"}}})],1),t._v(" "),e("j-group",[t.node.right?e("j-logic-atom-node",{attrs:{node:t.node.right}}):e("expression-slot",{attrs:{node:t.node,"parent-attr":"setRight","slot-config":{side:2,width:64,height:32,backgroundColor:"rgba(51, 136, 255, 0.1)",borderWidth:1}}})],1)],1)};nl._withStripped=!0;const il=new xh({gap:4}),sl=jh({components:{"expression-slot":Rh},inject:["renderJFlow"],props:{node:Object},data:()=>({contentConfig:{layout:new Nc({direction:"horizontal",gap:5})}}),computed:{groupConfig:()=>({indicatorColor:"#EBBC00",...Sh.ROOT,minWidth:0,layout:il,surface:!0,...Fh()})},updated(){this.renderJFlow()}},nl,[],!1,null,null,null).exports,ol={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let rl;const al=new Uint8Array(16);function cl(){if(!rl&&(rl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rl(al)}const ul=[];for(let t=0;t<256;++t)ul.push((t+256).toString(16).slice(1));const hl=function(t,e,n){if(ol.randomUUID&&!e&&!t)return ol.randomUUID();const i=(t=t||{}).random||(t.rng||cl)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return function(t,e=0){return(ul[t[e+0]]+ul[t[e+1]]+ul[t[e+2]]+ul[t[e+3]]+"-"+ul[t[e+4]]+ul[t[e+5]]+"-"+ul[t[e+6]]+ul[t[e+7]]+"-"+ul[t[e+8]]+ul[t[e+9]]+"-"+ul[t[e+10]]+ul[t[e+11]]+ul[t[e+12]]+ul[t[e+13]]+ul[t[e+14]]+ul[t[e+15]]).toLowerCase()}(i)};class ll{concept="";id="";constructor(t){this.id=hl(),this.type=t.concept||t.type}toCode(){return""}}class dl extends ll{left=null;right=null;operator="";constructor(t){super(t),this.operator=t.operator,this.left=pl(t.left),this.right=pl(t.right)}toCode(){return this.operator}}const fl={Logic:class extends ll{body=[];constructor(t){super(t),this.type="Root",this.body=t.body.map(pl)}},Assignment:class extends ll{left=void 0;right=void 0;constructor(t){super(t),t.left&&(this.left=pl(t.left)),t.right&&(this.right=pl(t.right))}},IfStatement:class extends ll{test=null;consequent=[];alternate=[];constructor(t){super(t),t.test&&(this.test=pl(t.test)),this.consequent=t.consequent.map(pl),this.alternate=t.alternate.map(pl)}},WhileStatement:class extends ll{test=null;body=[];constructor(t){super(t),t.test&&(this.test=pl(t.test)),this.body=t.body.map(pl)}},BinaryExpression:dl,LogicalExpression:class extends dl{},MemberExpression:class extends ll{object=void 0;property=void 0;constructor(t){super(t),this.object=pl(t.object),this.property=pl(t.property)}toCode(){return this.object.toCode()+"."+this.property.toCode()}},Identifier:class extends ll{name="";constructor(t){super(t),this.name=t.name}toCode(){return this.name}},CallFunction:class extends ll{name="";arguments=[];constructor(t){super(t),this.name=t.name,this.arguments=t.arguments.map(pl)}},Argument:class extends ll{name="";expression=null;constructor(t){super(t),this.name=t.name,t.expression&&(this.expression=pl(t.expression))}},NumberLiteral:class extends ll{value="";constructor(t){super(t),this.value=t.value}toCode(){return this.value}}};function pl(t){const e=fl[t.concept||t.type];return e?new e(t):new ll(t)}const gl={components:{start:Hh,end:Yh,ifStatement:Wh,whileComp:Gh,Assignment:sl,callFunction:Zh,"j-endpoint":Qh,instanceLink:el},provide(){return{renderJFlow:this.renderJFlow}},data(){const t=pl({concept:"Logic",body:[{concept:"Start"},{concept:"End"}]}),e=new class{constructor(t){this.linkLength=t.linkLength||18,this.gap=t.gap||30,this.treeItemDraggable=t.treeItemDraggable??!0,this.reOrder(t.ast),this.source_ElementPos_Map=new WeakMap}reOrder(t){this.ast=t,this.flowStack=[],this.flowLinkStack=[],this.playgroundStack=[],this.root=yh(this.ast),this.root.traverse((t=>{this.flowStack.push({type:t.type,source:t.source,layoutNode:t})}));let e=[];this.root.makeLink((t=>{const n=`${t.from.source.id}-${t.to.source.id}-${t.part}`;e.includes(n)||(this.flowLinkStack.push(t),e.push(n))}))}reflowByMapping(t,e,n,i,s,o,r){const a=e;let c=n,u=o;const h="bodyroot"===u?1:.6;"bodyroot"===u&&(u=this.root);const l=t.getRenderNodeBySource(u.source);l&&(c-=l.getBoundingDimension().height/2),u.reflowYCoord((e=>t.getRenderNodeBySource(e)),s,c),u.preprareXCoord((e=>t.getRenderNodeBySource(e)),r),u.reflowXCoord(((e,n,s)=>{const o=t.getRenderNodeBySource(e);return o.linkShiftX=s,i(o,n,e),o.opacity=h,o}),a)}reflow(t){this.reflowByMapping(t,0,0,bh,Eh,"bodyroot"),this.root.playground.forEach((e=>{const n=[e.source.offsetX||0,e.source.offsetY||0];this.reflowByMapping(t,n[0],n[1],bh,Eh,e)}))}}({linkLength:60,ast:t});return{configs:Object.freeze({allowDrop:!0,layout:e,initialZoom:1,minZoom:.2,setInitialPosition:(t,e,n,i,s,o,r,a)=>({x:t+r/2,y:o})})}},mounted(){window.reOrderAndReflow=this.reOrderAndReflow.bind(this)},methods:{renderJFlow(){this.$refs.jflow.renderJFlow()},genVueComponentKey:t=>t.id,reOrderAndReflow(t){const e=pl(t);this.configs.layout.reOrder(e),this.$refs.jflow.reflow()}}};var ml=i(379),_l=i.n(ml),vl=i(795),bl=i.n(vl),El=i(569),yl=i.n(El),Cl=i(565),wl=i.n(Cl),xl=i(216),Al=i.n(xl),kl=i(589),Bl=i.n(kl),Tl=i(251),Fl={};Fl.styleTagTransform=Bl(),Fl.setAttributes=wl(),Fl.insert=yl().bind(null,"head"),Fl.domAPI=bl(),Fl.insertStyleElement=Al(),_l()(Tl.Z,Fl),Tl.Z&&Tl.Z.locals&&Tl.Z.locals;const Sl=jh(gl,fh,[],!1,null,null,null).exports;var Dl=function(){var t=this,e=t._self._c;return e("j-input-group",{attrs:{source:t.node,configs:t.selectConfigs}},[e("j-text",{attrs:{configs:t.textDataConfig}})],1)};Dl._withStripped=!0;const Ol=jh({props:{node:Object},data:()=>({selectConfigs:{layout:Th,borderRadius:4,paddingTop:6,paddingBottom:6,paddingLeft:4,paddingRight:0,height:24,swapping:!1,...Oh()}}),computed:{itemText(){return this.node.toCode()},textDataConfig(){return{fontSize:"12px",textAlign:"left",lineHeight:12,fontFamily:"PingFang SC",content:this.itemText,textColor:"#536995"}}}},Dl,[],!1,null,null,null).exports;var Il=function(){var t=this,e=t._self._c;return e("j-group",{ref:"root",attrs:{source:t.node,configs:t.rootConfigs}},[e("j-group",[t.node.left?e("j-logic-atom-node",{attrs:{node:t.node.left}}):e("expression-slot",{attrs:{node:t.node,"slot-config":{width:32,height:24,backgroundColor:"#fff"}}})],1),t._v(" "),e("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#0055CC",fontFamily:"PingFang SC",content:t.node.operator}}}),t._v(" "),e("j-group",[t.node.right?e("j-logic-atom-node",{attrs:{node:t.node.right}}):e("expression-slot",{attrs:{node:t.node,"slot-config":{width:32,height:24,backgroundColor:"#fff"}}})],1)],1)};Il._withStripped=!0;const Ml=jh({components:{"expression-slot":Rh},inject:["renderJFlow"],props:{node:Object,disabled:{type:Boolean,default:!1},isFocus:Boolean,folded:Boolean},data:()=>({rootLayout:new Nc({direction:"horizontal",gap:2})}),computed:{rootConfigs(){return{layout:this.rootLayout,...Dh({opacity:this.opacity,isFull:this.isFull}),padding:4,borderRadius:8}},isFull(){return this.node.left&&this.node.right},opacity:()=>.2},updated(){this.renderJFlow()}},Il,[],!1,null,null,null).exports,Pl={name:"j-atom-node",functional:!0,props:{node:Object},render(t,e){const{node:n}=e.props,i=function(t){switch(t){case"Identifier":case"MemberExpression":case"NumberLiteral":return Ol;case"BinaryExpression":case"LogicalExpression":return Ml;case"CallFunction":return Zh}}(n?.type);return i?t(i,{key:n.id,props:e.props}):null}},Ll=fc(class extends gc{constructor(t){super(t),this.indicatorColor=t.indicatorColor,this.hideSlot=t.hideSlot,this.hasFooter=t.hasFooter,this.strokeFooter=t.strokeFooter}get hideSlotEnhanced(){return this.hideSlot||this._belongs._belongs!==this._jflow}_renderPath(t,e,n,i,s){this.borderRadius||t.rect(e,n,i-e,s-n),this.hideSlotEnhanced?t.moveTo(e+4,n):(t.moveTo(e,n),t.lineTo(e+14,n),t.lineTo(e+18,n-4),t.lineTo(e+51,n-4),t.lineTo(e+59,n)),t.lineTo(i-4,n),t.quadraticCurveTo(i,n,i,n+4),t.lineTo(i,s-4),t.quadraticCurveTo(i,s,i-4,s),this.hideSlotEnhanced?(t.lineTo(e+4,s),t.quadraticCurveTo(e,s,e,s-4),t.lineTo(e,n+4),t.quadraticCurveTo(e,n,e+4,n)):(t.lineTo(e+59,s),t.lineTo(e+51,s-4),t.lineTo(e+18,s-4),t.lineTo(e+14,s),t.lineTo(e,s)),t.closePath()}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const{width:e,height:n,anchor:i,borderWidth:s}=this,o=i[0]-e/2,r=i[1]-n/2,a=r+n,c=o+e;t.beginPath();const u=new Path2D;if(this._renderPath(u,o,r,c,a),s&&(t.lineWidth=s,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const i=this._jflow.scale;t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i;const s=new Path2D;this._renderPath(s,o,r,c,a),s.closePath(),s.rect(o-10,r-10,e+20,n+20),t.save(),t.clip(s,"evenodd"),t.stroke(),t.restore()}if("transparent"!==this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fill(u)),this.hasFooter)if(this.strokeFooter){const n=new Path2D;this._renderPath(n,o,r,c,a),t.clip(n),t.beginPath(),t.rect(o,a-32,e,32),t.fillStyle="#F9F9F9",t.fill(),t.strokeStyle="#E5E5E5",t.lineWidth=2,t.stroke(n)}else t.beginPath(),t.rect(o,a-32,e,32),t.fillStyle="#F9F9F9",t.fill();this.borderRadius&&s&&(t.shadowColor="transparent",t.stroke(u));const h=s/2;if(this.indicatorColor)if(this.hideSlotEnhanced){const e=r-h,n=o-h,i=c+h;t.beginPath();let s=new Path2D;s.moveTo(n,e+4),s.quadraticCurveTo(o,e,n+4,e),s.lineTo(i-4,e),s.quadraticCurveTo(i,e,i,e+4),s.closePath(),t.clip(s),t.save(),t.shadowColor="transparent",t.fillStyle=this.indicatorColor,t.rect(n,e,this.width+2*h,4),t.fill(),t.restore()}else t.beginPath(),t.shadowColor="transparent",t.fillStyle=this.indicatorColor,t.rect(o-2,r-h,4,this.height+s),t.fill();t.restore()}}),jl=fc(class extends gc{constructor(t){super(t),this.fontFamily=t.fontFamily="PingFang SC",this.borderRadius=8}_renderPath(t,e,n,i,s){t.moveTo(e+8,n),t.lineTo(i-8,n),t.quadraticCurveTo(i,n,i,n+8),t.lineTo(i,s-8),t.quadraticCurveTo(i,s,i-8,s),t.lineTo(e+8,s),t.quadraticCurveTo(e,s,e,s-8),t.lineTo(e,n+8),t.quadraticCurveTo(e,n,e+8,n),t.closePath()}render(t){const{width:e,height:n,anchor:i,borderWidth:s}=this,o=e/2,r=n/2,[a,c]=i,u=a-o,h=c-r,l=a+o,d=c+r,f=Math.min(1,this._jflow.scale+.1);if(t.save(),t.textBaseline="bottom",t.textAlign="center",t.fillStyle="#333",t.font=`bold ${12/f}px ${this.fontFamily}`,t.fillText("if",a,h-8),t.restore(),t.fillStyle="rgba(79, 144, 248, 0.2)",t.beginPath(),t.moveTo(u-6,c+30),t.lineTo(u-26,c),t.lineTo(u-6,c-30),t.closePath(),t.fill(),t.beginPath(),t.moveTo(l+6,c+30),t.lineTo(l+26,c),t.lineTo(l+6,c-30),t.closePath(),t.fill(),t.beginPath(),this._renderPath(t,u,h,l,d),s&&(t.lineWidth=s,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*f,t.shadowOffsetX=this.shadowOffsetX*f,t.shadowOffsetY=this.shadowOffsetY*f;const i=new Path2D;this._renderPath(i,u,h,l,d),i.closePath(),i.rect(u-10,h-10,e+20,n+20),t.save(),t.clip(i,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),s&&(t.shadowColor="transparent",t.stroke())}isHit(t){const e=Math.min(1,this._jflow.scale+.1),{width:n,height:i,anchor:s}=this,o=n/2,r=i/2,[a,c]=s,u=a-o-26,h=c-r-8,l=a+o+26,d=c+r,f=20/e,p=12/e;return t[0]>u&&t[0]<l&&t[1]>h&&t[1]<d||t[0]>a-f&&t[0]<a+f&&t[1]>h-p&&t[1]<h}}),Rl=fc(class extends gc{constructor(t){super(t),this.fontFamily=t.fontFamily="PingFang SC",this.borderRadius=8}_renderPath(t,e,n,i,s){t.moveTo(e+8,n),t.lineTo(i-8,n),t.quadraticCurveTo(i,n,i,n+8),t.lineTo(i,s-8),t.quadraticCurveTo(i,s,i-8,s),t.lineTo(e+8,s),t.quadraticCurveTo(e,s,e,s-8),t.lineTo(e,n+8),t.quadraticCurveTo(e,n,e+8,n),t.closePath()}render(t){const{width:e,height:n,anchor:i,borderWidth:s}=this,o=e/2,r=n/2,[a,c]=i,u=a-o,h=c-r,l=a+o,d=c+r,f=Math.min(1,this._jflow.scale+.1);t.save(),t.textBaseline="bottom",t.textAlign="center",t.fillStyle="#333",t.font=`bold ${12/f}px ${this.fontFamily}`,t.fillText("While",a,h-8),t.restore(),t.save(),t.beginPath(),t.rect(u-28,c-24,24,48),t.clip();const p=Math.PI/2;if(t.beginPath(),t.lineWidth=12,t.strokeStyle="rgba(151, 178, 14, 0.2)",t.arc(u+2,c,19,p,3*p),t.stroke(),t.restore(),t.save(),t.rect(l+4,c-24,24,48),t.clip(),t.beginPath(),t.lineWidth=12,t.strokeStyle="rgba(151, 178, 14, 0.2)",t.arc(l-2,c,19,3*p,5*p),t.stroke(),t.restore(),t.beginPath(),this._renderPath(t,u,h,l,d),s&&(t.lineWidth=s,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*f,t.shadowOffsetX=this.shadowOffsetX*f,t.shadowOffsetY=this.shadowOffsetY*f;const i=new Path2D;this._renderPath(i,u,h,l,d),i.closePath(),i.rect(u-10,h-10,e+20,n+20),t.save(),t.clip(i,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),s&&(t.shadowColor="transparent",t.stroke())}isHit(t){const e=Math.min(1,this._jflow.scale+.1),{width:n,height:i,anchor:s}=this,o=n/2,r=i/2,[a,c]=s,u=a-o,h=c-r-8,l=a+o+26,d=c+r,f=20/e,p=12/e;return t[0]>u&&t[0]<l&&t[1]>h&&t[1]<d||t[0]>a-f&&t[0]<a+f&&t[1]>h-p&&t[1]<h}}),Nl=document.createElement("canvas");Nl.width=1,Nl.height=1;const $l=Nl.getContext("2d"),Wl=window.devicePixelRatio;$l.scale(Wl,Wl);const zl="输“/”快捷插入",Hl=new Path2D("M8.04546,6.36386C8.12899,6.36386,8.21048,6.38973,8.27872,6.43793C8.27872,6.43793,12.604,9.49325,12.604,9.49325C12.7863,9.6221,12.8297,9.87437,12.7009,10.0567C12.6761,10.0919,12.6458,10.1228,12.6113,10.1484C12.6113,10.1484,8.28603,13.3507,8.28603,13.3507C8.10656,13.4836,7.85338,13.4458,7.72052,13.2663C7.66898,13.1967,7.64116,13.1124,7.64116,13.0258C7.64116,13.0258,7.64116,10.9657,7.64116,10.9657C7.64116,10.9657,4.10514,10.9657,4.10514,10.9657C1.58514,10.98,0.216756,9.73464,0,7.22954C0.218971,7.45882,1.17601,8.81158,4.10514,8.81158C6.0579,8.81158,7.23658,8.78913,7.64116,8.74429C7.64116,8.74429,7.64116,6.76815,7.64116,6.76815C7.64116,6.54486,7.82216,6.36386,8.04546,6.36386ZM5.34002,0.163735C5.39157,0.233353,5.41939,0.317686,5.41939,0.404309C5.41939,0.404309,5.41939,2.46436,5.41939,2.46436C5.41939,2.46436,8.9554,2.46436,8.9554,2.46436C11.4754,2.45003,12.8438,3.69543,13.0605,6.20052C12.8416,5.97125,11.8845,4.61849,8.9554,4.61849C7.00265,4.61849,5.82397,4.64094,5.41939,4.68578C5.41939,4.68578,5.41939,6.66191,5.41939,6.66191C5.41939,6.88521,5.23839,7.06621,5.01509,7.06621C4.93155,7.06621,4.85006,7.04033,4.78183,6.99213C4.78183,6.99213,0.456574,3.93681,0.456574,3.93681C0.274201,3.80796,0.230801,3.5557,0.359631,3.37333C0.384447,3.33819,0.414711,3.30725,0.449279,3.28165C0.449279,3.28165,4.77452,0.079395,4.77452,0.079395C4.95399,-0.0534781,5.20717,-0.0157026,5.34002,0.163752C5.34002,0.163752,5.34002,0.163735,5.34002,0.163735Z"),Xl=fc(class extends gc{constructor(t){super(t),this.outlineColor=t.outlineColor}_drawPath(t,e,n,i,s,o){o?(t.moveTo(e+o,n),t.lineTo(i-o,n),t.quadraticCurveTo(i,n,i,n+o),t.lineTo(i,s-o),t.quadraticCurveTo(i,s,i-o,s),t.lineTo(e+o,s),t.quadraticCurveTo(e,s,e,s-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()):(t.moveTo(e,n),t.lineTo(i,n),t.lineTo(i,s),t.lineTo(e,s),t.closePath())}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const{borderRadius:e,anchor:n,width:i,height:s}=this,o=n[0]-i/2,r=n[1]-s/2,a=o+i,c=r+s;if(this.outlineColor&&"transparent"!==this.outlineColor&&(t.fillStyle=this.outlineColor,t.beginPath(),this._drawPath(t,o-3,r-3,a+3,c+3,e),t.fill()),t.beginPath(),this._drawPath(t,o,r,a,c,e),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const n=this._jflow.scale;t.shadowBlur=this.shadowBlur*n,t.shadowOffsetX=this.shadowOffsetX*n,t.shadowOffsetY=this.shadowOffsetY*n;let u=new Path2D;this._drawPath(u,o,r,a,c,e),u.rect(o-10,r-10,i+20,s+20),t.save(),t.clip(u,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),this.borderRadius&&this.borderWidth&&(t.shadowColor="transparent",t.stroke()),t.restore()}});function Yl(t){t.addElement(t.createEditLineMeta()),t.save(),t.createTextElementMeta(),t.restore()}Rs.config.productionTip=!1,Rs.use(dh,{customInstance:{InputSlot:class extends gc{constructor(t){super(t),this.iconColor=t.iconColor,this.textColor=t.textColor,this.width=103,this.height=24,this.fontFamily="PingFang SC",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.lineHeight=t.lineHeight,this.maxWidth=t.maxWidth,this.minWidth=t.minWidth,this.padding=6,this.editting=!1,this.disabled=t.disabled,this.measureHolderText(),this.width=this.defaultWidth,this.content&&this.recalculateMeta()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&("content"===e&&(this.content,t[e]),this[e]=t[e],this._rawConfigs[e]=t[e])})),this.content?this.recalculateMeta():(this.width=this.defaultWidth,this.height=24)}measureHolderText(){$l.save(),$l.font=`${this.fontSize} ${this.fontFamily}`;const t=$l.measureText(zl);this.defaultWidth=t.width+25,$l.restore()}recalculateMeta(){this._lines=function(t,e,n,i){$l.clearRect(0,0,5,5),$l.save(),$l.font=e;const s=t.split(" ");let o,r,a,c="",u=0;const h=[];for(o=0;o<s.length;o++){for(r=s[o],a=$l.measureText(r);a.width>n;)r=r.substring(0,r.length-1),a=$l.measureText(r);s[o]!=r&&(s.splice(o+1,0,s[o].substr(r.length)),s[o]=r),r=c+s[o]+" ",a=$l.measureText(r),a.width>n&&o>0?(h.push({y:u,content:c,width:a.width}),c=s[o]+" ",u+=i):c=r}return h.push({y:u,content:c,width:a.width}),$l.restore(),$l.clearRect(0,0,5,5),h}(this.content,`${this.fontSize} ${this.fontFamily}`,this.maxWidth,this.lineHeight),1===this._lines.length?this.width=Math.max(this._lines[0].width,this.minWidth)+24:this.width=this.maxWidth+24,this.height=this.lineHeight*this._lines.length+2*this.padding}_drawPath(t,e,n,i,s,o){t.moveTo(e+o,n),t.lineTo(i-o,n),t.quadraticCurveTo(i,n,i,n+o),t.lineTo(i,s-o),t.quadraticCurveTo(i,s,i-o,s),t.lineTo(e+o,s),t.quadraticCurveTo(e,s,e,s-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const e=this._jflow.scale,{borderRadius:n,anchor:i,width:s,height:o}=this,r=i[0]-s/2,a=i[1]-o/2,c=r+s,u=a+o;if(t.beginPath(),this._drawPath(t,r,a,c,u,n),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const e=this._jflow.scale;t.shadowBlur=this.shadowBlur*e,t.shadowOffsetX=this.shadowOffsetX*e,t.shadowOffsetY=this.shadowOffsetY*e;const i=new Path2D;this._drawPath(i,r,a,c,u,n),i.rect(r-10,a-10,s+20,o+20),t.save(),t.clip(i,"evenodd"),t.stroke(),t.restore()}if(t.fillStyle=this.backgroundColor,t.fill(),this.borderRadius&&this.borderWidth&&(t.shadowColor="transparent",t.stroke()),this.content){t.translate(r+2,a+6),t.save(),t.translate(0,o/2-12),t.fillStyle=this.iconColor;let e=new Path2D("M11.0965 0.519825C10.9465 0.507985 10.7949 0.501953 10.6419 0.501953C7.92857 0.501953 5.50953 2.73318 4.89521 5.53369L2.64172 5.52782C2.47294 5.52738 2.37954 5.7233 2.48614 5.85414L6.0211 10.1929C6.18095 10.3891 6.48053 10.3894 6.64078 10.1936L10.1753 5.87369C10.282 5.74329 10.1896 5.54748 10.0211 5.54704L8.04745 5.5419C8.29112 2.72379 9.35377 1.75735 11.0965 0.519825Z");t.fill(e),e=new Path2D("M2.59844 11C2.48798 11 2.39844 11.0895 2.39844 11.2V11.8C2.39844 11.9105 2.48798 12 2.59844 12H10.1984C10.3089 12 10.3984 11.9105 10.3984 11.8V11.2C10.3984 11.0895 10.3089 11 10.1984 11H2.59844Z"),t.fill(e),t.translate(0,-o/2+12),t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,t.textBaseline="top",t.fillStyle=this.textColor,this._lines.forEach((e=>{t.fillText(e.content,16,e.y)})),t.translate(-r-2,-a-6),t.restore()}else if(e>.25){t.translate(r+2,a+6),t.save(),t.fillStyle=this.iconColor;let e=new Path2D("M11.0965 0.519825C10.9465 0.507985 10.7949 0.501953 10.6419 0.501953C7.92857 0.501953 5.50953 2.73318 4.89521 5.53369L2.64172 5.52782C2.47294 5.52738 2.37954 5.7233 2.48614 5.85414L6.0211 10.1929C6.18095 10.3891 6.48053 10.3894 6.64078 10.1936L10.1753 5.87369C10.282 5.74329 10.1896 5.54748 10.0211 5.54704L8.04745 5.5419C8.29112 2.72379 9.35377 1.75735 11.0965 0.519825Z");t.fill(e),e=new Path2D("M2.59844 11C2.48798 11 2.39844 11.0895 2.39844 11.2V11.8C2.39844 11.9105 2.48798 12 2.59844 12H10.1984C10.3089 12 10.3984 11.9105 10.3984 11.8V11.2C10.3984 11.0895 10.3089 11 10.1984 11H2.59844Z"),t.fill(e),t.fillStyle=this.textColor,t.textAlign="left",t.textBaseline="middle",t.font="12px PingFang SC",t.fillText(zl,14,6),t.translate(-r-2,-a-6),t.restore()}t.restore()}}},customGroups:{LogicSeqWrapper:class extends Ll{constructor(t){super(t),this.hasFooter=t.hasFooter,this.surface=!!t.surface}_setPadding(t){this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0},t.hasFooter&&(this.padding.bottom+=34)}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.linkShiftX||0,s=this.width/2,o=this.height/2;return{0:[e+s,n],2:[e-s,n],1:[e+i,n+o],3:[e+i,n-o],100:[e+.618*s,n+.618*o]}}},IfGroup:class extends jl{constructor(t){super(t)}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const e=this._jflow.scale+.1,[n,i]=t,s=this.width/2,o=this.height/2;return{0:[n+s+30,i],2:[n-s-30,i],1:[n,i+o],3:[n,i-o-Math.max(12/e,12)-8],100:[n+s,i+50]}}},WhileGroup:class extends Rl{constructor(t){super(t)}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const e=this._jflow.scale+.1,[n,i]=t,s=this.width/2,o=this.height/2;return{0:[n+s+20,i-20],2:[n-s-30,i],1:[n,i+o],3:[n,i-o-Math.max(12/e,12)-8],100:[n+s+20,i+20]}}},InputGroup:class extends Xl{constructor(t){super(t),this.swapping=t.swapping,this.name="InputGroup"}setConfig(t){super.setConfig(t),this.swapping=t.swapping}render(t){t.save(),this._isMoving||this.swapping?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this._getCenter(),{width:i,height:s}=this,o=-i/2,r=-s/2,a=o+i,c=r+s,u=this._shape.borderWidth/2;if(this._shape.render(t),t.translate(e,n),this._shape.borderRadius){let e=new Path2D;const n=(this.padding.left+this.padding.right)/2;this._shape._drawPath(e,o+u+n,r+u,a-u-n,c-u,this._shape.borderRadius-1),t.clip(e)}this._stack.render(t),this.swapping&&(t.fillStyle="#0055CC",t.translate(-6.5,-6.5),t.fill(Hl),t.translate(6.5,6.5)),t.translate(-e,-n),t.restore()}}}}),Rs.component("j-logic-atom-node",Pl);class ql{concept="";constructor(t){this.concept=t.concept}traverse(t){t.addElement(t.createTextElementMeta(this.toCode()))}toCode(){return""}}class Vl extends ql{left=null;right=null;operator="";constructor(t){super(t),this.operator=t.operator,this.left=Jl(t.left),this.right=Jl(t.right)}traverse(t){t.addElement(t.createTextElementMeta("(")),this.left.traverse(t),t.addElement(t.createTextElementMeta(this.toCode())),this.right.traverse(t),t.addElement(t.createTextElementMeta(")"))}toCode(){return this.operator}}class Ul extends ql{value="";constructor(t){super(t),this.value=t.value}toCode(){return this.value}}const Gl={Logic:class extends ql{body=[];name="";constructor(t){super(t),this.name=t.name,this.body=t.body.map(Jl)}traverse(t){this.body.forEach((e=>{t.addElement(t.createEditLineMeta()),t.save(),e.traverse(t),t.restore()}))}},Assignment:class extends ql{left=void 0;right=void 0;constructor(t){super(t),t.left&&(this.left=Jl(t.left)),t.right&&(this.right=Jl(t.right))}traverse(t){t.addElement(t.createCompositeMeta(this,this.concept)),t.save(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"left"})),t.save(),t.addElement(t.createEditLineMeta()),t.save(),this.left&&this.left.traverse(t),t.restore(),t.restore(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"right"})),t.save(),t.addElement(t.createEditLineMeta()),t.save(),this.right&&this.right.traverse(t),t.restore(),t.restore(),t.restore()}},IfStatement:class extends ql{test=null;consequent=[];alternate=[];constructor(t){super(t),t.test&&(this.test=Jl(t.test)),this.consequent=t.consequent.map(Jl),this.alternate=t.alternate.map(Jl)}traverse(t){t.addElement(t.createCompositeMeta(this,this.concept)),t.save(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"test"})),t.save(),t.addElement(t.createEditLineMeta()),t.save(),this.test&&this.test.traverse(t),t.restore(),t.restore(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"consequent"})),t.save(),0===this.consequent.length?Yl(t):this.consequent.forEach((e=>{t.addElement(t.createEditLineMeta()),t.save(),e.traverse(t),t.restore()})),t.restore(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"alternate"})),t.save(),0===this.consequent.length?Yl(t):this.alternate.forEach((e=>{t.addElement(t.createEditLineMeta()),t.save(),e.traverse(t),t.restore()})),t.restore(),t.restore()}},WhileStatement:class extends ql{test=null;body=[];constructor(t){super(t),t.test&&(this.test=Jl(t.test)),this.body=t.body.map(Jl)}traverse(t){t.addElement(t.createCompositeMeta(this,this.concept)),t.save(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"test"})),t.save(),t.addElement(t.createEditLineMeta()),t.save(),this.test&&this.test.traverse(t),t.restore(),t.restore(),t.addElement(t.createEditAreaMeta(this,this.concept,{key:"body"})),t.save(),0===this.body.length?Yl(t):this.body.forEach((e=>{t.addElement(t.createEditLineMeta()),t.save(),e.traverse(t),t.restore()})),t.restore(),t.restore()}},BinaryExpression:Vl,LogicalExpression:class extends Vl{},Identifier:class extends ql{name="";constructor(t){super(t),this.name=t.name}toCode(){return this.name}},CallFunction:class extends ql{name="";arguments=[];constructor(t){super(t),this.name=t.name,this.arguments=t.arguments.map(Jl)}traverse(t){t.addElement(t.createCompositeMeta(this,this.concept)),t.save(),this.arguments.forEach((e=>{e.traverse(t)})),t.restore()}},Argument:class extends ql{name="";expression=null;constructor(t){super(t),this.name=t.name,t.expression&&(this.expression=Jl(t.expression))}traverse(t){t.addElement(t.createEditAreaMeta(this,this.concept)),t.save(),t.addElement(t.createEditLineMeta()),t.save(),this.expression&&this.expression.traverse(t),t.restore(),t.restore()}},NumberLiteral:Ul,Literal:Ul};function Jl(t){return new Gl[t.concept||t.type](t)}var Zl=i(68),Kl=i.n(Zl);const Ql={component:function(t){const e=S({tag:"div",className:["nasl-func-args-wrapper"]});return{initialize:()=>S({tag:"div",className:["nasl-callfunction"],childNodes:[S({tag:"h1",textContent:"内置函数",childNodes:[S({tag:"span",className:["nasl-callfunction-name"],textContent:t.name})]}),e]}),insertEditArea:(n,i,s)=>{const o=t.arguments[i],r=n.documentElement,a=S({tag:"div",className:["nasl-func-args"],childNodes:[S({tag:"span",className:["nasl-func-arguname"],textContent:o.name}),S({tag:"span",className:["nasl-colon"],textContent:" = "}),r]}),c=e.children[i];c?e.insertBefore(a,c):e.append(a)}}},template:function(t){const e=t.name,n=t.arguments.map((t=>t.name));return{parser(t){const i={concept:"CallFunction",name:e,arguments:[]};return n.forEach(((e,n)=>{const s=t((t=>t[n]));i.arguments.push({concept:"Argument",name:e,expression:s?.[0]})})),i}}}},td={component:function(t){const e=S({tag:"div",className:["nasl-func-args-wrapper"]}),n=S({tag:"div",className:["nasl-func-args-wrapper"]});return{initialize:()=>S({tag:"div",className:["nasl-assignment"],childNodes:[S({tag:"span",textContent:"将"}),e,S({tag:"span",textContent:"赋值为"}),n]}),insertEditArea:(t,i,s)=>{if("left"===s.addtional?.key){const n=t.documentElement;e.append(n)}if("right"===s.addtional?.key){const e=t.documentElement;n.append(e)}}}},template:function(t){return{parser(t){const e=t((t=>t.find((t=>"left"===t.meta.addtional?.key)))),n=t((t=>t.find((t=>"right"===t.meta.addtional?.key))));return{concept:"Assignment",left:e?.[0],right:n?.[0]}}}}},ed={component:function(t){const e=S({tag:"div",className:["nasl-func-args-wrapper"]}),n=S({tag:"div",className:["nasl-func-args-wrapper","nasl-block"]}),i=S({tag:"div",className:["nasl-func-args-wrapper","nasl-block"]});return{initialize:()=>S({tag:"div",className:["nasl-ifstatement"],childNodes:[S({tag:"div",className:["nasl-if-test"],childNodes:[S({tag:"span",textContent:"IF ("}),e,S({tag:"span",textContent:")"})]}),n,S({tag:"span",textContent:"ELSE"}),i]}),insertEditArea:(t,s,o)=>{if("test"===o.addtional?.key){const n=t.documentElement;e.append(n)}if("consequent"===o.addtional?.key){const e=t.documentElement;n.append(e)}if("alternate"===o.addtional?.key){const e=t.documentElement;i.append(e)}}}},template:function(t){return{parser(t){const e=t((t=>t.find((t=>"test"===t.meta.addtional?.key))));return{concept:"IfStatement",test:e?.[0],consequent:t((t=>t.find((t=>"consequent"===t.meta.addtional?.key)))),alternate:t((t=>t.find((t=>"alternate"===t.meta.addtional?.key))))}}}}},nd={component:function(){const t=S({tag:"div",className:["nasl-func-args-wrapper"]}),e=S({tag:"div",className:["nasl-func-args-wrapper","nasl-block"]});return{initialize:()=>S({tag:"div",className:["nasl-while"],childNodes:[S({tag:"div",className:["nasl-if-test"],childNodes:[S({tag:"span",textContent:"WHILE ("}),t,S({tag:"span",textContent:")"})]}),e]}),insertEditArea:(n,i,s)=>{if("test"===s.addtional?.key){const e=n.documentElement;t.append(e)}if("body"===s.addtional?.key){const t=n.documentElement;e.append(t)}}}},template:function(){return{parser(t){const e=t((t=>t.find((t=>"test"===t.meta.addtional?.key))));return{concept:"WhileStatement",test:e?.[0],body:t((t=>t.find((t=>"body"===t.meta.addtional?.key))))}}}}},id=/[0-9]+(\.[0-9]*)?([eE][\+\-]?[0-9]+)?|[A-Za-z_][A-Za-z_0-9]*|[+-/*]|\S|\s+/g;function sd(t){const e=new pt,n=e.createEditAreaMeta(),i=e.createEditLineMeta();return n.lines.push(i),e._stack.push(n),e._stack.push(i),e._currentTarget=i,e._contextRoot=n,t.traverse(e),e._contextRoot=i.elements[0],e}const od={feature:{CallFunction:Ql,Assignment:td,IfStatement:ed,WhileStatement:nd},codeParser:t=>Kl().parse(t),tokenize(t){const e=[];for(;;){const i=id.exec(t);if(null===i)break;const s={kind:(n=i[0],/^[A-Za-z_]/.test(n)?u:/^[0-9]/.test(n)?h:/^[+-/*]/.test(n)?l:d),index:i.index,content:i[0]};e.push(s)}var n;return e},staticAutoCompletions:{tan:{prefix:"tan",body:sd(Jl({concept:"CallFunction",name:"tan",arguments:[{concept:"Argument",name:"angle",expression:{concept:"NumberLiteral",value:""}}]}))},tangle:{prefix:"tangle",body:sd(Jl({concept:"CallFunction",name:"tangle",arguments:[{concept:"Argument",name:"param",expression:{concept:"NumberLiteral",value:""}}]}))},funcC:{prefix:"funcC",body:sd(Jl({concept:"CallFunction",name:"funcC",arguments:[{concept:"Argument",name:"p1",expression:{concept:"NumberLiteral",value:""}},{concept:"Argument",name:"p2",expression:{concept:"NumberLiteral",value:""}},{concept:"Argument",name:"p3",expression:{concept:"NumberLiteral",value:""}}]}))},if:{prefix:"if",body:sd(Jl({concept:"IfStatement",name:"IfStatement",consequent:[],alternate:[]}))},assignment:{prefix:"assignment",body:sd(Jl({concept:"Assignment"}))},while:{prefix:"while",body:sd(Jl({concept:"WhileStatement",name:"WhileStatement",body:[]}))}}};var rd=i(724),ad={};ad.styleTagTransform=Bl(),ad.setAttributes=wl(),ad.insert=yl().bind(null,"head"),ad.domAPI=bl(),ad.insertStyleElement=Al(),_l()(rd.Z,ad),rd.Z&&rd.Z.locals&&rd.Z.locals;var cd=i(902),ud={};ud.styleTagTransform=Bl(),ud.setAttributes=wl(),ud.insert=yl().bind(null,"head"),ud.domAPI=bl(),ud.insertStyleElement=Al(),_l()(cd.Z,ud),cd.Z&&cd.Z.locals&&cd.Z.locals;const hd=Jl(JSON.parse('{"concept":"Logic","body":[{"concept":"Assignment","left":{"concept":"Identifier","name":"x"},"right":{"concept":"NumberLiteral","value":"2"}},{"concept":"IfStatement","test":{"concept":"LogicalExpression","operator":"&&","left":{"concept":"BinaryExpression","operator":">","left":{"concept":"Identifier","name":"x"},"right":{"concept":"NumberLiteral","value":"2"}},"right":{"concept":"BinaryExpression","operator":"<","left":{"concept":"Identifier","name":"x"},"right":{"concept":"NumberLiteral","value":"8"}}},"consequent":[{"concept":"Assignment","left":{"concept":"Identifier","name":"y"},"right":{"concept":"CallFunction","name":"fnB","arguments":[{"concept":"Argument","name":"arg","expression":{"concept":"Identifier","name":"n"}}]}},{"concept":"CallFunction","name":"fnB","arguments":[{"concept":"Argument","name":"arg","expression":{"concept":"Identifier","name":"n"}}]}],"alternate":[{"concept":"Assignment","left":{"concept":"Identifier","name":"y"},"right":{"concept":"NumberLiteral","value":"50"}}]},{"concept":"WhileStatement","test":{"concept":"BinaryExpression","operator":"<=","left":{"concept":"Identifier","name":"y"},"right":{"concept":"NumberLiteral","value":"30"}},"body":[{"concept":"Assignment","left":{"concept":"Identifier","name":"y"},"right":{"concept":"NumberLiteral","value":"30"}}]}]}')),ld=function(t){const e=new pt,n=e.createEditAreaMeta();return e._stack.push(n),e._currentTarget=n,e._contextRoot=n,t.traverse(e),e.restore(),e.restore(),e}(hd);console.log(ld),console.log(hd),new Rs({render:t=>t(Sl)}).$mount("#ast");const dd=document.getElementById("editor");new class{constructor(t={}){this.lang=new class{components=new Map;templates=new Map;tokenize=null;codeParser=null;staticAutoCompletions=[];_lastToken=null;constructor(t){const{feature:e,tokenize:n,staticAutoCompletions:i,codeParser:s}=t;this.codeParser=s,Object.keys(e).forEach((t=>{const n=e[t];this.templates.set(t,n.template),this.components.set(t,n.component)})),console.log(this.components),this.tokenize=n,Object.keys(i).forEach((t=>{const e=i[t],n=new bt;if(n.title=t,n.put=t=>mt(e.body,t),e.prefix){const t=e.prefix;n.test=e=>function(t,e){return e.startsWith(t)}(e,t)}this.staticAutoCompletions.push(n)}))}getAutoCompletions(t){return t&&t.kind===u?(this._lastToken=t,this.staticAutoCompletions.filter((e=>e.test(t.content)))):[]}}(t.language),this.editorContext=new class{monospace=0;monospacedouble=0;setMonoSpace(t){this.monospace=t}setMonoSpaceDouble(t){this.monospacedouble=t}},this.input=new Rt,this.undoredo=new Ft,this.input._editor=this,this.undoredo._editor=this,this.commands=new Map,this.onChange=t.onChange,this.registCommand(Ct),this.registCommand(xt),this.registCommand(At),this.registCommand(kt),this.registCommand(Dt),this.registCommand(Ot),this.registCommand(It),this.registCommand(Mt),this.registCommand(Lt),this.registCommand(jt),this.registCommand(Bt)}registCommand(t){this.commands.has(t.name)||this.commands.set(t.name,t.create(this))}$mount(t,e){const i=S({tag:r,style:{position:"relative"},className:["jeditor-container"]}),s=S({tag:"div",className:["jeditor-content-wrapper"]}),a=S({tag:o,className:["jeditor-content"]});this.contentElement=a,this.containerElement=i;const c=mt(e,this);this.editareaRoot=c,a.append(c.documentElement);const u=q.create(this);this.caret=u;const h=U.create();this.shadowInput=h;const l=Ht.create(this);this.range=l;const d=Yt.create(this);this.autocompletion=d;const f=qt.create(this);this.errorDecorator=f,s.append(f.documentElement,a),i.append(h.documentElement,s,l.documentElement,u.documentElement,d.documentElement),i[n]=this,t.append(i),this.initializeContext(),u.focus(_t(c)),this.initializeEventHandler(),this.parse()}initializeContext(){const t=getComputedStyle(this.contentElement.childNodes[0]).font,e=vt("B",t);this.editorContext.setMonoSpace(e);const n=vt("文",t);this.editorContext.setMonoSpaceDouble(n)}requestCompletions(){const{textElement:t,offset:e}=this.caret.status,n=t.getTokenBeforeOffset(e),i=this.lang.getAutoCompletions(n);this.autocompletion.replaceItems(i)}parse(){this.errorDecorator.clear();const t=this.editareaRoot.prepareParse();try{const e=t.parse(this.lang.codeParser,this);this.onChange(e)}catch(t){console.warn("语法错误")}}initializeEventHandler(){this.shadowInput.addEventListener(p,(t=>{const e=t.detail.kind;switch(this.commands.get(e).exec(),this.autocompletion.replaceItems([]),e){case w:case x:case A:case k:case F:this.parse()}})),this.shadowInput.addEventListener(f,(t=>{this.input.handle(t.detail.kind,t.detail.data),this.requestCompletions(),this.parse()})),this.contentElement.addEventListener("pointerdown",(t=>{this.autocompletion.replaceItems([]);const e=z(t.target,t.clientX,t.clientY,this.editorContext);this.range.clear(),this.range.setInitialBoundary(e);const n=t=>{const e=z(t.target,t.clientX,t.clientY,this.editorContext);e&&(this.range.setCurrentBoundary(e),this.caret.focus(e.textElement,e.offset),this.resolveRange())};document.addEventListener("pointermove",n),document.addEventListener("pointerup",(t=>{document.removeEventListener("pointermove",n);const e=this.range.getSelections();if(console.log(e),e.length>0){const t=e[e.length-1];switch(t.type){case s.TEXT_ELEMENT:this.caret.focus(t.scope,t.offset[1]);break;case s.COMPOSITE:const e=I(t.scope);this.caret.focus(e,0)}}else{const e=z(t.target,t.clientX,t.clientY,this.editorContext);this.caret.focus(e.textElement,e.offset)}}),{once:!0})}))}getEditorContext(){return this.editorContext}getContentBoundingClientRect(){return this.contentElement.getBoundingClientRect()}getContainerInnerBoundingClientRect(){return this.containerElement.getBoundingClientRect()}scrollContent(t=0,e=0){this.containerElement.scrollTo(t,e)}resolveRange(){this.range.resolveRange(this.editorContext,this.getContentBoundingClientRect())}}({language:od,onChange(t){console.log(t),window.reOrderAndReflow({concept:"Logic",body:[{concept:"Start"},...t,{concept:"End"}]})}}).$mount(dd,ld)})()})();